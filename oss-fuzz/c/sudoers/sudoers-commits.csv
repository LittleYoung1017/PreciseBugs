50fde5d81	857653f9f	Thu Jul 27 09:51:57 2023 -0600	Make the sections on bug reporting consistent with each other.
d486db46c	1a00423af	Tue Jul 25 13:56:08 2023 -0600	Fix user warning message for "sudo -l command" when not allowed. Reported by the sudo-rs project.
e59c48743	09b963269	Mon Jul 24 14:24:18 2023 -0600	Document bug fixes in 1.9.14p3.
56b829f66	0462a4ee8	Mon Jul 24 10:47:15 2023 -0600	sudo_module_register_conv_message: fix copy pasta in debug_decl
c29a27e84	db704c22e	Fri Jul 14 15:29:52 2023 -0600	Document bug fixes in 1.9.14p2.
db704c22e	78b712101	Sat Jul 15 08:44:57 2023 -0600	runas_userlist_matches: fix matching a Runas_Spec with an empty runas user.
ff6ddff39	b47f1799c	Wed Jul 12 09:29:00 2023 -0600	Fix a crash in intercept mode running a command with NULL argv[0].
9afb1851b	56828f641	Tue Jul 11 14:24:42 2023 -0600	Docume bug fixes in 1.9.14p1.
db6baf2ca	2d12a4194	Mon Jul 10 14:30:38 2023 -0600	Convert sudo_debug_enter and sudo_debug_exit into macros.
2d12a4194	eff4e1c0c	Mon Jul 10 11:27:28 2023 -0600	Fix sudo_debug_exit_uint_v1 declaration for fuzzers.
eff4e1c0c	dbb95ad21	Mon Jul 10 11:23:06 2023 -0600	Add missing sudo_debug_exit_uint_v1 stub for fuzzers.
1f0f6b7c7	fd061e4d6	Tue Jul 4 18:03:47 2023 -0600	Fix some indentation.
f1d906347	bfb6132d9	Tue Jul 4 14:14:07 2023 -0600	Fix wrapping of libc getpwnam/getpwuid/getgrnam/getgrgid on NetBSD.
3a7ca0a83	d900e7a93	Tue Jul 4 08:21:21 2023 -0600	sudo_pow2_roundup: fix 64-bit version when shifting 31 or more places
fa69ee5e1	f884514b3 76d7aefb3	Mon Jul 3 20:26:20 2023 -0600	Merge pull request #285 from AtariDreams/bug
f884514b3	9266966ab 732110428	Mon Jul 3 20:21:11 2023 -0600	Merge pull request #284 from AtariDreams/fix
732110428	9266966ab	Mon Jul 3 22:20:05 2023 -0400	Fix fuzzing errors
9266966ab	f5eb1e055 cbed9daa4	Mon Jul 3 20:09:32 2023 -0600	Merge pull request #283 from AtariDreams/bug
cbed9daa4	d3dc70ab6	Mon Jul 3 22:07:35 2023 -0400	Fixed even more signedness and conversion issues
b926df1df	04c7e910e	Sat Jul 1 16:14:50 2023 -0600	Make the debug subsystem unsigned.
04c7e910e	575e4ab2f	Sat Jul 1 16:03:33 2023 -0600	Fix up indentation.
575e4ab2f	97e574091 45fdfa18f	Sat Jul 1 15:45:02 2023 -0600	Merge pull request #280 from AtariDreams/bug
97e574091	2a4939a1c	Sat Jul 1 10:39:25 2023 -0600	Avoid passing debug_return_size_t() a negative number.
5fbf431c4	ac9b6c94d	Fri Jun 30 19:08:04 2023 -0600	Fix a few memory leaks in the tests.
e0238ab21	a0b074cc9 2c13d7130	Thu Jun 29 09:50:20 2023 -0600	Merge pull request #277 from AtariDreams/debug_return_int(1);
a0b074cc9	a2a87323e	Wed Jun 28 10:59:26 2023 -0600	Fix undefined symbol on macOS for intercept mode and log_subcmds.
4f9185f4c	baf482763	Wed Jun 14 11:08:24 2023 -0600	Document recent bug fixes.
baf482763	0d1732503	Wed Jun 14 10:29:07 2023 -0600	Add tests to exercise recent runas user and group bug fixes.
0d1732503	78e65e14e	Wed Jun 14 10:15:38 2023 -0600	Add test to exercise the bug that prevented the group specified via "sudo -g" from matching when a Runas_Alias was used in the user or group portion of a Runas_Spec.
471028351	8c1559e0e	Tue Jun 13 10:29:00 2023 -0600	runaslist_matches: fix bug when no runas list is specified in sudoers.
2077b5157	c7070b047	Wed Jun 7 11:31:20 2023 -0600	Mention Bug #1050 fix.
2392ee9d7	95cd40907	Sun Jun 4 19:11:48 2023 -0600	run_command: back out changes to run editor in its own process group. It unnecessarily complicates things to work around bugs in an OS almost no one runs.
d633d82f2	0986a8846	Thu May 25 12:53:27 2023 -0600	Fix typos and update excluded/ignored codespell lists.
4d417b46d	be20e1592	Thu May 11 18:22:06 2023 -0600	Work around a macOS a kernel bug where tcsetpgrp() does not restart.
0a4c8872a	ac12f82d8	Fri Mar 31 15:51:14 2023 -0600	The I/O log file name is not just the basename of the full iolog_path. The audit plugin already has the correct value for iolog_file, don\'t overwrite it with basename(iolog_path).  In the future we may wish to pass in iolog_file and iolog_dir in addition to iolog_path. Fixes Bug #1046.
493b2441d	3b55de4e8	Tue Mar 28 16:04:47 2023 -0600	Fix display of escape sequencees in ldapsearch example.
acbe617fb	0fcbcaede	Wed Mar 22 08:26:36 2023 -0600	suspend_sudo_pty: fix cut & pasto in last commit to catch SIGCONT. Also set sa.sa_handler to SIG_DFL instead of SIG_IGN.  There is no difference for SIGCONT but it means we can re-use sa as-is later.
1772fc7b6	adb84293a	Tue Mar 21 15:50:39 2023 -0600	Only convert a signal number to a name if we are going to use it. It is mostly used for debug logging.
027b42d5a	33cb885cf	Tue Mar 14 13:27:45 2023 -0600	Fix static compilation.
d8e6396c5	918af413f	Mon Mar 13 15:21:38 2023 -0600	Declare domain even if the system lacks innetgr(). Fixes a build error on musl-based systems like Alpine.
d2582c2cd	954980b56	Wed Mar 8 19:32:11 2023 -0700	fix typo in uninstall target
ec255dca1	dea110a84	Thu Mar 9 10:10:45 2023 +0800	fix command error for lib/util/Makefile.in
d9e9307d9	b013711e4	Fri Mar 3 11:12:18 2023 -0700	Fix "sudo -l command args", broken in sudo 1.9.13. The value of user_args should not contain the command to be run in "sudo -l command args", only the arguments of the command being checked. This restores the pre-1.9.13 behavior.  GitHub issue #249
19a660612	43378de75	Wed Mar 1 13:25:17 2023 -0700	write_callback: only enable /dev/tty reader if the command is running This fixes a hang when there is /dev/tty data in a buffer to be flushed by the final call to del_io_events().  We do not want to re-enable the reader when flushing the buffers as part of pty_finish(). See PR #247 for analysis of the problem and how to reproduce it.
7356a7796	172515c94	Tue Feb 28 09:06:48 2023 -0700	Fix removal of y.tab.[ch] when generating gram.[ch].
87ce69246	6c52056d3	Tue Feb 21 20:01:13 2023 -0700	Fix potential double free for rules that include a CHROOT= option. If a rule with a CHROOT= option matches the user, host and runas, the user_cmnd variable could be freed twice.
91814990a	fb6740fa2	Thu Feb 23 06:57:37 2023 -0700	Fix --enable-static-sudoers, broken in sudo 1.9.13. sudo_qualify_plugin() should not try to fully-qualify the path to a statically-compiled plugin.  GitHub issue #245
1fed5adc1	ba7b12645	Wed Feb 22 10:45:36 2023 +0100	configure.ac: fix openssl static build
033933710	1bcddb960	Tue Feb 21 16:14:14 2023 -0700	Run the editor in its own process group. This fixes suspending the editor on GNU Hurd which doesn\'t seem to have proper process group signal handling.
8b9c1b962	b52631e87	Tue Feb 21 13:47:27 2023 -0700	Fix build when SUDOERS_NAME_MATCH is defined.
b8c13bbe8	a72bc5e6b	Sun Feb 19 09:21:39 2023 -0700	Fix indentation of intercept file in summary output.
0b000aab8	58382028a	Sat Feb 18 11:46:33 2023 -0700	Only test get_starttime() on platforms where we support it. Fixes a test failure on systems where we have no way to determine a process\'s start time.
2845ceafb	4f50692ac	Wed Feb 15 13:49:04 2023 -0700	Handle "locale -a" returning both C.UTF-8 and C.utf8. It is possible to have mutiple matches from the output of "locale -a".  Just take the first one.  Fixes GitHub issue #241.
66359c2bc	defec5d46	Wed Feb 15 04:06:15 2023 +0000	sudo_fatal: Fix build where compiler recognises [[noreturn]] attribute (C23)
defec5d46	a80dcc6ac	Tue Feb 14 14:24:28 2023 -0700	Add missing \'[\' to AS_IF() call. Fixes GitHub issue #238.
cfa1fee62	f160e5e6c	Fri Feb 3 10:35:34 2023 -0700	Mention the fix for GitHub #237.
e63eeee7b	3c9c8668c	Thu Feb 2 09:31:25 2023 -0700	Add debug tracing to tcsetattr_nobg().
b4325e64c	53389b574	Fri Jan 27 14:44:45 2023 -0700	Mention the recent intercept/log_subcmds fix.
1977f98d2	94eafd2f0	Fri Jan 27 14:44:45 2023 -0700	Fix a typo.
94eafd2f0	3b3089e4f	Fri Jan 27 10:31:12 2023 -0700	Fix determination of the number of CPU cores on Linux.
4f9da47e5	544c97821	Thu Jan 19 07:38:29 2023 -0700	The change from sudo_printf -> sudo_plugin_printf was incomplete. Fixes GitHub issue #234.
f0665166b	e5634ae99	Sun Jan 15 17:53:09 2023 -0700	Shorten --with-badpass-message argument to a single word. The fix_install script can\'t deal with whitespace in options.
8d7feb76e	0b2f9cbe7	Thu Jan 12 19:15:22 2023 -0700	iolog_mkdtemp: fix pasto in last commit Set mode to iolog_dirmode, not iolog_filemode
0274a4f3b	a960d2c45	Thu Jan 12 15:55:27 2023 -0700	sudoedit: do not permit editor arguments to include "--" (CVE-2023-22809) We use "--" to separate the editor and arguments from the files to edit. If the editor arguments include "--", sudo can be tricked into allowing the user to edit a file not permitted by the security policy. Thanks to Matthieu Barjole and Victor Cutillas of Synacktiv (https://synacktiv.com) for finding this bug.
a960d2c45	3726e3839	Tue Jan 17 16:19:29 2023 -0700	Add back the linker check for -fstack-clash-protection. This is expected to fix GitHub issue #231.
0b2f9cbe7	3878ce8d4	Mon Jan 9 14:37:47 2023 -0700	In SHA256Pad and SHA512Pad use 511 and 1023 respectively for bitwise AND. Previously we were using 504 and 1016 which still produces the correct result since padding is done in 8-bit bytes.  However, using size-1 for the bitwise AND makes the intent clearer and likely would have prevented the previous bug in SHA512Pad. From Matthieu Barjole and Victor Cutillas of Synacktiv (https://synacktiv.com)
d781ab0a8	1b7604e5c	Mon Jan 9 14:23:50 2023 -0700	Fix typo in check for environment variables that start with \'=\'.
1f58e5a8e	8309fbb97	Mon Jan 9 13:03:55 2023 -0700	Fix IS_IDLOG macro, it was testing the wrong byte for the NUL. This causes the macro to evaluate to false even for valid TSIDs.
8309fbb97	532023f7b	Wed Jan 4 10:44:58 2023 -0700	sudoers_trace_print: this is a no-op if not debugging
311d8e82d	bfd7d586b	Tue Jan 3 14:30:48 2023 -0700	iolog_mkdtemp: fix failure when the specified path contains subdirectories. This fixes a bug introduced in sudo 1.9.12.
bfd7d586b	6f9485467	Tue Jan 3 14:02:23 2023 -0700	check_iolog_mkpath: fix exit value
acee3ea6e	4b0dc2eec	Sat Dec 31 09:31:37 2022 -0700	Fix logic goof in 05781ba6f1f3, disable replacements when fuzzing. Not the other way around.
4b0dc2eec	ad55f8cce	Fri Dec 30 13:38:40 2022 -0700	Substitute python plugin file name in sudo_plugin_python documentation. Also use prefix for group plugin fallback path section in sudoers manual.
774b3c6e6	a9a3a8e37	Fri Dec 30 08:03:05 2022 -0700	Don\'t send warn/fatal output to the debug file when fuzzing.
3f095ff1b	2e9e1c80f	Thu Dec 29 12:38:00 2022 -0700	Disable sudo_debug tests when fuzzing. The debug code is disable when fuzzing is enabled to avoid coverage issues.
bca945f07	9c4271f73	Wed Dec 28 09:25:41 2022 -0700	The contents of the env_add array should not include the leading "env=" prefix. The previous fix for this was incomplete.
adf2a432a	519a00580	Tue Dec 27 12:28:53 2022 -0700	Use the POSIX shell "command -v" instead of "which" to find programs. Fix false detection of init.d/service status.
519a00580	e0fa2ec85	Tue Dec 27 12:27:29 2022 -0700	Fix example dir mode on RedHat/Fedora.
49f2d6707	27aff55ac	Thu Dec 22 16:45:13 2022 -0700	Fix support for AIX-style path(module) syntax in sudo.conf Plugin lines.
5c495b5fe	3040bf54c	Fri Dec 23 10:52:01 2022 +0800	debug_return_int use error
797cc917a	0e6482e82	Thu Dec 15 19:49:11 2022 -0700	Add basic regress for JSON functions. Fix a bug in escaped control character handling. Roll back changes to buffer if sudo_json_add_value() fails.
f26a2e762	a04557c3d	Sun Dec 11 13:46:04 2022 -0700	Fix some dead stores noted by PVS Studio. Since rc is initialized to SUDO_RC_ERROR there is no need to set it to SUDO_RC_ERROR again on failure if rc has not been changed since initialization.
a04557c3d	a514a6eed	Sun Dec 11 13:46:04 2022 -0700	Fix memory leak in multiarch_test to quiet leak sanitizer.
179fd3247	f5488d733	Thu Dec 8 10:10:41 2022 -0700	Only regenerate ChangeLog if there have been changes. Also check that "hg --version" or "git --version" works before using hg or git.  Bug #1043.
f5488d733	31684dccc	Wed Dec 7 10:25:00 2022 -0700	Fix potential crash introduced in the fix for GitHub issue #134. If a user\'s sudoers entry did not have any RunAs user\'s set, running "sudo -U otheruser -l" would dereference a NULL pointer.  We need to compare the default RunAs user if the sudoers entry does not specify one explicitly.  Problem reported by Andreas Mueller who also suggested a different solution in PR #219.
2e322c094	185fe31fe	Tue Dec 6 18:28:49 2022 -0700	Fix a typo in SUDO_CHECK_NET_FUNC.
185fe31fe	104a0294e	Tue Dec 6 18:21:49 2022 -0700	Fix -Wsign-compare warning.
11264cd49	3df7b64d8	Tue Dec 6 16:36:30 2022 -0700	Fix pasto introduced in last commit.
3df7b64d8	3d2082cdf	Tue Dec 6 16:26:34 2022 -0700	Fix failure in check targets when there is no UTF-8 C locale.
fd6484917	29c36a3c1	Tue Dec 6 08:55:44 2022 -0700	Fix check for sys_sigabbrev.
a44a005f0	16ae61dcd	Wed Nov 30 11:19:44 2022 -0700	Convert from using IPC::Open3 to IPC::Run. Run tests in a pty so check_ttyname works as expected. Explicitly set short command line options letters in GetOptions(). Add a debug flag to help see what is going on internally. Add hook for die() to kill running jobs when we are dying. SSH_AGENT_PID will not be present if the agent is forwarded. In close_persistent_connections() only close active connections.
a0d9963fe	a37ecb266	Tue Nov 22 11:15:21 2022 -0700	journal_fdopen: free journal_path and close journal before setting Fixes a potential resource leak that currently cannot happen. Quiets a warning from Infer.
dbfd84301	339626729	Tue Nov 22 10:12:29 2022 +0800	sudo_rcstr_dup: Fix potential NULL pointer deref
cbdc4883d	6a5546b11	Mon Nov 21 14:50:22 2022 +0800	Fix some typos
1eabf1357	9c694e9a6	Sun Nov 20 20:06:55 2022 +0800	sudo_mmap_strdup_v1: Fix potential NULL pointer deref
ad220d72d	b3834bbf2 f5cae905c	Thu Nov 17 08:16:40 2022 -0700	Merge pull request #200 from BornThisWay/fix_mem_leak_converse
f5cae905c	004489396	Thu Nov 17 16:08:59 2022 +0800	Fix memory leak of pass in converse().
fe8e1f3d3	920d38494	Wed Nov 16 19:23:11 2022 -0700	Fix typo; excerise -> exercise
cc0615059	096eacb21	Wed Nov 16 10:22:28 2022 -0700	Fix insufficient quoting in AC_CHECK_LIB() calls.
3ecfa025b	3cfba230c	Fri Nov 11 11:05:12 2022 -0700	sudo_debug_group_list: short-circuit if groups is NULL
264326de5	5683fc6f7	Thu Nov 10 14:55:56 2022 -0700	Fix a potential use-after-free bug with cvtsudoers filtering. In role_to_sudoers() when merging a privilege to the previous one where the runas lists are the same we need to re-use the runas lists of the last command in the previous privilege, not the first. Otherwise, the check in free_cmndspec() will not notice the re-used runas lists.  Reported/analyzed by Sohom Datta.  GitHub issue #198.
75008a057	455f250ac	Thu Nov 10 09:54:59 2022 -0700	Copy some LDIF test data from the cvtsudoers tests to the seed corpus. This includes a test to exercise the fix in PR #196.
8b898b2ca	685150586	Wed Nov 9 12:58:41 2022 -0700	Test parsing LDIF when a backslash is the last char of the file. If run with address sanitizer, this test will crash when the fix in ceaf706ab74b is reverted.
36742deec	c7071f6da	Mon Nov 7 14:51:41 2022 -0700	Fix handling of signal forwarding when running commands in a script. We need to forward signals from a process in the same pgrp if the pgrp leader is not either sudo or the command itself.
8db1eb0c8	3df1e9a07	Mon Nov 7 12:14:15 2022 -0700	Update the cwd for log_subcmds too. Fixes a problem for intercept_method=trace when running a relative command from a different directory than what sudo ws started from. GitHub issue #194
b2c8e1b1b	7ec1ee0e5	Thu Nov 3 12:03:08 2022 -0600	Display sudo_mode in hex in debug log. This makes it easier to match against the MODE_ defines.
d242261dd	966731311	Tue Nov 1 09:32:14 2022 -0600	Store raw sudoers lines in the debug log. Also add a "sudoerslex" prefix to the token debug info in sudoers_trace_print().
bd209b9f1	c78e78dc5	Fri Oct 28 07:29:55 2022 -0600	Fix CVE-2022-43995, potential heap overflow for passwords < 8 characters. Starting with sudo 1.8.0 the plaintext password buffer is dynamically sized so it is not safe to assume that it is at least 9 bytes in size. Found by Hugo Lefeuvre (University of Manchester) with ConfFuzz.
c78e78dc5	6a3fb3fd7	Sat Oct 29 11:39:05 2022 -0600	Move debugging info from hostname_matches() to host_matches().
6a3fb3fd7	366217571	Fri Oct 28 16:58:16 2022 -0600	Add debugging to sudo_set_grlist() and sudo_set_gidlist().
794449419	802e500cc	Wed Oct 26 16:35:30 2022 -0600	Fix compilation error on Linux/mips.
45ea24833	9b9404b6f	Fri Oct 21 07:51:00 2022 -0600	Adapt to current plugin API and fix warnings.
3a6083f04	803998d2b	Thu Oct 20 09:30:33 2022 -0600	Bug #1042.
803998d2b	d744271a6	Thu Oct 20 08:55:26 2022 -0600	Only add trailing carriage return to messages if output is a raw tty. If output is being written to a terminal in "raw" mode, we need to add a carriage return after the newline to avoid "stair-step" output. However, we should not write the carriage return if the terminal is in "cooked" mode, output to a pipe, or output redirected to a file. Bug #1042.
3ca21f950	82db62ec6	Thu Oct 20 06:57:37 2022 -0600	Fix a typo, muti-arch -> multi-arch GitHub issue #185
82db62ec6	e7db62f64	Wed Oct 19 19:03:00 2022 -0600	Mention log_servers eventlog fix.
d251dfd55	5c5ff3fda	Mon Oct 17 15:51:38 2022 -0600	Fix numbering in "Simple sudo installation"
6185c4f84	51a1a7d63	Fri Oct 14 08:13:35 2022 -0600	Don\'t define _LARGEFILE64_SOURCE or _LFS64_LARGEFILE. We don\'t need them and the missing prototype for crc32_combine_gen64() issue has been fixed upstream.
51a1a7d63	0be0757d6	Thu Oct 13 17:04:24 2022 -0600	Update embedded copy of zlib to version 1.2.13. Fixes CVE-2022-37434.
0eb136d65	af83e3c10	Fri Oct 7 09:28:27 2022 -0600	Fix a build error on Solaris 9.
af83e3c10	6a0f7ccc4	Thu Oct 6 16:29:54 2022 -0600	Fix display of command tags and options in "sudo -l" when RunAs changes. A new line is started when RunAs changes which means we need to display the command tags and options again.  GitHub issue #184
6a0f7ccc4	282d13532	Thu Oct 6 15:02:09 2022 -0600	Fix printing of MYSELF when listing another user\'s privileges. We need to use list_pw if it is set instead of user_name. GitHub issue #183
719b7f933	371b974e0	Tue Oct 4 08:51:36 2022 -0600	sudo_open_parent_dir: stop before creating the last path component Fix a regression introduced in sudo 1.9.9 where the entire directory path was created instead of just the parent directory.
d2a13a815	166e0e13b	Wed Sep 28 16:39:19 2022 -0600	Fix typos found by codespell 2.2.1.
3ca9220e5	e66f34d25	Tue Sep 27 09:03:33 2022 -0600	Implement find_spec, not the deprecated find_module. Fixes a test failure due to find_module having removed from setuptools.
e66f34d25	d37710b0f	Fri Sep 23 12:30:51 2022 -0600	copy_arg: fix copying an escaped backslash GitHub issue #179
cbd52e705	8c482bfeb	Wed Sep 21 19:08:09 2022 -0600	Fix potential TOCTOU when creating time stamp directory and file.
c823ca1e4	ce387a684	Tue Sep 20 16:13:31 2022 -0600	Quiet libgcrypt run-time warning about not being initialized. Fixes Debian bug #1019428 and Ubuntu bug #1397663.
4ee0caf07	7464b300d	Tue Sep 20 11:27:40 2022 -0600	Update to protobuf-c 1.4.1 We already had all the relevant fixes so this is just cosmetic.
c34160807	a32641190	Tue Sep 13 19:56:45 2022 -0600	Remove most uses of the deprecated Li macro which has no effect. Also fix some other incorrect markup.
f235390d1	3194d1667 5c1c276e2	Mon Sep 12 16:18:50 2022 -0600	Merge pull request #177 from a1346054/fixes
5c1c276e2	6fac1f518	Mon Sep 12 21:54:53 2022 +0000	Fix incorrect makefile target name
5bcec0244	a7b200d01	Sun Sep 11 19:06:25 2022 -0600	Fix some of the markup to be more consistent with sudo_plugin.mdoc.in. Also reword a few awkward phrases.
b85f95cb3	d6c7abd42	Sun Sep 11 19:06:22 2022 -0600	Fix a typo
02e92c2af	21b48a303	Sat Sep 3 09:43:41 2022 -0600	Set MODE_POLICY_INTERCEPTED for log_subcmds too. This fixes a problem where sub-commands were not being logged to the remote log server, if configured.  Since we don\'t go through sudoers_policy_main() again for log_subcmds, we set the flag in sudoers_audit_accept() instead.  The reason this is complicated is that when I/O logging is enabled the initial accept message gets sent as part of the remote logging handshake.  GitHub issue #174
21b48a303	49e9e5eb8	Fri Sep 2 15:22:40 2022 -0600	Fix typo.
22dad3f59	966eae6bf	Thu Aug 25 09:33:42 2022 -0600	Only set MODE_POLICY_INTERCEPTED on subsequent policy checks. This fixes a bug where MODE_POLICY_INTERCEPTED was set too early if the intercept option was set globally in sudoers.  It should only be set after the original command has executed.
a3a181df0	c948717bd	Sat Aug 20 14:36:29 2022 -0600	Fix shadowed variable warning.
c948717bd	8145ad12d	Fri Aug 19 13:37:49 2022 -0600	Fix shadowed variable warning on aarch64.
b2d8909c1	9f552471b	Fri Aug 19 11:05:10 2022 -0600	ptrace_intercept_execve: fail syscall rather than killing process on error. If the execve(2) args are bogus pointers, we should just return an error instead of killing the process.  For consistency with the kernel, convert EIO from ptrace(2) to EFAULT. Also convert some ptrace(2) warnings to debug printfs so sudo is less chatty.
48a9126a1	bc5016296	Thu Aug 18 15:08:38 2022 -0600	Update debug_decl name for sudo_preload_dso -> sudo_preload_dso_alloc change.
158facf6d	68b26056f	Thu Aug 11 19:34:50 2022 -0600	Use multilib rules to look for a 64-bit group plugin on failure. If sudo_dso_load() fails on a 64-bit system, try to load a 64-bit native version of the file using system-dependent multilib rules. If we don\'t support multilib on the platform, check for a version of the file that ends in "64" before the .so suffix.
e4f08157b	cf250354f	Tue Aug 2 10:53:15 2022 -0400	Fix incorrect SHA384/512 digest calculation.
620a563b5	25513b4f3	Fri Jul 29 15:17:45 2022 -0600	Only set MODE_POLICY_INTERCEPTED if we are running a command. Fixes an error with "sudo -l" when intercept is enabled globally.
3421c8b6c	f5dc739ea	Tue Jul 26 11:44:12 2022 -0600	Fix potential NULL pointer deference found by clang-analyzer.
a5ac29219	a2b0a8330	Wed Jul 13 13:06:21 2022 -0600	intercept_check_policy: add oom label and fix approval failure case. If the approval plugin fails we need to set the state to POLICY_REJECT just like we do if the policy rejected the command.
a2b0a8330	e7b7fbaf6	Sat Jul 9 11:21:17 2022 -0600	Fix a few whitespace issues.
e7b7fbaf6	224d78993	Sat Jul 9 09:02:25 2022 -0600	Increase the realloc increment from 128 to 1024. The contents of the env_add array should not include the leading "env=" prefix.
224d78993	fba81260a	Sat Jul 9 09:00:48 2022 -0600	sudo_putenv_nodebug: require that the environment string include a \'=\'
a7f9c8162	5a59ce159	Thu Jul 7 20:28:49 2022 -0600	Fix compilation error when SUDOERS_NAME_MATCH is defined.
5a59ce159	41e7532c9	Thu Jul 7 20:11:44 2022 -0600	Fix a NOPASSWD issue with a non-existent command when fdexec=always In command_matches_all(), if the command is fully-qualified and open_cmnd() return false, only treat it as an error if we are able to stat(2) the command.  For "sudo ALL" a non-existent command is not an error.
3badff39c	50813f816	Wed Jun 29 16:59:50 2022 -0600	Define _LARGEFILE64_SOURCE if _FILE_OFFSET_BITS == 64. Fixes a -Wwrite-strings warning on 32-bit systems.
bfc624990	424fa7f2b	Wed Jun 29 11:18:16 2022 -0600	Fix a clang analyzer 14 warning about a possible NULL deref.
424fa7f2b	5f534979e	Tue Jun 21 14:31:30 2022 -0600	sudo_preload_dso: make the envp function argument const This lets us fix an inappropriate cast in sudo_intercept_common.c.
0efd61620	89666e7c3	Mon Jun 27 14:01:29 2022 -0600	Fix missing prototype warning.
89666e7c3	f5ac1317c	Mon Jun 27 13:02:13 2022 -0600	Define _LFS64_LARGEFILE, _LARGEFILE64_SOURCE if 64-bit or _LARGE_FILES set. autoconf does not define _LARGEFILE64_SOURCE by default but zlib expects it (its own configure script will define it). Fixes a missing prototype for crc32_combine_gen64() on AIX and HP-UX.
f43220930	e9c269526	Mon Jun 27 07:20:37 2022 -0600	Include inttypes.h if stdint.h is not present. Bug #1035
33547702f	01a9e5a15	Tue Jun 21 20:12:58 2022 -0600	readlink(2) does NUL-terminate the buffer, do it manually. Fixes a bug where the current working directory could include garbage in intercept mode using ptrace(2).
332a6afe7	b10201bdc	Mon Jun 20 16:22:29 2022 -0600	Set TCP_NODELAY on the socket used for intercept IPC to reduce latency. On some systems, Nagle\'s algorithm was delaying receipt of the data, causing commands with intercept or log_subcmds to run slowly. Related to Bug #1034.
b10201bdc	8829c028d	Mon Jun 20 15:02:11 2022 -0600	Use blocking I/O when talking to the sudo process. Also check for EAGAIN/EINTR when reading the message size. Fixes a problem seen on AIX where recv_intercept_response() could fail unexpectedly.  Bug #1034.
8829c028d	49c27f527	Mon Jun 20 14:58:06 2022 -0600	Add debug printfs when send/recv return EAGAIN or EINTR. These are not actually errors but can help gain insight into what is going on and, in the case of EAGAIN, whether or not there may be a kernel resource starvation problem.
dfee181d1	1c00c7c23	Sat Jun 11 16:59:18 2022 -0600	Fix compilation on Linux/x32; GitHub issue #158
1c00c7c23	169e04982	Fri Jun 10 09:42:22 2022 -0600	Fix pasto in comment after HAVE_PRIV_SET #endif
169e04982	6525436db	Fri Jun 10 09:34:33 2022 -0600	Fix typo, we should define SSIZE_MAX\xc2\xa0if it is not defined.
b6a645148	d2bf3aad0	Thu Jun 9 07:34:55 2022 -0600	Fix regression with zero-length messages introduced in protobuf-c PR 500.
d549adf04	a4b2012c1	Tue Jun 7 17:14:39 2022 +0200	exec_ptrace: fix missing sudo_pt_regs on aarch64
a4b2012c1	ab00d29ec 3405fac05	Tue Jun 7 08:31:51 2022 -0600	Merge pull request #154 from 0x2b3bfa0/fix-tag-spec-docs
ab00d29ec	e4ea5ad8a a074d058e	Tue Jun 7 08:30:44 2022 -0600	Merge pull request #152 from particleflux/fix-sudoers-typo
a074d058e	e4ea5ad8a	Tue Jun 7 13:03:03 2022 +0200	Fix typo in sudoers comment
263fdc6b0	b77cbb2e6	Mon Jun 6 20:15:03 2022 -0600	Fix issue protobuf-c#499: unsigned integer overflow Signed-off-by: 10054172 <hui.zhang@thalesgroup.com>
b77cbb2e6	c2a131714	Mon Jun 6 19:42:29 2022 -0600	Fix building with select (not poll) when fd_set is not defined in sys/types.h. We can use a void * for the fd_set arrays and just add a cast when using the FD_SET macros.
c2a131714	db6fc237c	Mon Jun 6 19:42:07 2022 -0600	Reinstall the event handler if we get EAGAIN from read/write callback. The read and write events do not set SUDO_EV_PERSIST so we need to explicitly re-enable the event if there is still data to be read. Bug #963.
fcb5867f1	96c3c2819	Mon Jun 6 08:39:22 2022 -0600	Document how setting ModulePath affects the Python search path. Also advise the user to use a unique prefix to avoid name space collisions with installed Python modules.  Bug #1031.
66909a483	2d6b9d22e	Thu Jun 2 14:09:46 2022 -0600	Mention sudo_logsrvd.conf "log_server" parsing fix.
d7b2ff321	0ca222aa8	Thu Jun 2 11:13:18 2022 -0600	Add a simple regression test for logsrvd.conf parser. Unlike the parser fuzzer, this includes sample certs and keys. This test would have detected the BIO_new_file() bug in set_dhparams().
0ca222aa8	bec9603f3	Thu Jun 2 10:59:30 2022 -0600	Fix inverted logic when setting server_log. A value that starts with a \'/\' should be treated as a path.
89b80ea69	eb0135a93	Wed Jun 1 14:49:31 2022 -0600	Fix bug in last commit, need to reinitialize role to NULL.
1c8316162	dc8311dae	Sun May 29 15:52:48 2022 -0600	On AIX, fmemopen(3) has a bug where feof() returns false at EOF. See https://www.ibm.com/support/pages/apar/IJ11845
dc8311dae	93916fde4	Fri May 27 15:47:32 2022 -0600	Fix potential signed integer overflow on 32-bit CPUs. Converting fractional minutes to nanoseconds could overflow a 32-bit integer, use long long instead.
93916fde4	b497d7454	Fri May 27 15:33:58 2022 -0600	Fix path to example sudoers file, it is now in the build dir.
6eda28ef5	789bc6ec8	Fri May 27 13:08:01 2022 -0600	Fix typo
15f167c3a	7125a9cc2	Fri May 27 11:23:45 2022 -0600	Fix uninitialized use of ca_store when building with wolfSSL.
dc2b28d3e	b6ddf3db6	Thu May 26 16:33:46 2022 -0600	Pass envp, not environ, to real execve() from exec_wrapper() if possible. The replacement execve() function was passing the global environ to exec_wrapper() instead of the envp parameter.  This caused the command to be run with the wrong environment on AIX systems, and possibly others, when intercept or log_subcmds was enabled. Bug #1030.
583e8bf53	0b63af91b	Thu May 19 17:01:14 2022 -0600	Use explicit library dependencies instead of implicit. We now include all the dependent libraries when linking. Fixes a linking problem on CentOS Stream 9.
a52e3776f	0bcfe6184	Tue May 17 14:26:03 2022 -0600	Fix suspending a sudo-run shell in ptrace intercept mode with no pty. When ptracing a process, we receive the signal-delivery-stop signal before the group-stop signal.  If sudo is running the command in the same terminal, we need to wait until the stop signal is actually delivered to the command before we can suspend sudo itself.  If we suspend sudo before receiving the group-stop, the command will be restarted with PTRACE_LISTEN too late and will miss the SIGCONT from sudo.
b61a55eb1	55bd6272c	Sun May 15 07:45:51 2022 -0600	Fix dependency check for libssl on Debian/Ubuntu with OpenSSL 3. Also add check for python 3.10 and 3.11 and remove versions < 3.4. Fixes building on Ubuntu 22.04.
3238c43f9	cb95b75ff	Sat May 14 13:05:00 2022 -0600	ptrace_write_string: the terminating NUL fix was reverted by mistake.
6a196190c	3226c2df4	Fri May 13 07:55:05 2022 -0600	Replace verbose flag with debug flag. This is more accurate since it actually uses the debug subsystem.
b99debf92	4a7d26c38	Thu May 12 10:23:27 2022 -0600	Add arm-specific code to set the system call number. Fixes rejection of commands due to policy on arm when in intercept mode.
4a7d26c38	ea2bf7f1f	Thu May 12 09:42:34 2022 -0600	Fix OS major version detection on CentOS Stream
0f104d2ff	f94e5d40d	Thu May 12 08:37:48 2022 -0600	Fix a crash when not run in verbose mode.
f94e5d40d	64aba8f88	Wed May 11 20:07:59 2022 -0600	Fix compilation error on systems with no compat arch. Currently only affects i386.
55f5e389b	31e8506c8	Wed May 11 20:07:59 2022 -0600	Fix tracing compat binaries on big endian systems. We need to swap the order of the two 32-bit addresses for big-endian.
8fe123867	a40d62b3d	Tue May 10 08:17:00 2022 -0600	Fix compilation error when SECCOMP_AUDIT_ARCH_COMPAT is not defined.
cc52ab770	4cac34b86	Tue May 3 12:54:10 2022 -0600	exec_ptrace_handled: fix delivery of non-stop signals. We need to deliver signals to the tracee as long as it is not a group stop.  Fixes a hang while tracing another sudo process.
4cac34b86	4d75b3279	Tue May 3 09:38:28 2022 -0600	Make SIGCHLD handler more consistent with the pty version. No real change other than a few debug statements.
42117a1ce	4ac1237bd	Mon May 2 18:14:30 2022 -0600	Move intercept setid check out of do_stat() and into its own function. For command_matches_all() we should only perform the setid check if the file exists and intercept is enabled.  Otherwise, we can end up returning an error if the fully-qualified command does not exist. Fixes a regression introduced in sudo 1.9.0 with the support for digests in conjunction with "sudo ALL".
307b4f69b	77979932b	Fri Apr 29 19:03:20 2022 -0600	Fix typos
423fbedb6	fe80dc0bc	Fri Apr 29 13:09:03 2022 -0600	Suspend the child process and wait for SIGUSR when using ptrace. This fixes a race condition in ptrace-based intercept mode when running the command in a pty.  It was possible for the monitor to receive SIGCHLD when the command sent itself SIGSTOP before the main sudo process did.
46edc4e19	c7ed03c98	Fri Apr 29 08:02:57 2022 -0600	Stop using the WCONTINUED flag with waitpid(2). We don\'t use it for anything other than a debug message and it will cause problems when intercept mode starts using ptrace(2).
c7ed03c98	72794ecd7	Sun Apr 24 17:26:05 2022 -0600	sudo_logsrvd: update elapsed time for winsize and suspend in journal mode Fixes a bug in store-first relay mode where the commit point messages sent by the server were incorrect.
72794ecd7	d2da56dac	Sat Apr 23 07:21:08 2022 -0600	Fix typo; GitHub issue #144
a1e20ddd9	dcb2fb26a	Mon Apr 4 10:13:28 2022 -0600	Fix check for EVP_MD_CTX_new() when -pthread is in Libs.private.
90501b700	c77cba373	Thu Mar 31 16:14:10 2022 -0600	Fix check for EVP_MD_CTX_new using static libcrypto with dependencies.
dfd8ef293	5c0436f0b	Tue Mar 29 16:53:37 2022 -0600	Fix a typo in the AIX section.
5c0436f0b	6af2b4188	Mon Mar 28 08:51:41 2022 -0600	Update embedded copy of zlib to version 1.2.12. Fixes CVE-2018-25032
 pair to ttyfp if possible, falling back on fp. This is consistent with the vfprintf() call and fixes a problem introduced by the last commit where the newline could be written before the message instead of after.
753771390	210875796	Tue Mar 15 08:38:27 2022 -0600	Adjust starttime test when run under Debian faketime. Bug #1026
210875796	ff1731798	Mon Mar 14 20:11:38 2022 -0600	sudo_conversation_printf: convert trailing nl to cr + nl combo. This fixes output when the terminal is in raw mode and is consistent with how sudo_conversation() behaves.
1f64aca22	ef4ce5c08	Mon Mar 14 13:51:03 2022 -0600	Unset LANGUAGE when running tests, otherwise it may override LC_ALL. Bug #1025.
b2a32f95e	8e7c004c7	Fri Mar 11 09:03:55 2022 -0700	getdelim_test: increase longstr to check end pointer after realloc This would have caught the recent bug in our getdelim replacement when run under address-sanitizer or valgrind.
8dae0ba06	eb2803c3e	Thu Mar 10 20:05:40 2022 -0700	Fix off-by-one when storing line number in userspec. We store the line number *after* parsing the newline so we need to subtract one.
eb2803c3e	65e5b89f1	Thu Mar 10 13:59:34 2022 -0700	For alert messages, the command or runuser may not be set. This fixes the logging of parse errors when JSON logging is enabled.
e5bbd3383	42f735c8d	Fri Feb 25 09:46:26 2022 -0700	testsudoers/test18: don\'t rely on /usr/bin/w being present Fixes a test failure on Alpine Linux.
68bc030c0	22a01410b	Thu Feb 24 08:15:01 2022 -0700	Fix PVS-Studio platform check for macOS.
22a01410b	f793042be	Thu Feb 24 07:56:38 2022 -0700	sudo_ldap_parse_options: fix memory leak of sudoRole cn string. Coverity CID 249976
eaf76278e	b0fa76950	Tue Feb 22 14:13:15 2022 -0700	Fix compilation on systems without a real openat(2).
72961fe43	9f695f0fc	Tue Feb 15 19:41:31 2022 -0700	Fix potential NULL deref if getpwuid(0) fails. Coverity CID 249326
0bbe4b181	0e2e4b688	Fri Feb 11 19:07:08 2022 -0700	Substitute paths set by configure in examples.  Bug #1023
3c1ce4bf7	3b6f620e3	Thu Feb 10 13:33:24 2022 -0700	store_iobuf_local: fix potential double free on the error path.
b6a2fcf59	c5027c796	Thu Feb 10 09:43:33 2022 -0700	iolog_pwfilt_run: fix types in error return
8adad85b4	53d3e2009	Tue Feb 8 11:26:55 2022 -0700	A few minor (mostly cosmetic) fixes. Add missing ALL to Runas_Member and Host. Replace some tabs with spaces. Fix the syntax of a sudoedit example.
c5133d84e	6aa320c96	Fri Feb 4 08:31:03 2022 -0700	Upgrade http links to https where possible and fix some broken links.
4d0aeea68	de0f4398e	Thu Feb 3 12:31:56 2022 -0700	Log fn_get_values() return code in the debug log on error. Also move a nested switch() statement out of \'case 0\' for improved readability.
de0f4398e	c236d58b5	Thu Feb 3 11:31:05 2022 -0700	Do not return an error if we cannot connect to the SSSD connector. This may simply mean that nsswitch.conf lists sss as a sudoers source but SSSD is not configured for sudo.  Otherwise, the user will receive a useless "problem with defaults entries" when the sssd backend tries to fetch the global defaults.  Bug #1022.
d18ee7935	2e957cd43	Thu Feb 3 10:19:40 2022 -0700	sudo_logsrvd: make sure journal exists before writing the alert message. Fixes a potential NULL dereference when journaling an alert message.
2e957cd43	a29940629	Thu Feb 3 09:33:30 2022 -0700	Fix compilation on Debian kFreeBSD. The configure script correctly detects that utimensat() and futimens() are missing but the headers define stub versions of the functions. Including sys/stat.h pulls in the system definitions  so we can override them safely.  Bug #1021.
a29940629	85fef8b50	Wed Feb 2 08:32:44 2022 -0700	Add fallback if /proc/self/stat or /proc/pid/psinfo is missing or invalid. If the /proc file indicates no terminal is present there is no fallback. Bug #1020
6564f1ae4	ac555d454	Tue Feb 1 13:12:19 2022 -0700	Work around a glibc regcomp() bug with repeated \'+\' operators. Glibc regcomp() has a bug where it uses excessive memory for repeated \'+\' ops.  Collapse them to avoid running the fuzzer out of memory.
ad719d06b	2df2276d5	Tue Feb 1 13:08:40 2022 -0700	Fix parsing of "retry_interval" in the relay section. The setting was present but the callback was missing so it could not be parsed in the conf file.
960bf9965	8f4351a89	Mon Jan 31 19:18:04 2022 -0700	defaults_check_conflict: it is only really a conflict if the binding match If the Defaults name matched but the binding does not, we can simply leave it be.  Fixes a problem where given two sudoers sources that have a host specified, if they contain conflicting Defaults entries we would drop one of the Defaults instead of keeping both after making them host-specific.
ada7d4382	5f45fd907	Tue Jan 25 12:10:36 2022 -0700	Fix potential infinite loop when trying to format long lines.
08abeb94a	5e30d0120	Wed Jan 19 09:36:58 2022 -0700	Fix logic inversion when setting negated flag.
3f8b7f6ea	e1c2288fb	Tue Jan 18 16:49:17 2022 -0700	Bug #1016, #1017 and negated sudoUser in LDAP.
1f098a202	757c3a1d3	Wed Jan 12 10:25:44 2022 -0700	Use POSIX NAME_MAX, not the obsolete MAXNAMLEN define. Fixes compilation with musl libc.
757c3a1d3	1c95ab885	Tue Jan 11 13:30:20 2022 -0700	When applying fallback limits, make sure we don\'t reduce rlim_max. Fixes a problem where sudo could reduce the max stack size on some systems if the original limit was higher than the fallback limit, but not unlimited/infinity.
763256e46	3b7d32b25	Fri Jan 7 12:49:30 2022 -0700	Improve debugging info when fdopen() fails.
a2d27bc9e	513574ce1	Wed Jan 5 16:41:19 2022 -0700	Fix return value for non-interactive mode for non-standalone auth methods. AUTH_NONINTERACTIVE was being stored in the wrong variable.
1b72f138e	8c42a29a1	Wed Jan 5 10:59:27 2022 -0700	Remove PAM_TTY workaround for old, buggy PAM modules. In the past, some PAM modules assumed that PAM_TTY was set and would misbehave (or crash) if not.  This was primarily obsolete versions of Linux-PAM, so it should now be safe to remove this.  Setting PAM_TTY to an empty string can cause its own set of issues. GitHub issue #74
8c42a29a1	521ef37ae	Tue Jan 4 19:42:58 2022 -0700	Mention fix for Bug #956 and GitHub issue #83.
521ef37ae	296d876b7	Tue Jan 4 18:57:36 2022 -0700	Push non-interactive mode checking down into the auth methods. For "sudo -n" we only want to reject a command if user input is actually required.  In the case of PAM at least, we may not need to interact with the user.  Bug #956, GitHub issue #83
296d876b7	835079fa3	Mon Jan 3 16:40:32 2022 -0700	userspec_overridden: fix checks when there is more than one userspec
835079fa3	d02ba52fa	Mon Jan 3 13:23:22 2022 -0700	Fix merging of global/ALL entries when each input file has a host. If a host is specified for the input file, cvtsudoers will bind global Defaults to that host and change host "ALL" in a userspec to the host name.  However, if all the input files have matching hosts we can simplify the merged file by converting back to ALL after resolving conflicts.
149e8208b	4ffc3142c	Mon Dec 20 12:57:02 2021 -0700	cvtsudoers: fix a regression when merging matching Defaults. If a host is specified with a sudoers file, we have to treat Defaults as Defaults@host checking for duplicates.
7d7e24d16	c53192eb7	Sat Dec 11 16:27:58 2021 -0700	Bugs #1013 and #1014
e66e1ca38	c13b21c19	Sat Dec 11 09:08:03 2021 -0700	In SECURITY NOTES, clarify that PATH may be overridden by the policy. Bug #1014
55db23924	a2aa70970	Sat Dec 11 08:35:14 2021 -0700	Sudo parsed "deref" and "tls_reqcert" in ldap.conf but didn\'t set the options. The switch() in the sudo_ldap_set_options_table() function needed to be updated to treat CONF_DEREF_VAL and CONF_REQCERT_VAL data types as int. Fix from Dennis Filder.  Bug #1013.
83defd3a6	014339948	Fri Dec 10 13:33:07 2021 -0700	Fix CodeQL "Multiplication result converted to larger type" warnings.
aae130eb7	0608a4ea6	Thu Dec 2 07:19:43 2021 -0700	Add build dir to include search path for mksiglist.h and mksigname.h Fixes out of tree builds on systems without sys_siglist[] or sys_signame[].  GitHub issue #123.
d83321388	dc5ac7424	Sat Nov 20 09:40:06 2021 -0700	Quiet a PVS Studio warning. The warning that need_comma is always false is correct but in this case it is better to use a consistent construct so that if the code is re-ordered no bugs are introduced.
ab9e44a6c	33fbf5946	Fri Nov 19 12:29:21 2021 -0700	cvtsudoers: merge aliases when multiple sudoers files are specified Duplicate aliases are remove.  If there are conflicting alias names, the conflicts are renamed by appending a numerical suffix. For example, if there are two SERVERS Host_Aliases, the second one will be renamed to SERVERS_1.
33fbf5946	4cb34a201	Tue Nov 16 19:00:56 2021 -0700	Add support for specifying the hostname as a prefix to the sudoers file. If present, the host name is copied into the struct sudoers_parse_tree.
3ab280fc6	781a4fb69	Thu Nov 11 14:19:22 2021 -0700	Fix formatting of links.
55d17eaa3	def7a51f4	Tue Nov 9 16:09:48 2021 -0700	install_sudoers: fix return value when there is no temp file to install This can happen when no changes were made.  Also preserve the edited temp file on error if we are unable to move it into place.
cdd41af66	78709eaee	Sat Nov 6 12:37:13 2021 -0600	visudo: add -O and -P options to check/set owner and permissions. This can be used in conjunction with the -c option to check that the sudoers file ownership and permissions are correct. Bug #1007
ff888e700	4e1e07b88	Mon Nov 1 13:28:09 2021 -0600	Fix lint warning: skipping paragraph macro: Pp before Bd
4eebd53bc	b506497fe	Sun Oct 31 09:27:34 2021 -0600	parse_gentime: use timegm() to generate time since the epoch The timegm() function is non-standard but widely available. Provide an implementation for those systems that lack it. Bug #1006
b506497fe	dcd2199f7	Sun Oct 31 09:01:18 2021 -0600	Fix pasto in gmtime_r and localtime_r macros. Also add missing Makefile targets for them.
a808f8e7e	e73e9d5e4	Sat Oct 23 15:27:20 2021 -0600	Fix setting _PATH_ASAN_LIB, need to double up the square brackets.
badd6267b	9dd630494	Wed Oct 20 08:52:04 2021 -0600	Fix compilation of standalone arc4random_buf(). Apparently this code was never compiled anywhere.
02e77e656	5eebc3098	Tue Oct 19 11:57:32 2021 -0600	Fix potential use-after-free when calling iolog_flush_all(). We need to call iolog_flush_all() _before_ scheduling the commit point. If we fail to schedule to commit point, the closure will be freed. Coverity CID 220557
f73bc6dee	15b4427b9	Tue Oct 19 08:46:28 2021 -0600	format_json: fix pasto when setting dumped_core boolean
7a56c9871	4b7b3c05e	Sun Oct 10 16:14:52 2021 -0600	mkpkg: preserve make exit value on exit Fixes a problem where the exit value from mkpkg was 0 even on error.
4b7b3c05e	430048d16	Sun Oct 10 16:06:01 2021 -0600	Fix typos in SELinux and Solaris priv support.
a4fb31aa0	032575f57	Sun Oct 10 14:14:56 2021 -0600	Fix typo and avoid a codespell false positive.
eaee7a0eb	f6fc70e5d	Thu Oct 7 08:19:11 2021 -0600	Fix fuzzer build with when --enable-static-sudoers is used. This introduces a sudoers-specific version of LT_STATIC instead of appending the --tag=disable-shared to SUDOERS_LDFLAGS. I\'ve also removed the -static flag as it should not be needed.
8350307a2	850804472	Tue Oct 5 13:08:48 2021 -0600	Try to handle the case where libasan.so is a linker script. Fixes check_noexec with ASAN on Fedora where libasan.so just includes the actual library file.
d15e117c2	dde951a09	Wed Sep 29 10:25:19 2021 -0600	find_editor: remove the env_error argument There is no case where we should fail to find an editor just because the values of EDITOR, VISUAL and SUDO_EDITOR are unavailable.  Both sudoedit and the "env_editor" sudoers setting are documented as falling back on the hard-coded list of editors in the "editors" sudoers setting.  Bug #1000
dea7e6aef	476f00b82	Tue Sep 28 13:24:21 2021 -0600	expand_buf: fix conditional for when we need to preserve existing data It is possible for the buffer offset to be zero when the length is non-zero.  The proper value to use is the same as is used for the memcpy/memmove size.  Fixes buffer corruption caused by a very long command line that usually results in a dropped connection.
1d203c834	1831176a1	Fri Sep 24 10:57:12 2021 -0600	Fix typo in last commit, use boolean AND not bitwise.
99655f28d	86df86ed9	Wed Sep 22 11:23:41 2021 -0600	format string fix: print signal number as unsigned. Quiets a cppcheck warning; mksiglist.c already has this fixed.
86df86ed9	b9b845183	Wed Sep 22 11:17:55 2021 -0600	Fix memory leak on error path if snprintf() overflows. Coverity CID 188804
0f2252f89	e23874d0f	Tue Sep 21 19:01:22 2021 -0600	Amend truncation fix, the real problem was the size passed to snprintf(). sudo_rcstr_alloc() takes a length (not a size) parameter so when calling snprintf() we need to add one to the length.
e23874d0f	4fef09e1c	Tue Sep 21 12:49:18 2021 -0600	Fix truncation of the last char of the sudoRole cn passed to append_default(). This string is primarily used for warning messages. Also check the snprintf() return value to avoid silent truncation. GitHub issue #115
a036cb025	a78d3cc25	Mon Sep 20 15:59:47 2021 -0600	fix typo
7ab66eb3a	518bc1b25	Sun Sep 19 13:58:56 2021 -0600	sudo -i: missing NULL terminator when moving argv to make room for --login Fixes a potential crash for "sudo -i" when the target user has bash as the shell (which needs the --login option).  Bug #998.
46d71c436	78eb24064	Fri Sep 17 10:55:06 2021 -0600	Store milliseconds in the debug file timestamp. Sometime second granularity is not enough.
4e0b77be4	052391da9	Fri Sep 17 10:55:06 2021 -0600	tls_init.c: use SSL_CTX_set0_tmp_dh_pkey if present. Fixes a warning on OpenSSL 3.0 and plugs a memory leak of dhparams on config reload.
ecc3aeffc	18613eee2	Mon Sep 13 09:33:07 2021 -0600	Some POSIX yacc fixes for bison 3.8 yyerror() must be extern void declare tokens with type instead of using separate %type lines
cf225d2f1	2445576e9	Fri Sep 17 09:10:27 2021 -0600	Add a test to exercise Bug #994
2445576e9	eab915ae9	Thu Sep 16 13:49:32 2021 -0600	fix typo
eab915ae9	0c30976ae	Thu Sep 16 11:36:50 2021 -0600	Bug #994.
0c30976ae	31e4a0a0a	Thu Sep 16 11:24:26 2021 -0600	Always allocate a struct sudo_command for the command, even for ALL. This was missed in the previous set of changes, resulting in a crash for LDAP and SSSD rules that give sudo "ALL" privileges. Bug #994.
31e4a0a0a	2d632937e	Thu Sep 16 11:01:07 2021 -0600	Add SUDOERS_LDFLAGS to FUZZ_LDFLAGS Fixes a fuzzer link error when building with ldap if the ldap libs are not in the default library search path.
2d632937e	e1653be43	Thu Sep 16 10:04:22 2021 -0600	Fix the OpenSSL link order for the non-pkg-config case. Since -lssl depends on -lcrypto, -lcrypto must be listed after -lssl. Fixes linking of non-dynamic OpenSSL libs.
db750232c	d7cdf1e47	Wed Sep 15 11:19:03 2021 -0600	Avoid symbol name clash to fix --enable-static-sudoers linking.
d7cdf1e47	4b5a67cf8	Tue Sep 14 08:02:37 2021 -0600	append_defaults() should not be passed a value for boolean flags. The operation should simply be set to true/false. Also treat a NULL file as coming from the front-end. Bug #993.
02966f059	4b365300a	Wed Sep 8 17:10:30 2021 -0600	Mention --enable-static-sudoers fix.
4b365300a	3a4aec7a6	Wed Sep 8 15:31:08 2021 -0600	Fix typo introduced in 1.9.7 that set SUDO_LDFLAGS to SUDOERS_LDFLAGS. Copy pasta is not always the best kind of pasta.
157ceadfa	f64d71674	Thu Sep 2 14:15:50 2021 -0600	Fix computation of the token address when handling a partial read. We want to treat it as an array of bytes, not an array of tokens. Coverity CID 240011
242e4d070	4ca5c7d64	Wed Sep 1 11:07:36 2021 -0600	Fix typo in comment.
4bff82cab	9137909c7	Tue Aug 31 19:53:28 2021 -0600	Fix random uuid generation, no need to convert between byte order. Also add regression test.
33d1b26c6	168d5c47c	Tue Aug 31 05:50:52 2021 -0600	intercept_check_policy: Fix double free introduced in last commit If the command is not accepted we don\'t rebuild command_info[] and must not free it.  It will be freed by the policy instead.
22de92b0d	75bac8dee	Fri Aug 27 13:19:58 2021 -0600	Fix LD_PRELOAD formatting when there is an existing LD_PRELOAD var.
75bac8dee	ba171724f	Thu Aug 26 17:29:30 2021 -0600	intercept_check_policy: fix potential NUL dereference on the error path.
dcab17900	3d8b327c6	Thu Aug 26 10:43:15 2021 -0600	Add sudo_debug_register_v2() stub for fuzzing build.
3d8b327c6	dc30c842b	Thu Aug 26 10:07:50 2021 -0600	Fix use-after-free on error. Also remove useless free of a ptr that is always NULL on the error path.
dc30c842b	70aef0eb2	Thu Aug 26 09:57:25 2021 -0600	No longer need to remap intercept fd but we do need to remap debug fd. The intercept fd is closed in the ctor but the debug fd will still be open.
70aef0eb2	d6a71fe32	Thu Aug 26 09:57:24 2021 -0600	sudo_debug_register: add minfd argument to specify lowest fd number Use this in sudo_intercept.so to avoid allocating a low-numbered fd which the shell reserves for use by scripts.
d6a71fe32	ec751c63e	Thu Aug 26 09:46:26 2021 -0600	Fix command name of sub-command in logs when log_children is set.
0aedc965f	9980357a7	Wed Aug 25 13:11:57 2021 -0600	command_matches: avoid printf("%s") of NULL in debug for sudo ALL.
9980357a7	222d6f94c a12b15b43	Wed Aug 25 08:09:00 2021 -0600	Merge pull request #111 from commodo/fix-cflags
222d6f94c	139181344	Tue Aug 24 08:51:43 2021 -0600	Fix typo that caused SUDO_INTERCEPT_FD to overwrite LD_PRELOAD.
139181344	df68f4c8d	Tue Aug 24 08:34:14 2021 -0600	Fix off-by-one that could result in duplicate SUDO_INTERCEPT_FD vars.
df68f4c8d	98401c058	Tue Aug 24 08:09:20 2021 -0600	Fix typo in macOS execv change.
1e795b548	bb40491c9	Fri Aug 20 16:07:02 2021 -0600	Add a Debug example for sudo_intercept.so Don\'t try to enumerate all the sudo programs that support debugging since all of them do.
bb40491c9	8ccb7f009	Fri Aug 20 15:50:02 2021 -0600	Update sudoers Debug example to match the debug changes from sudo 1.8.12.
7df245dc9	4ccd966e2	Fri Aug 20 14:01:44 2021 -0600	Fix formatting for bound defaults with multiple entries in the binding. The entries in the binding were separated with " ," instead of ", ".
dc281f036	680fd4a62	Fri Aug 20 11:32:29 2021 -0600	Add some debugging to the sudo_intercept.so.
23e5304b7	5d3ab032f	Thu Aug 19 19:05:50 2021 -0600	Fix prototypes for sudo_pread() and sudo_pwrite().
d333f484e	52e7594ae	Thu Aug 19 10:30:02 2021 -0600	Fix mksiglist and mksigname dependencies.
09f160779	90aee138b	Thu Aug 19 09:54:18 2021 -0600	The fix for bug #989 will make sudo 1.9.8. Also mention intercept_authenticate and intercept_allow_setid.
6d3cf0ffd	e2abcd6cb	Sat Aug 14 09:18:55 2021 -0600	store_alert_local: fix memory leak on error path Coverity CID 238642
e2abcd6cb	340d75394	Sat Aug 14 09:11:02 2021 -0600	log_server_accept: fix memory leak of evlog when logging a sub-command. Coverity CID 238643
340d75394	4add9c2c0	Sat Aug 14 08:54:36 2021 -0600	Fix memory leak when client requests secret. Move closure allocation closer to where it is used.
4add9c2c0	0f6a74f18	Sat Aug 14 08:47:44 2021 -0600	store_accept_local: fix return value on error
695f4bea0	064981fb1	Fri Aug 13 16:00:00 2021 -0600	Add support for an optional offset when parsing the ID to replay. The offset is a suffix in the form of @sec[.nanosec]
9798fd86b	abac06956	Tue Aug 10 12:58:18 2021 -0600	Add garbage collection to resolve_editor(). Fixes a leak when evaluating the policy multiple times if sudoedit is set.
abac06956	aa20eccad	Mon Aug 9 16:39:32 2021 -0600	Fix compilation when configure option --disable-shared is specified.
2e99450d4	3a090dcdc	Mon Aug 9 15:50:26 2021 -0600	Fix logging intercepted commands to a log server in sudoers. Only available when the server supports the subcommands capability.
0ea5efd8b	788708c9f	Mon Aug 9 15:50:26 2021 -0600	If msg_control is not present in struct msghdr use msg_accrights instead. Fixes building on Solaris and probably others.  It is possible to expose msg_control on Solaris but this requires a specific set of feature flag defines which can cause other complications.
258fa9d4f	9c3df47da	Mon Aug 9 15:50:25 2021 -0600	Add debug support to sudo_intercept.so
5e3ce532f	132936f8f	Mon Aug 9 15:50:25 2021 -0600	Allow set_perms(PERM_INITIAL) to be called more than once. If the perm stack depth is non-zero when set_perms(PERM_INITIAL) is called, rewind it first and re-initialize the stack depth to 0. Fixes a user-after-free bug if set_perms(PERM_INITIAL) is called multiple times.
b3e86c65b	14ffa00c0	Mon Aug 9 08:19:40 2021 -0600	expand_prompt: use correct strlcpy() size parameter The available size passed to strlcpy() was computed incorrectly. Switch to updating the length after writing to the new prompt instead of computing it each time.  The actual buffer size is computed and allocated correctly so there is no real consequence to this bug. Found by Qualys.
d1c29fb00	e4568ceaf	Mon Aug 2 08:57:35 2021 -0600	Add some debugging info to find_path()
40496f510	aee82efe4	Thu Jul 29 09:29:07 2021 -0600	Prefix sanitizer and fuzzer options with -XCClinker in ASAN_LDFLAGS. Otherwise libtool may ignore the options when linking.
ae0e25cf2	030746ce5	Mon Jun 21 10:09:32 2021 -0600	Move definition of INADDR_NONE from interfaces.c to net_ifs.c. Fixes compilation on Solaris 9.
030746ce5	442778aee	Sat Jun 19 12:56:31 2021 -0600	Fix dead store found by clang analyzer.
442778aee	f3deb3737	Sat Jun 19 12:56:04 2021 -0600	Fix prefix skipping when the prefix is embedded and not separate. This doesn\'t currently matter since the progname and the ": " are stored in separate messages.  Found by clang analyzer.
5a3bbba12	cc3b4ffb0	Tue Jun 15 13:58:12 2021 -0600	Use sudo_warnx?() instead of sudo_debug_printf for errors. We now hook the warn functions so the messages are logged. The messages still show up in the debug log too.
d311c7b2e	2c1988410	Sun Jun 13 18:42:09 2021 -0600	If logsrvd_config not set fall back to using stderr for warnings. Also fix fuzz_logsrvd_conf link error.
f7f161782	7b33974f2	Wed Jun 9 10:43:04 2021 -0600	Disable nss_search()-based group lookups on HP-UX for now. There is a crash when "group: compat" is used in /etc/nsswitch.conf that I haven\'t been able to debug.  Since HP-UX doesn\'t ship the appropriate headers it is likely that there is a mismatch between include/compat/nss_dbdefs.h and what HP actually uses.
7b33974f2	c5247845a	Tue Jun 8 19:51:54 2021 -0600	Remove logsrvd closure ERROR state and use a boolean flag instead. Fixes a bug where we would not insert a journal file that failed to relay into the queue because its state was changed from CONNECTING to ERROR after failing to connect.
b913a832e	dfaa9b95f	Mon Jun 7 15:53:57 2021 -0600	Make sure we link with libsudo_util *after* libfuzzstub. This only affects builds with a static libsudo_util. Also fix a warning on HP-UX about main not being public.
4b73c98c0	f44adcdf3	Fri Jun 4 11:28:48 2021 -0600	Add some debugging to sudo_getgrouplist2().
f44adcdf3	97f6fc259	Wed Jun 2 11:38:26 2021 -0600	Fixed bad condition for sesh args
97f6fc259	82f5592d6	Wed Jun 2 07:22:11 2021 -0600	Fix some debug_decl typos and remove an unneeded cast.
cc647c32e	958066edd	Wed May 26 07:31:19 2021 -0600	Fix group list ref leak in sudoers_policy_store_result() on error path.
2e492267e	31e613811	Thu May 13 12:45:56 2021 -0600	Build sudo_noexec.so as a module on systems other then Darwin. On Darwin, shared modules and shared libraries are not interchangable and since we preload sudo_noexec.so via DYLD_INSERT_LIBRARIES it must be a library, not a module.  We must relax the requirement that libraries begin with a "lib" prefix to work around this difference.  This does mean you must use sudo\'s libtool on Darwin (macOS) but that is already a requirement on other systems (notably HP-UX and SCO) due to a number of libtool patches we require that haven\'t be accepted upstream.  This is a different fix for PR #102.
d9b831112	96fb72e7c	Wed May 12 07:53:19 2021 -0600	Fix compiler warning on FreeBSD.
96fb72e7c	ec0dcab3c	Wed May 12 07:27:09 2021 -0600	Explicitly include netinet/in.h for struct sockaddr_in and sockaddr+_in6. Fixes a compilation problem on FreeBSD.
3147bbeb2	6cdf49d33	Mon May 10 13:42:06 2021 -0600	Don\'t set the command status in the closure when the command is suspended. This should only be set for signals that terminate the process. Fixes a bug where the sudo front-end could call the plugin close function with a non-terminal signal argument.
7033f1c1d	2efa90352	Fri May 7 13:42:40 2021 -0600	The -g option may also be used with any group the target user belongs to. The description in the Runas_Spec section incorrectly stated that the -g option could not be used if no runas group was set.  Bug #975.
c3534712d	b5542f8b2	Mon May 3 16:54:25 2021 -0600	Fix I/O log restart of locally-store logs. This got broken a while ago when evlog in struct connection_closure was changed to a pointer.
b5542f8b2	51cbc626f	Mon May 3 13:51:21 2021 -0600	Fix detection of the volatile flag when other flags are present. Otherwise flags fields like "volatile,ignore-other" will be ignored by the Debian and BSD back ends.
51cbc626f	109a0331a	Mon May 3 12:40:23 2021 -0600	Fix debug message when prctl(PR_SET_DUMPABLE, 0, 0, 0, 0) fails. GitHub issue #101
d204d4120	fda17ecfd	Sun May 2 10:03:26 2021 -0600	Mention "log_server_verify" bug fix.
af0345e23	01bdfd3be	Fri Apr 30 11:03:23 2021 -0600	Fix cut & pasto that prevented the verify_server option from being set. The "log_server_verify" setting passed from the policy plugin was applied to the "keepalive" option instead of "verify_server". From Krisztian Kovacs.
01bdfd3be	cefa72c6a	Thu Apr 29 16:20:02 2021 -0600	Write client and server information to debug file on SIGUSR1 This can be used to debug client problems such as a connection not being closed as expected.
6d8942e82	e55991f24	Tue Apr 27 12:25:19 2021 -0600	Better client error reporting on relay server connection error. More detailed error messages may be found in the debug log.
e55991f24	f25275ad5	Tue Apr 27 08:57:11 2021 -0600	Update debug pid string when sudo_logsrvd becomes a daemon.
d6d2e3488	a85c6b41a	Sat Apr 24 13:23:25 2021 -0600	Fix typo.
727056e0c	b0a32fe73	Fri Apr 23 07:41:27 2021 -0600	Make sure SIGCHLD is not ignored when sudo is executed. If SIGCHLD is ignored there is a race condition between when the process is executed and when the SIGCHLD handler is installed. This fixes the bug described by GitHub PR #98
7c2224584	5ffa915c9	Fri Apr 16 15:24:12 2021 -0600	Regenerate test output with python 3.10a7 Also adjust debug tests so they pass on older python versions
620b0dec8	a1323ba43	Thu Apr 15 10:31:28 2021 -0600	Only replace the last instance of "sudo" in example and doc dir. Otherwise we end up with weird paths for a prefix like /opt/sudo.
a1323ba43	556b8f62c	Tue Apr 13 14:29:59 2021 -0600	Fix lint warning.
4e9baba2b	e4e0e734b	Fri Apr 9 14:02:50 2021 -0600	Set logsrvd_config to NULL in logsrvd_conf_cleanup() after freeing it. Fixes a double free in fuzz_logsrvd_conf (but not sudo_logsrvd itself). Also fix linking fuzz_logsrvd_conf with OpenSSL.
3f1a76cb8	3aec794b7	Tue Apr 6 16:53:35 2021 -0600	Move connect_relay_tls() so we don\'t need a prototype for it. Fixes a warning when sudo is not configured to use OpenSSL.
f1f8515bd	d4517e0a1	Tue Apr 6 14:28:06 2021 -0600	Increase autoconf minimum version to 2.70. Some of the macros deprecated in 2.70 are required by older versions. For example, AC_PROG_CC now does the work of AC_PROG_CC_STDC. Bug #972
28d65159e	8fa897d3a	Mon Apr 5 20:13:50 2021 -0600	Document SUCCESS=return support in sudoers nsswitch.conf entries. Based on a patch from Dennis Filder.  Bug #971.
8fa897d3a	5a7984120	Thu Apr 1 15:10:32 2021 -0600	Move log_server_accept() out from under the #ifdef SUDOERS_LOG_CLIENT Fixes a link error when sudo is configured with --disable-log-client.
5a7984120	4f9d2374c	Wed Mar 31 07:57:09 2021 -0600	Return NULL if init_tls_client_context() fails. Otherwise, we will call SSL_new with a freed SSL context. Bug #970
4f9d2374c	a40e4b386	Tue Mar 30 12:49:20 2021 -0600	Do not include parent directories in rpm and deb files. Fixes a directory conflict with the AIX sudo rpm package. Other deb/rpm packages were not affected because parent dirs are omitted for a prefix of /usr.
bac057913	95bfd65fe	Thu Mar 18 13:20:45 2021 -0600	Fix fuzz_sudoers output comparison when fuzzing is enabled. libFuzzer outputs additional info to stderr that our stub doesn\'t.
95bfd65fe	d03805c41	Thu Mar 18 13:08:30 2021 -0600	Flush stdout before successful return from LLVMFuzzerTestOneInput(). Fixes a problem with diag lines from libFuzzer being interspersed with test output.
3e5cf7baa	4c182c90f	Thu Mar 18 11:39:54 2021 -0600	Do not redefine system group and passwd functions for testsudoers. Instead, prefix the replacements with "testsudoers_" and use a custom pwutil backend so they get used.
f57ab1a63	bc32789af	Sat Mar 13 08:44:46 2021 -0700	fix typo
bc32789af	843c4b632	Wed Mar 10 19:20:24 2021 -0700	Bug #968
d7d80e703	d9d450292	Wed Mar 10 12:27:14 2021 -0700	Use HAVE_STDINT_H instead of trying to guess based on __STDC_VERSION__. Fixes compilation with pre-C99 headers when the compiler supports C99.
d9d450292	3f11e8d9a	Wed Mar 10 12:26:11 2021 -0700	Remove compatibility defines for POSIX sys/stat.h macros. Modern systems have them and we no longer support pre-POSIX systems. This fixes potential redefinition of the macros if sys/stat.h is included after sudo_compat.h.  Bug #968.
0e2ba920e	07af7caf7	Mon Mar 8 14:05:39 2021 -0700	Compare OS name against freebsd* and netbsd* not freebsd and netbsd. Fixes an issue on NetBSD where host_os starts with netbsdelf.
2759920b8	06beb6f06	Wed Mar 3 15:49:18 2021 -0700	Document double escaping of backslashes.  Bug #961.
08b0b626f	f0761a981	Wed Mar 3 08:19:44 2021 -0700	Fix a potential use-after-free in conversation function. The prompt passed in to sudo_pam_verify() will be freed later by check_user_interactive() so we need to reset the stashed value. From Pavel Heimlich.  Bug #967.
5ffa0ce05	9bbf120bd	Tue Mar 2 14:09:31 2021 -0700	Make "group_source=dynamic" the default on macOS. Recent versions of macOS do not reliably return all of a user\'s non-local groups via getgroups(2), even when _DARWIN_UNLIMITED_GETGROUPS is defined.  Bug #946.
4a28b5d58	79dbf9f17	Mon Mar 1 07:22:57 2021 -0700	In find_path() stub only make a copy in outfile if returning FOUND. Fixed a recently-introduced memory leak in the fuzzer.
79dbf9f17	0c944576e	Sun Feb 28 19:52:03 2021 -0700	Disable debug code for FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION It will not be used and just confuses the coverage stats.
f86c11c4a	851247e58	Sun Feb 28 08:55:18 2021 -0700	Add MODE_CHECK to LIST_VALID_FLAGS, fixes "sudo -l command".
d1cc1c59e	963ea4151	Fri Feb 26 16:43:48 2021 -0700	Correct the integer overflow check in store_timespec(). Fixes oss-fuzz issue #31463
8b545e561	65b598602	Thu Feb 25 20:06:35 2021 -0700	Fix runchroot, runcwd, tty_tickets.  Add timestampowner.
e6dc13229	7bafd52fa	Thu Feb 25 13:35:29 2021 -0700	Add sudoers debug register/deregister.
322e0b369	5fc6b8c17	Mon Feb 22 19:53:08 2021 -0700	Return NOT_FOUND from the set_cmnd_path() stub since we don\'t set user_cmnd. The purpose of set_cmnd_path() is to reset user_cmnd based on a new runchroot.  For the stub version we don\'t modify user_cmnd and so must not return a status of FOUND. Fixes oss-fuzz issue #31250 which only affected the fuzzer and not sudo.
5fc6b8c17	4adc11e33	Mon Feb 22 16:43:34 2021 -0700	Fix fuzz_sudoers output matching.
db70a70d0	e5c1778e7	Thu Feb 18 10:42:04 2021 -0700	Test the case where getdelim() must reallocate the buffer. Reproduces Bug #960.
aaf3d5643	ac45fba89	Thu Feb 18 05:41:20 2021 -0700	Fix compilation error on Solaris introduced with sudo_user_free().
ac45fba89	9937d0803	Wed Feb 17 18:59:19 2021 -0700	Bug #960.
9937d0803	75004b705	Wed Feb 17 18:57:21 2021 -0700	Distinguish between EOF and error using feof(3), not ferror(3). Our getdelim(3) emulation won\'t set the error flag if the error is due to an allocation failure.  This explains the premature EOF without error seen in Bug #960.
75004b705	abdef93f7	Wed Feb 17 16:46:02 2021 -0700	Reset end pointer when reallocing the line buffer in getdelim(). Fixes excessive memory allocations for long lines.  Bug #960.
5ec59cddc	a18b2a9dd	Tue Feb 16 13:19:58 2021 -0700	Fix tilde expansion of paths with no user like ~/foo. The \'/\' separator was missing in the resulting path.
d81d7e0cf	de2a47f27	Mon Feb 15 13:46:11 2021 -0700	Fix unlinking of timing temp file.
7f3c670a1	5ade1c253	Sun Feb 14 14:01:31 2021 -0700	Fix sudoers garbage collection and run it in policy fuzzer.
41eae9120	e89a8133a	Sat Feb 13 11:54:21 2021 -0700	If sudo_getgrouplist2() returns -1, clamp ngroups based on max_groups. The ngroups parameter is an out parameter that is filled in with the actual number of groups, which may be less than the static number allocated when max_groups is set in sudo.conf. Fixes a potential out of bounds read found by LLVM libFuzzer.
520db741b	df2931588	Fri Feb 12 19:27:47 2021 -0700	Fix sudo_getgrgid reference count bug when gid doesn\'t exist. This one was missed when the other user/group lookup functions were fixed.
53e3dca7a	0663ffbc3	Wed Feb 10 16:47:38 2021 -0700	Fix up some .la file library dependencies. libsudo_iolog.la already depends on libsudo_util.la and libsudo_eventlog.la so we don\'t need to list those explicitly when libsudo_iolog.la is listed.
cf1801146	1412695a4	Tue Feb 9 09:06:17 2021 -0700	Some getdelim(3) implementations write a NUL to the buffer on EOF. AIX and Illumos appear to have this behavior.  We now preserve the first character of the buffer on EOF to work around this. Fixes reporting of syntax errors on the last line of a file.
722759d0b	aae168c48	Mon Feb 8 15:57:19 2021 -0700	Fix CID 217123, size check always false on 64-bit systems.
a3dae6f2c	6216fb3cc	Sat Feb 6 16:25:50 2021 -0700	Fix linking of sudoers fuzzers with static libsudo_util.
fecb68617	1c02c14c3	Sat Feb 6 12:23:31 2021 -0700	Fix comment typo in src/copy_file.c
d51c49789	2b2e5d0c4	Fri Feb 5 16:03:55 2021 -0700	Fix the typo in the mdoc
2b2e5d0c4	5c2a21350	Fri Feb 5 16:03:55 2021 -0700	Fix a tiny typo in the Sudo manpage
e675f4c07	f5fc5d641	Wed Feb 3 15:20:54 2021 -0700	Don\'t allow the sudoers fuzzer to open include files. If we allow the fuzzer to choose include paths it will include random files in the file system.  This leads to bug reports that cannot be reproduced.
10e37223b	b4cabdb39	Wed Feb 3 15:13:03 2021 -0700	Reallocate the buffer correctly when appending a newline. Fixes a potential buffer overflow introduced in the last commit.
884b2fb86	077c9b0c7	Wed Feb 3 13:49:21 2021 -0700	Fix NUL termination when parsing a sudoers file with no ending newline. oss-fuzz issue #30252
077c9b0c7	63a63680b	Wed Feb 3 13:00:09 2021 -0700	sudoersrestart() does not reset state to INITIAL, do it in init_lexer(). Fixes spurious errors from fuzz_sudoers, which calls the parser multiple times.
e66b132d7	bde441186	Wed Feb 3 08:56:32 2021 -0700	Parser needs user_shost for the %h escape in @include expansion. Fixes oss-fuzz issue #30238
bd4e8bc69	d2901f412	Wed Feb 3 07:52:38 2021 -0700	Remove options from the leak list before freeing them. Should fix oss-fuzz issue #30236
29f5f3c53	aaa2e8dde	Wed Feb 3 07:35:33 2021 -0700	Fix uninstall target; there were missing line continuation chars. GitHub issue #87
71997da16	eec4f4236	Tue Feb 2 10:27:27 2021 -0700	Fix potential leak of evlog->runuser. Also warn if we find an unexpected JSON type.
4cd6350ca	de82d08e7	Sat Jan 30 16:16:23 2021 -0700	Fix crashes trying to parse invalid JSON. Found locally using libfuzzer/oss-fuzz.
5dc297d30	439660c7f	Sat Jan 30 14:04:05 2021 -0700	Fix crash when file does not exist.
439660c7f	9f81e8a10	Sat Jan 30 09:29:31 2021 -0700	Strict tz offset parsing. Fixes an out of bounds read found locally using libfuzzer/oss-fuzz.
75f76eba8	bd10bb5cf	Sat Jan 30 06:15:21 2021 -0700	Fix memory leak if the last line is folded. Fixes issue 30080 by ClusterFuzz-External
995601c62	419c89524	Sat Jan 30 05:39:23 2021 -0700	Stricter parsing of generalized time. Fixes potential out of bounds read found by libfuzzer/oss-fuzz.
e5ad88488	da5c6c6c4	Fri Jan 29 05:42:34 2021 -0700	Fix NO_ROOT_MAILER, broken by the eventlog refactor in sudo 1.9.4. init_eventlog_config() is called immediately after initializing the Defaults settings, which is before struct sudo_user is setup.  This adds a call to eventlog_set_mailuid() if NO_ROOT_MAILER is defined after the invoking user is determined.  Reported by Roman Fiedler.
da5c6c6c4	8f114c2aa	Tue Dec 8 12:35:21 2020 -0700	Regenerate configure script with autoconf 2.71. Also fix some warnings from the new version.
8ca47cc99	dceab7d75	Thu Jan 28 09:15:36 2021 -0700	Fix compilation on systems without a native strlcpy() function.
dceab7d75	c9eff9385	Thu Jan 28 08:53:25 2021 -0700	Break up the long help string into multiple printf() statements. AIX xlc compiler doesn\'t like cpp directives in between strings. Also fixes a complaint from cppcheck and makes translation easier.
0754533d2	1f8638577	Sat Jan 23 08:44:00 2021 -0700	Fix the memset offset when converting a v1 timestamp to TS_LOCKEXCL. We want to zero the struct starting at flags, not type (which was just set). Found by Qualys.
1f8638577	c4d384082	Sat Jan 23 08:43:59 2021 -0700	Fix potential buffer overflow when unescaping backslashes in user_args. Also, do not try to unescaping backslashes unless in run mode *and* we are running the command via a shell. Found by Qualys, this fixes CVE-2021-3156.
b301b46b7	3b7977a42	Sat Jan 23 08:43:59 2021 -0700	Reset valid_flags to MODE_NONINTERACTIVE for sudoedit. This is consistent with how the -e option is handled. Also reject -H and -P flags for sudoedit as was done in sudo 1.7. Found by Qualys, this is part of the fix for CVE-2021-3156.
c05fe9366	376ad5e6b	Fri Jan 22 07:00:18 2021 -0700	lib/eventlog/Makefile.in: fix static build without closefrom
eb536d8b7	d98dd5f98	Wed Jan 20 11:25:23 2021 -0700	Fix problem when SSL_read() returns SSL_ERROR_WANT_WRITE.  This can happen when the socket cannot be written to immediately. We need to set the read_instead_of_write flag in that case, _not_ write_instead_of_read.  Also sync comments with sendlog.c. Bug #954
d98dd5f98	e60ff9058	Fri Jan 15 15:25:44 2021 -0700	Fix setprogname() emulation on systems without it. For fully-qualified paths, store the string starting after the last slash, not at the slash itself.
3a13f1bf0	ea150d591	Mon Jan 11 18:41:19 2021 -0700	Run the editor with the user\'s real and effective uid and gid. Fixes a bug introduced in sudo 1.9.5 where the editor was run setuid root unless SELinux RBAC was in use.
ea150d591	01d0bbfb8	Mon Jan 11 08:16:53 2021 -0700	fix typo
db1f27c03	71339c574	Wed Jan 6 10:16:00 2021 -0700	Fix potential directory existing info leak in sudoedit. When creating a new file, sudoedit checks to make sure the parent directory exists so it can provide the user with a sensible error message.  However, this could be used to test for the existence of directories not normally accessible to the user by pointing to them with a symbolic link when the parent directory is controlled by the user.  Problem reported by Matthias Gerstner of SUSE.
b132def0b	a29cac8bd	Wed Jan 6 10:16:00 2021 -0700	For sudo, only allow "sudo" or "sudoedit" as the program name. The program name is also used when matching Debug lines in sudo.conf. We don\'t want the user to be able to influence sudo.conf Debug matching. The string "sudoedit" is treated the same as "sudo" in sudo.conf. Problem reported by Matthias Gerstner of SUSE.
a29cac8bd	295f099cf	Mon Dec 21 10:44:22 2020 -0700	Fix the buffer size parameter when serializing the interface list. Problem reported by Matthias Gerstner of SUSE.
741cf082a	4ea6f7306	Mon Jan 4 14:48:43 2021 -0700	Use debug_return_int() not debug_return_bool() to return -1. Found by PVS Studio.
4ea6f7306	7f34b8bbb	Mon Jan 4 14:48:42 2021 -0700	Fix a crash introduced in 1.9.4 when running "sudo -i" as an unknown user.
861783338	8ea19e294	Sat Jan 2 10:43:34 2021 -0700	Minor fixes pointed out by cppcheck. Also add compareBoolExpressionWithInt to suppression list.
9547755c3	4151d8fc8	Wed Dec 30 07:09:35 2020 -0700	Fix deregistration of a callback that is not at the head of the list. The SLIST_FOREACH_PREVPTR macro doesn\'t work the way I thought it did. Just store our own prev pointer and use that instead.
b3173fded	4c00a4e5b	Sun Dec 20 08:43:34 2020 -0700	The runas user must be set before applying runas-based Defaults. This effectively backs out changeset f738f5ac5350, which made it possible to log the command when an invalid user was specified. The policy plugin API doesn\'t supply the command until the check function, at which point we\'ve already denied the command due to the invalid user.  Bug #951.
4551b19f6	f41b2c1f5	Wed Dec 16 18:22:40 2020 -0700	The lower bounds for the "closefrom" option is 3, not 4. This is a regression introduced in sudo 1.8.9 with the strtonum() conversion.  Bug #950.
0e3e13d87	1cdc4716c	Mon Dec 7 13:15:25 2020 -0700	Define _DARWIN_UNLIMITED_GETGROUPS on macOS to suport > 16 groups. On macOS 10.6 and above, getgroups(2) can return more than NGROUPS_MAX if _DARWIN_UNLIMITED_GETGROUPS or _DARWIN_C_SOURCE is defined. Bug #946
1cdc4716c	63739dd32	Sat Dec 5 09:08:43 2020 -0700	Comment out the default plugin lines in the example sudo.conf. Fixes a problem when there are multiple versions of sudo installed and not all suport the audit plugin, such as on macOS. GitHub issue #75
a7d670ee3	c5a7f0eb4	Fri Dec 4 06:45:48 2020 -0700	Fix a crash introduced in 1.9.4 when running command as an unknown user. Bug #948
d98374753	e22817e3a	Wed Dec 2 13:12:09 2020 -0700	Change alias_add() to return bool and set errno on failure. This fixes a localization problem where the error message could have been reported in the wrong locale.
e22817e3a	833e273ad	Mon Nov 30 13:18:12 2020 -0700	Fix build when configured using --without-sendmail Bug #947
94c5052eb	bdf553001	Tue Nov 24 07:40:38 2020 -0700	Fix typo detected by codespell 2.0.0 Also avoid some new false positives
bdf553001	7bbd7c8e0	Mon Nov 23 10:47:47 2020 -0700	Set pp_ignore_define_body=false in uncrustify config. Need to work around a bug that produces closed brace errors, see https://github.com/uncrustify/uncrustify/issues/2569
4a6ca4ba2	7d0b19d2a	Wed Nov 18 09:36:05 2020 -0700	Fix calling sudo_conf_read() multiple times with different conf_types. The change to reinitialize the configuration data when sudo_conf_read() is called again didn\'t take into account that sudo calls sudo_conf_read() twice--once for the debug info and once for everything else.
27615b558	e4a2765cc	Tue Nov 17 13:04:57 2020 -0700	For the audit plugin, command_info may be NULL. Fixes a NULL dereference in sudoers_audit when an I/O logging plugin rejects input/output or returns an error.
b2ccbb3a9	6439b4cc0	Wed Nov 11 09:34:50 2020 -0700	Stay setuid until just before executing the command. Fixes a problem with pam_xauth which checks effective and real uids to get the real identity of the user.
6439b4cc0	55c4f3bdd	Wed Nov 11 09:34:50 2020 -0700	Ignore sudoNotBefore and sudoNotAfter unless ldap.conf contains SUDOERS_TIMED This is consistent with the pre-1.8.24 behavior.  Bug #945
55c4f3bdd	deb217adf	Tue Nov 10 19:36:56 2020 -0700	Introduce new_member_all() for code that doesn\'t include gram.h. The ldap and sssd back-ends no longer require gram.h which fixes a compilation issue with IBM LDAP.
deb217adf	72df19088	Tue Nov 10 19:36:55 2020 -0700	On SIGHUP, deregister the old debug instance before registering a new one. Otherwise, if debugging is enabled we will get an extra log instance each time sudo_logsrvd reeives SIGHUP which results in duplicate lines in the debug log.
282a7e80f	de58c11db	Fri Nov 6 08:51:38 2020 -0700	Fix cut & pasto in debug subsystem.
de58c11db	6286ce1d1	Mon Nov 2 09:30:45 2020 -0700	Set server_name before initiating TLS connection so verify function works. Fixes a crash in the SSL_VERIFY_PEER callback.  Also call inet_ntop(3) with addr pointer, not sockaddr pointer so we get the correct IP address.
982012dbb	6f7e5b104	Sun Nov 1 15:34:11 2020 -0700	Display column number in parse error messages too. Bug #841
10b09e4d8	e0c2635fb	Sun Nov 1 15:01:16 2020 -0700	Fix -Wshadow warnings caused by json enum member.
807857a2c	607076d8a	Fri Oct 9 14:16:06 2020 -0600	Init cmnds to NULL in rule_to_priv() so we don\'t free a bogus pointer. In the sssd backend, the rule_to_priv() cleanup code assumes cmnds can be passed to fn_free_values(), which was not the case if we receive an error getting values for "sudoCommand".  This is a regression introduced in sudo 1.9.1.  Fix from Ron Bowes. GitHub issue #67.
645eda55a	ea57249e2	Sun Oct 4 06:05:05 2020 -0600	GitHub issue #61 was fixed in sudo 1.9.3.
ea57249e2	772619b7e	Tue Sep 29 21:16:34 2020 -0600	Fix indentation of enum def_tuple.
9bb91cb64	0276a565e	Sun Sep 27 10:05:35 2020 -0600	Fix handling of a command spec without a newline at the end. For include files, we may need to inject a newline token now that the grammar requires lines to end with a newline or EOF.  There is no END (EOF) token processed after popping off an include file since everything is just treated as one big file.
ddc138383	7d2090061	Sun Sep 27 06:47:19 2020 -0600	Fix line number accounting when a string contains a newline. Strings are not allowed to span multiple lines without a continuation character.  Also provide a better error message if we are in the middle of a string and hit EOF.
88dcdcd11	7eda22c72	Fri Sep 25 15:09:45 2020 -0600	Fix -Wshadow warnings.
e826705b6	b1a59accf	Fri Sep 25 15:07:25 2020 -0600	Fix pasto, TIMEOUT not CMND_TIMEOUT.
b1a59accf	70ada21c5	Fri Sep 25 13:50:32 2020 -0600	Document reserved words that cannot be used as alias names. Bug #941
70ada21c5	b2593b22b	Fri Sep 25 12:24:45 2020 -0600	Detect when a reserved word is used when declaring an alias. Now instead of "syntax error, unexpected CHROOT, expecting ALIAS" the message is "syntax error, reserved word used as an alias name" Bug #941
6f8e1b974	09835b719	Wed Sep 23 08:59:18 2020 -0600	Fix potential NULL deref in debug code.
75d53ee54	d4428133b	Wed Sep 23 08:28:44 2020 -0600	Fix configure test for crypt(3) when it is present in libc. Fixes a regression introduced in sudo 1.9.3.
874c2b27c	44a1058aa	Fri Sep 18 08:18:07 2020 -0600	Use a simple string compare on systems without crypt(3). This is only used on systems without PAM, BSD authentication or AIX authentication.  Bug #940.
44a1058aa	90bcae798	Fri Sep 18 06:09:57 2020 -0600	Fix typo in last commit.
90bcae798	4f1fff953	Thu Sep 17 20:17:38 2020 -0600	Only use faccessat(3) if AT_EACCESS is defined. Apparently Android (bionic) has faccessat() but not AT_EACCESS. Bug #940.
4f1fff953	a00130328	Thu Sep 17 20:05:30 2020 -0600	Guard use of ttyslot() with HAVE_TTYSLOT, fix guard for utmp_setid(). This should make it easier to compile sudo on Android which doesn\'t provide a way to write to the utmp file.  Bug #940.
def99ffd7	86df234e1	Mon Sep 14 06:54:15 2020 -0600	Fix typo in warning for T_CHPATH, list \'~\' not \'*\' twice. Bug #938
92e5d8194	3d9154cd4	Sun Sep 6 15:32:50 2020 -0600	configure: Fix runstatedir handling for distros that do not support it
d6ed38e7e	72b28bbc3	Sat Sep 5 20:14:09 2020 -0600	Fix sco library versioning; fallout from frebsd-elf reorg. From Tim Rice
72b28bbc3	0f8802676	Sat Sep 5 19:29:06 2020 -0600	SVR4/5 fixes and long password support for OpenServer 6 & 5. From Tim Rice
d56347b98	a7033f33a	Sat Sep 5 08:21:43 2020 -0600	Define sudo_warn_setlocale_t and use sudo_conv_t in sudo_fatal.h. Works around a bug in older versions of the HP ANSI C compiler and results in more readable code.
88c7a35dd	cc8e6c601	Fri Sep 4 21:43:30 2020 -0600	Fix check for hiding unexported symbols on HP-UX. We need to pass the -b option to the compiler, not just the linker, so it will choose the PIC C runtime.
a0092ce31	e561f5b85	Fri Sep 4 19:02:26 2020 -0600	Fix regress when ttyname(3) returns the same device under a different name. On systems that have both new and old pty names we can end up with a name mismatch even though the underlying device is the same.
24b35393e	8a8a24560	Fri Sep 4 10:59:41 2020 -0600	Add sudoers_audit to sudo_sudoers_plugin_symbols[] array. Fixes loading of sudoers_audit when configured with --enable-static-sudoers. GitHub issue #61
8a8a24560	24d5ee589	Thu Sep 3 13:23:27 2020 -0600	Fix copy and paste error; Coverity CID 214191
24d5ee589	010634303	Thu Sep 3 13:07:38 2020 -0600	Fix memory leak on error found by the clang 10.01 analyzer.
21a2dce50	fd06e588e	Thu Sep 3 06:03:28 2020 -0600	Remove obsolete mansrcdir variable, add _SRC suffix to LOGSRV and LOGSRVD
578789c56	fc563286f	Wed Sep 2 11:01:09 2020 -0600	Fix error recovery in a privilege after a \':\' separator.
2adde428c	965ad7448	Wed Sep 2 09:20:19 2020 -0600	Fix path to check_exptilde.c
a3364c1e9	609910cc2	Mon Aug 17 13:45:16 2020 -0600	Fix sudoers_policy plugin options when sudoers_audit is not listed. As of sudo 1.9.1 the sudoers file is opened by the audit plugin, not the policy plugin.  As a result, plugin options set for sudoers_policy have no effect.  If sudoers_policy has plugin options in sudo.conf and sudoers_audit is not listed, move the options to sudoers_audit so they will have an effect.
d12f7ccf2	a940a2c78	Thu Aug 13 20:40:33 2020 -0600	Fix probe for macOS Big Sur "sw_vers -productName" now returns "macOS", not "Mac OS X"
a940a2c78	961a4afe6	Wed Aug 12 20:01:39 2020 -0600	Fix some warnings from pvs-studio
961a4afe6	fb8ed8ba6	Wed Aug 12 13:45:09 2020 -0600	Fix some warnings from pvs-studio
63dadad9d	5f5f28ac7	Fri Aug 7 14:22:28 2020 -0600	Refactor freeing of InfoMessage list into free_info_messages(). Also fixes a false positive from the clang analyzer.
c90539015	2a58b19f9	Wed Aug 5 12:58:02 2020 -0600	Fix libssl dependency on Debian-based systems. Older systems may still have libssl1.0.0, not libssl1.1.
3b4d4ab8d	974f833e1	Mon Aug 3 09:53:12 2020 -0600	Add missing python_plugin.exp.in file and remove unneeded __dso_public This fixes building the python plugin on systems where the compiler doesn\'t support symbol hiding (but wherethe linker does).
6ee98cf45	bcf96c153	Wed Jul 22 07:42:40 2020 -0600	Prompt user before truncating a file to zero bytes.  Bug #922.
054939c1e	bd24a322c	Tue Jul 21 08:47:03 2020 -0600	configure.ac: fix documentation about lecture
be89bdcf7	ac00a0701	Wed Jul 15 10:12:55 2020 -0600	Fix some warnings displayed by autoconf 2.69b This fixes the missing HAVE_GSSAPI_GSSAPI_H define in config.h.in. TODO: replace shadow_funcs variable in function checks with literals
ac00a0701	1e4ce8525	Sun Jul 12 10:13:53 2020 -0600	Initialize sudo_conv and sudo_printf in sudoers_audit_open(). We will need them if there is an error parsing sudoers and leaving them unset can result in NULL deref.  Also set the text domain to "sudoers" like we do for the policy and I/O logging open functions. Bug #934.
3175049e4	90dbdf8f3	Mon Jul 6 12:17:58 2020 -0600	Fix typo, runas_uid should be runas_gid.
e9a39c149	660738139	Mon Jul 6 09:03:15 2020 -0600	Add some debugging statements around Defaults lookup.
d04805eec	820d6ae20	Wed Jun 24 14:19:14 2020 -0600	Fix parsing of /etc/redhat-release on RHEL 8. RedHat dropped the word "server" from the release name in redhat-release which results in the awk script printing the wrong field.  Instead of using awk, just use sed to pull out the version number immediately following the word "release".
1cec928d1	5e9346d4e	Sat Jun 20 14:11:40 2020 -0600	Fix implicit fallthrough warning and add break to default cases.
23b1ee2f4	f2dce25ac	Sat Jun 20 13:51:02 2020 -0600	Fix some warnings from configure test programs.
e6d6e9ba0	65edf6344	Fri Jun 19 06:17:39 2020 -0600	Bugs #860 and #917 were fixed in 1.9.0.
65edf6344	d4739533f	Thu Jun 18 15:23:30 2020 -0600	regen to fix a typo
d4739533f	88393fc96	Thu Jun 18 15:14:00 2020 -0600	Add regress test to catch swapids() bug when called by iolog_mkdtemp()
bc6e36e94	8bb5aedac	Tue Jun 16 05:44:57 2020 -0600	Fix a typo that prevented swapids() from restoring the original gid. This led to a regression when the iolog_file setting ends in six or more X\'s or when the I/O logs are stored on NFS.
4a3aff156	bee995059	Mon Jun 15 08:06:43 2020 -0600	Bug #929
bee995059	ddd3b0ece	Sun Jun 14 16:40:21 2020 -0600	Clean up temporary sudoedit files on success; Bug #929 This is a regression introduced in sudo 1.9.0.
852d8c795	3e12b99ee	Sun Jun 7 08:37:32 2020 -0600	Fix a typo in the audit string when "sudo -E" is not allowed.
8da1f3195	3f4de6949	Sat Jun 6 14:08:34 2020 -0600	Fix memory leak on error in fmt_info_messages().
15d93a1ca	a5a721593	Thu Jun 4 14:41:28 2020 -0600	Fix Solaris and BSM audit warnings. Use BSM audit on Illumos, which lacks Solaris audit.
49e43f580	b40551dc3	Thu Jun 4 11:31:12 2020 -0600	Avoid passing NULL to printf in match debug code for LDAP/SSSD. The file name in struct userspec was not set for the LDAP and SSSD backends.  There is no actual file in this case so set the name to LDAP/SSSD.  Also add a guard to make sure we don\'t try to print NULL in sudoers_lookup_check() if name is left unset.
73c1b0430	253e041d3	Wed Jun 3 20:12:04 2020 -0600	When converting LDAP to sudoers, ignore entries with no sudoHost attribute. Otherwise, sudo_ldap_role_to_priv() will treat a NULL host list as as the "ALL" wildcard.  This regression was introduced in sudo 1.8.23, which was the first version to convert LDAP sudoRole objects to sudoers internal data structures. Thanks to Andreas Mueller for reporting and debugging this problem.
a38070921	592eb7ab4	Tue Jun 2 08:59:38 2020 -0600	If event loop fails due to ENXIO, remove /dev/tty events and recover. This fixes an issue on Solaris 11.4 (and probably others) with "sudo reboot" when I/O logging is enabled.  Previously, sudo would kill the command if it was still running after the event loop terminated, leaving the system in a half-dead state.
592eb7ab4	de31e6d53	Mon Jun 1 14:19:50 2020 -0600	Don\'t try to suspend sudo if the user\'s tty has gone away. Fixes a problem on Solaris 11.4 (and possibly others) where sudo continually tries to put itself in the background after the user\'s terminal has been revoked.
51dc8ad83	e1aa76de1	Mon Jun 1 12:52:00 2020 -0600	Add missing stdlib.h include and fix solaris_audit_failure() error return.
d9cbb7beb	026caf008	Fri May 22 15:35:30 2020 -0600	Mention Bug #927.
a41d7b545	5a69831dd	Tue May 19 10:09:34 2020 -0600	Fix a memory leak on error when including a file or directory.
b66cf649f	f4e9e4337	Mon May 18 04:45:04 2020 -0600	Fix typo in PERLIO_DEBUG (trailing whitespace). This has no effect unless env_reset is disabled. From Allan Wirth
f4e9e4337	3d73f05e3	Sat May 16 10:45:17 2020 -0600	Fix includes when building with musl
3d73f05e3	aaea46227	Sat May 16 10:44:27 2020 -0600	Fix typo in warning message.
aaea46227	26b599a5b	Fri May 15 19:25:30 2020 -0600	Prefer SIGSYS if SIGUNUSED is defined to the same value. Fixes a regress failure on musl libc where SIGSYS and SIGUNUSED share the same value.
26b599a5b	36bbf629b	Fri May 15 19:08:16 2020 -0600	Add missing sys/wait.h include; fixes a compilation problem on musl libc.
36bbf629b	ea1226be7	Fri May 15 18:56:40 2020 -0600	Add missing sys/types.h include; fixes a compilation problem on musl libc.
ea1226be7	4ea7ecffd	Fri May 15 18:50:04 2020 -0600	Only define WCONTINUED and WIFCONTINUED if neither are already defined. Fixes a warning on musl libc where WIFCONTINUED is defined in stdlib.h for some reason.
3ded5cbd6	f71b56941	Thu May 14 15:16:35 2020 -0600	Fix macOS bundle IDs for sudo-logsrvd and sudo-python packages
0337f5b73	27355e6aa	Wed May 13 07:40:47 2020 -0600	Fix handling of connections without associated I/O logs. This fixes reject events as well as accept events without the expect_iobufs flag set.
27355e6aa	d5888e274	Tue May 12 19:19:16 2020 -0600	Fix handling of accept and reject messages without an I/O log. Only set expect_iobufs in AcceptMessage if sending I/O logs. Set state to FINISHED immediately after sending a RejectMessage.
af0d84032	83d1bee91	Tue May 12 07:47:38 2020 -0600	fix pastos
04cb06160	4266279c0	Thu May 7 07:49:54 2020 -0600	Fix a few more typos.
4266279c0	24ad424a5	Wed May 6 19:33:24 2020 -0600	Don\'t allow duplicate values for command line options that take an argument. Previously, if multiple instances of the same command line option were specified, the last one would be used.  This meant that, for example, "sudo -u someuser -u otheruser id" would run the command as "otheruser". This has the potential to cause problems for programs that run sudo with a user-specified command that do not use the "--" option to indicate that no more options should be processed.  While this is a bug in the calling program, there is little downside to erroring out when multiple options of the same type are specified on the command line. Bug #924
24ad424a5	4dba87262	Wed May 6 16:40:48 2020 -0600	Debian bug #734752
4dba87262	ea99394fc	Wed May 6 16:38:08 2020 -0600	Look up runas user by name, not euid, where possible. Fixes a problem when there are multiple users with the same user-ID where the PAM session modules could be called with the wrong user name. Debian bug #734752
ea99394fc	e42afc773	Wed May 6 11:04:47 2020 -0600	Fix ironic typo in spelling fixes.  Bug #925
0cf2e09e0	5d3f635ae	Wed May 6 09:27:43 2020 -0600	Apply spelling fixes. Fixes from PR #30 (ka7) and Bug #925 (fossies.org codespell)
a3e94aefa	6901fc97a	Tue May 5 13:36:05 2020 -0600	Bug #922 and Bug #923
8186b9820	1659d96c5	Tue May 5 13:23:26 2020 -0600	Adapt sudoers iolog client to log server dual port changes. The TLS handshake now occurs before the ServerHello message is read. This fixes potential man-in-the-middle attacks and works better with TLS 1.3.
82bc05d99	3b078b7a9	Mon May 4 13:03:51 2020 -0600	Fix Debian ldap dependency broken in last commit.
3b078b7a9	42df431ce	Mon May 4 12:36:35 2020 -0600	Fix "make package" on Debian when linux_audit is not set.
aba4915b8	2b1e98657	Thu Apr 30 15:54:35 2020 -0600	On error, remove the connection with an error without freeing the closure. Fixes the final message at the end when there is a network error.
3b7768be7	2ab8f2a73	Tue Apr 28 10:52:09 2020 -0600	Don\'t free TLS on error in tls_init(), it is freed in client_closure_free(). Fixes a double free on error introduced with the TLS state cleanup in client_closure_free().
40f47f013	8c5befaae	Wed Apr 22 15:23:05 2020 -0600	Fix support for pp_systemd_disabled and check for systemd existence. On our build schroots we don\'t have systemctl installed but do have the /etc/systemd and /lib/systemd (or /usr/lib/systemd) directories.
8c5befaae	c70606c3c	Wed Apr 22 12:40:52 2020 -0600	Set pp_macos_service_id instead of pp_macos_default_service_id_prefix. It is only effective to set pp_macos_default_service_id_prefix in the indivisual %service sections (and not %set) so we may was well use pp_macos_service_id which includes the service name.
c70606c3c	d5b06ff7f	Wed Apr 22 10:45:03 2020 -0600	Set launchd service id prefix to "ws.sudo." The default value in PolyPkg is "com.quest.rc."
d5b06ff7f	557be2b0b	Wed Apr 22 08:58:07 2020 -0600	Fix macOS package creation.
76bf9a73b	009876bf3	Tue Apr 21 14:29:23 2020 -0600	Fix sudoedit when running with SELinux RBAC mode. We can\'t use run_command() to run sesh, that will use the sudo event loop (and might run it in a pty!). There\'s no need to relabel the tty when copying files. Get the path to sesh from sudo.conf.
af4eb80df	132b943a2	Fri Apr 17 15:37:41 2020 -0600	Fix typo
75b9a26a3	57cef10ce	Thu Apr 9 10:49:59 2020 -0600	If the signal.Signals enum is not present, search the dictionary. The Signals enum was added in Python 3.5.  If it is not present we need to iterate over the dictionary items, looking for signal name to number mappings.  Fixes the signal tests with Python 3.4.
324b23724	eebe68233	Wed Apr 8 15:46:30 2020 -0600	Fix handling of /etc/sudo_logsrvd.conf in the sudo-logsrvd package. For rpm and deb we include the file directly and mark it volatile. For all others we copy it in the postinstall script from the example dir if the file doesn\'t already exist.
ce92674cc	69b6783be	Wed Apr 8 10:19:55 2020 -0600	Reload sudo.conf upon SIGUP This makes it possible to update the Debug settings in sudo.conf and have them take effect on reload.
69b6783be	18ff60f6f	Wed Apr 8 09:26:41 2020 -0600	Store the result of ERR_get_error() so we can use it for both warn and debug. Otherwise, only the debug framework gets the actual error and the user won\'t see the problem.
6a2b5fd82	5b488f313	Tue Apr 7 14:03:58 2020 -0600	Handle dependencies for .h files in the same directory as the source. Fixes missing header dependencies for the sudoers and python plugins.
79d3bd822	66c8f69f8	Thu Apr 2 13:58:13 2020 -0600	Fixed Debian bugs #571621, #596631 and #669687
66c8f69f8	1d008b92f	Fri Apr 3 10:17:19 2020 -0600	Make it clear in the sudoers grammar that sudoedit needs file args. Debian bug #571621
1d008b92f	9b8cb1a57	Thu Apr 2 13:01:58 2020 -0600	Truncate the command args at 4096 chars when formatting SUDO_COMMAND. We have to limit the length of SUDO_COMMAND to avoid getting E2BIG from execve(2) for very long argument vectors. The command\'s environment also counts against the ARG_MAX limit. Debian bug #596631
ec3fdd3aa	5e95c24d8	Wed Apr 1 14:41:38 2020 -0600	Add a force flag to sudo_auth_cleanup() to force immediate cleanup. This is used for PAM authentication to make sure pam_end() is called via sudo_auth_cleanup() when the user authenticates successfully but sudoers denies the command.  Debian bug #669687
93aa9f9e9	9dea4bb24	Tue Mar 31 19:43:48 2020 -0600	Add cwd_optional to command details and enable it in the sudoers plugin. If cwd_optional is set to true, a failure to set the cwd will be a warning, not an error, and the command will still run. Debian bug #598519
b308b63b5	ec78f0689	Wed Mar 11 19:28:36 2020 -0600	Fix potential use-after-free; Coverity CID 208814
277b297ae	d31689211	Wed Mar 11 15:42:46 2020 -0600	Fix typo introduced on systems with O_PATH or O_EXEC
bf2bc931a	f590f81b3	Sun Mar 1 13:36:54 2020 -0700	Revert change to initialize io_operations earlier. Instead, check io_operations.open for NULL which is the case for "sudo -V".  Also move the early return in sudoers_io_open() for "sudo -V" until after we have initialized debugging.
38fc37b21	e588879cf	Wed Feb 26 13:15:52 2020 -0700	plugins/python/approval: fix show_version crash when it is not implemented
7e5641bc7	1b930b585	Sat Feb 22 16:09:59 2020 -0700	Fix unlocking of an entire file with lockf(). Since lockf() uses the files\'s current offset, we need to seek to the start of the file to unlock the entire file.
8a9218d16	a0c2de4ce	Wed Feb 19 11:48:16 2020 -0700	plugins/python/debug: adapt debug refcount solution of sudoers plugin
adb3bdf6d	982c003b8	Tue Feb 18 10:35:30 2020 -0700	Fix compilation error when not built with OpenSSL support. Adds a missing #ifdef HAVE_OPENSSL and reorders code to avoid the need for a static init_tls_server_context() prototype.
25542216f	2e836cc57	Mon Feb 17 15:01:38 2020 -0700	Fix support for reloading the config in sudo_logsrvd. We need to re-initialize the TLS server context. Also fix a memory leak of the TLS parameters on reload.
efa97b5b9	a71828b38	Fri Feb 14 09:25:37 2020 -0700	plugins/python/python_plugin_approval: fix negative ref count
d1f94c857	0e4c3c47d	Wed Feb 12 11:16:00 2020 -0700	plugins/python/regress: still some memleak fix
0e4c3c47d	9e2e79b6f	Tue Feb 11 15:15:36 2020 -0700	Move duplicated code to parse plugin debug flags to libsudo_util. There\'s no need for four copies of sudo_debug_parse_flags().
009788afa	01a53f286	Mon Feb 10 15:43:25 2020 -0700	Clarify that approval close happens after auditing. Also fix a few typos.
55b61b989	3911e4f7b	Mon Feb 10 14:37:43 2020 -0700	Use unique function names to avoid confusion with front-end functions. Also add a missing sudo_debug_enter() after debug registration.
0202dc67c	ecdaaffd5	Mon Feb 10 05:28:34 2020 -0700	Makefile.in: fix install target for out of source build
45d263857	0f3631cc0	Mon Feb 10 05:24:16 2020 -0700	plugins/python/example*.py: pep8 fixes (mainly line too long)
a7eb9d341	99f99e8a5	Mon Feb 10 05:24:16 2020 -0700	plugins/python_plugin_io,policy: fix version display in verbose mode
99f99e8a5	21c02e173	Mon Feb 10 05:24:16 2020 -0700	plugins/python/sudo_python_module.c: fix options_as_dict if no equal sign
67ab6fd5d	62524416e	Mon Feb 10 05:24:16 2020 -0700	plugins/python/python_plugin_policy: add missing debug return
a3a7630ff	ac61b5655	Mon Feb 10 05:24:16 2020 -0700	plugins/python: memleak fixes in test
630fc9b17	9d5f06618	Fri Feb 7 13:12:38 2020 -0700	Make restart and elapsed members of the closure structs not pointers. Fixes coverity CID 207992
084cad212	404b28c4d	Thu Feb 6 12:18:09 2020 -0700	plugin documentation fixes:  o whitespace cleanup  o show_version doesn\'t have an errstr argument  o document runas_user and runas_group in command_info[]  o add missing .El at before start of audit section
0ca2d1427	cec6b1708	Mon Feb 3 06:09:47 2020 -0700	fixed compiler error when sudo is configured without --enable-openssl
fa8ffeb17	0fcb64716	Wed Jan 29 20:15:21 2020 -0700	Fix a buffer overflow when pwfeedback is enabled and input is a not a tty. In getln() if the user enters ^U (erase line) and the write(2) fails, the remaining buffer size is reset but the current pointer is not. While here, fix an incorrect break for erase when write(2) fails. Also disable pwfeedback when input is not a tty as it cannot work. CVE-2019-18634 Credit: Joe Vennix from Apple Information Security.
604945f93	4e87e1a97	Tue Jan 28 13:00:54 2020 -0700	Fix warning about unresolved host name with "sudo -l -h hostname". The resolve_host() function returns 0 on success, not bool.
4e87e1a97	f268e851d	Tue Jan 28 13:00:33 2020 -0700	Fix typo in a test: python_policy->close not python_io->close
f268e851d	9d69c4a02	Tue Jan 28 07:20:44 2020 -0700	plugins/sudo_python_module: Fix double free in sudo.options_as_dict function
1fd82e149	22c64f58c	Mon Jan 27 16:14:57 2020 -0700	Fix compilation on IRIX; Bug #915 IRIX lacks MAP_ANON (and MAP_ANONYMOUS) but we can use the IRIX-specific flag MAP_SGI_ANYADDR instead.  From Kazuo Kuroi
5472b1751	9294108cd	Fri Jan 24 11:13:55 2020 -0700	Fix crash in sudo 1.8.30 when suspending sudo at the password prompt. The closure pointer in sudo_conv_callback was being filled in with a struct getpass_closure ** instead of a struct getpass_closure *. The bug was introduced in the fix for Bug #910; previously the closure variable was a struct getpass_closure, not a pointer. Fix from Michael Norton; Bug #914.
3128cc97c	304a7fdc1	Thu Jan 23 12:46:14 2020 -0700	plugins/python: fix return value typo for the error case
edd7356f2	f4716a75e	Thu Jan 23 12:46:14 2020 -0700	plugins/python/Makefile.in: remove path prefix from examples to make install target work
1ba896821	c3bd02505	Mon Jan 20 14:47:38 2020 -0700	Fix a few pointer signedness warnings on Linux.
2d91555e8	36fbdc48f	Mon Jan 20 12:42:39 2020 -0700	Fix handling of SSL_ERROR_WANT_{READ,WRITE} during normal I/O. If we get SSL_ERROR_WANT_WRITE during SSL_read(), we need to resume the SSL_read(), not call SSL_write() as we were doing.  Likewise for SSL_ERROR_WANT_READ received from SSL_write(). This introduces a flag so we call the proper callback even when the I/O direction doesn\'t match the read/write calls.
36fbdc48f	5913c6364	Mon Jan 20 10:45:20 2020 -0700	Add siglist.c and signame.c as dependencies for depend target. Fixes running "make depend" in lib/util dir when siglist.c or signame.c are not already present.
185471f26	35c85596d	Mon Jan 20 06:30:20 2020 -0700	plugins/python/python_plugin_policy: fix validate() call
2ee1dd3ec	87d76f4bb	Mon Jan 20 06:30:20 2020 -0700	plugins/python: fix confusing version display
591d57ad2	5be81eb25	Mon Jan 20 06:30:20 2020 -0700	plugins/python/example_io_plugin.py: fix backtrace during destructor
5be81eb25	8eab16909	Mon Jan 20 06:30:20 2020 -0700	plugins/python/python_plugin_common: raise debug level for module import
8eab16909	1093e7bc4	Mon Jan 20 06:30:20 2020 -0700	plugins/python/example_debugging: fix typo in comment
47d950471	5a86073bd	Sat Jan 18 12:57:24 2020 -0700	Add debugging statements to certificate checks.
5a86073bd	d2b7148b6	Sat Jan 18 11:32:45 2020 -0700	Portability fixes and correct path to hostcheck.h in MANIFEST. Include sys/socket.h for getpeername(). Link with -lnsl on Solaris to get inet_pton().
0ab02b8a1	c9f26ebbb	Fri Jan 17 09:47:52 2020 -0700	Fix mdoc lint warnings by removing .Pp before and after .Ss.
9b12b21ea	36b3362b9	Thu Jan 16 17:37:46 2020 -0700	Fix TLS accept when SSL_accept() returns SSL_ERROR_WANT_WRITE. We need to switch from SUDO_EV_READ to SUDO_EV_WRITE for this case.
36b3362b9	fb9d7d8cc	Thu Jan 16 17:37:45 2020 -0700	Fix TLS connect when SSL_connect returns SSL_ERROR_WANT_READ. We need to switch from SUDO_EV_WRITE to SUDO_EV_READ for this case. Also make the tls connect events private to tls_timed_connect() with their own closure.  There is no need to store them in the client closure.
fb9d7d8cc	9e12b7177	Thu Jan 16 17:37:36 2020 -0700	Store submit time in struct iolog_info. Fixes missing time stamp in remote I/O log info file.
9e12b7177	161750fc5	Thu Jan 16 13:55:32 2020 -0700	Treat EROFS (like EACCES) as a non-fatal error in dir_is_writable(). Fixes sudoedit on macOS 10.15 and above where the root file system is mounted read-only.  See https://support.apple.com/en-us/HT210650. From Dan Villiom Podlaski Christiansen.  Bug #913
161750fc5	bbb9520c3	Wed Jan 15 14:47:42 2020 -0700	Really fix flushing of data in client_close(). Now that we call fmt_exit_message() from client_close() we do not need to try to determine whether the read or write events were pending in the old base.
bbb9520c3	405d26f5b	Wed Jan 15 14:11:18 2020 -0700	Use SUDOERS_DEBUG_* not SUDO_DEBUG_* in debug_decl() for the sudoers plugin.
405d26f5b	41242e121	Wed Jan 15 14:05:08 2020 -0700	Wrap calls to plugin event callbacks to use the plugin\'s debug instance. Otherwise, the debug output in a plugin\'s event callback will go to the sudo debug file, not sudoers.
e7eef9c3a	9c5c79194	Tue Jan 14 17:50:40 2020 -0700	Fix reference counting when both sudoers policy and I/O log are loaded. If both sudoers policy and I/O log plugins are loaded, debug_files will be empty when the I/O plugin is initialized.  This changes the logic to always increase the reference count if the instance is valid.
9c5c79194	c592470db	Tue Jan 14 13:53:52 2020 -0700	Fix handling of duplicate policy and I/O plugins. The warning message said the later I/O plugin was ignored but it actually overwrote the existing one instead. The first registered plugin of the same name now is used, as was intended. Specifying more than one policy plugin is no longer a fatal error; this allows the admin to fix the situation.
c592470db	e7480c341	Sat Jan 11 15:32:48 2020 -0700	For sudoedit_checkdir consider a user-owner directory to be writable. The non-faccessat() code already did this so this just brings the faccessat() path into alignment.  Bug #912
9e57bea4e	3e0dcae6c	Sun Jan 5 07:48:48 2020 -0700	Fix coverity CID 206586. Potential use after free calling gzstrerror() after gzclose().
972ea1448	3e9d15a4d	Thu Jan 2 11:53:08 2020 -0500	plugins/sudoers/sudoers_debug.c: fix harmless debug deregistration warning
3e9d15a4d	3f890e4db	Thu Jan 2 11:53:08 2020 -0500	plugins/python/Makefile.in: fix the install path of examples
a76b7543b	4eaea77fa	Tue Dec 31 07:48:57 2019 -0700	fix typo in previous
4347ed90d	291221c69	Wed Dec 25 11:19:58 2019 -0700	Fix compilation on systems with SIGRTMIN/SIGRTMAX but not _SC_RTSIG_MAX.
58d50f44c	8b571c59a	Wed Dec 25 11:14:18 2019 -0700	Support systems that have nl_langinfo(3) but not the CODESET define. Fixes compilation on old NetBSD versions.
8b571c59a	c6f8f4b54	Wed Dec 25 11:12:21 2019 -0700	Fix a typo; HAVE_KINFO_PROC2_NETBSD not HAVE_KINFO_PROC2_NETBSD2
79e52c776	486ee2b71	Mon Dec 23 07:27:54 2019 -0700	Substitute @prefix@ in for the example paths. We can\'t use @exampledir@ here since it contains Makefile variables.
486ee2b71	5dcc28180	Sun Dec 22 08:48:16 2019 -0700	debug_decl and debug_decl_vars now require a semicolon at the end.
4ad362dd8	523bcbedb	Sat Dec 14 12:55:42 2019 -0700	plugins/python: example plugin demonstrating conversation and debug API
d888d4459	9b49d44e8	Sat Dec 14 12:55:42 2019 -0700	plugins/python: make group plugin able to debug
311cf122e	c0d53d75e	Sat Dec 14 12:55:42 2019 -0700	plugins/python: add sudo debug helpers
6710048c8	80fa75f0e	Sat Dec 14 12:55:42 2019 -0700	lib/util/sudo_debug.c: add a function for querying if debugging is needed
80fa75f0e	a44158054	Sat Dec 14 12:55:42 2019 -0700	Makefile.in: fix calling log2cl when doing out of source build
9d737441f	d0b80b404	Sat Dec 7 08:42:12 2019 -0700	Fix event loop called via I/O log close function. We need to set events that were pending in the old base in the new one. Fixes sending the final I/O log data and the ExitMessage to the server.
a1e61f5ac	4b6de608c	Thu Dec 5 16:57:12 2019 -0700	Sync init_session() prototype with sudo_plugin.h and fix a typo.
4b6de608c	049bbbfae	Wed Dec 4 12:38:22 2019 -0700	Only update the time stamp entry after the approval function has succeeded. Bug #910
3ab29e29b	7c782edf5	Tue Dec 3 20:03:19 2019 -0700	Add reference counting to debug register/deregister. Fixes a potential problem when an instance is re-registered.
7c782edf5	24cda2592	Tue Dec 3 20:03:07 2019 -0700	Only deregister the sudoers debug instance on last close. Reference count calls to sudoers_debug_register and only deregister sudoers_debug_instance when refcnt reaches 0. Fixes a problem where the debug system was deregistered when the sudoers policy is closed even though the iolog plugin is active.
e0a4b2d68	b31b83051	Tue Nov 19 18:57:22 2019 -0700	Fix potential fd leak when converting trailing newline to cr + nl. Coverity CID 205872
3241b82a7	f913249dd	Mon Nov 18 10:29:11 2019 -0700	Make a shallow copy of user_env in I/O plugin in case it is reallocated. The policy plugin\'s session init function may reallocate the user environment pointer.  Fixes a use after free when PAM is used.
9df5e6c11	764fb3e6b	Fri Nov 15 09:52:48 2019 +0100	fixed segfault when connection_closure_free() tries to remove a non-existent connection object from the list
037fb9298	361557648	Fri Nov 15 09:52:48 2019 +0100	fix copy-paste mistake
f3ebe5025	4a893912c	Mon Nov 11 17:57:10 2019 -0700	Don\'t set the RLIMIT_STACK soft/hard limits to unlimited. Use 8Mb for soft and 64Mb for hard. Works around issues on macOS and docker.  See also Bug #908
4a893912c	ad52ce661	Mon Nov 11 16:07:43 2019 -0700	Restore resource limits before executing the askpass program. Linux with docker seems to have issues executing a program when the stack size is unlimited.  Bug #908
09f1c2649	71aed42f9	Wed Nov 6 13:41:52 2019 -0700	Fix typo in closefrom emulation.
71aed42f9	635445d47	Wed Nov 6 09:55:14 2019 -0700	Do not warn about a missing /etc/environment file on Linux without PAM. Bug #907
4c54e61ea	b270b0c88	Mon Oct 28 07:52:56 2019 -0600	Fix ChangeLog generation on a branch.
0d8062c10	0129f3a72	Tue Oct 29 08:28:52 2019 -0600	macOS does not allow rlim_cur to be set to RLIM_INFINITY for RLIMIT_NOFILE. We need to use OPEN_MAX instead as per the macOS setrlimit manual. Bug #904
56c21243d	aaf5d0dc6	Thu Oct 24 20:04:33 2019 -0600	Add iolog_ prefix to exported functions in iolog_util.c
aaf5d0dc6	1df3230c2	Thu Oct 24 20:04:33 2019 -0600	Read logsrvd.conf in two steps: first read, then apply if OK. This fixes a problem where when logsrvd.conf was reloaded while running (due to SIGHUP) and there was an error we could end up with a partial config.
16b3513a9	822fd99b6	Thu Oct 24 20:04:32 2019 -0600	Fix Coverity CID 204355, resource leak on error path.
822fd99b6	e74134d04	Thu Oct 24 20:04:32 2019 -0600	Fix Coverity CID 204353, fd leak on error path.
e74134d04	728ed2100	Thu Oct 24 20:04:32 2019 -0600	Fix some warnings from the clang static analyzer.
0ab2d8299	3394785f6	Thu Oct 24 20:04:32 2019 -0600	Fix client side of restart. Seek to the target point there too so we start sending from the right place.
2e2d9e869	282263c11	Thu Oct 24 20:04:31 2019 -0600	Add sudo_ prefix to logsrvd and sendlog.
706553f9d	0d69de5b2	Thu Oct 24 20:04:30 2019 -0600	Add debugging for logsrvd and sendlog
271ead2fd	0375eaca5	Wed Oct 23 12:47:44 2019 -0600	Don\'t pass an invalid session or process group ID to the plugin. Fixes a regression in 1.8.28 when there is no terminal session leader.
b02851dcf	cf6c60c10	Fri Oct 18 06:20:27 2019 -0600	Change how the umask is handled with PAM and login.conf. If the umask is explicitly set in sudoers, use that value regardless of what is in PAM or login.conf.  If using the default umask from sudoers, allow PAM or login.conf to override it.  Bug #900
e339d9950	29afe160a	Wed Oct 16 09:37:41 2019 -0600	Fix stronum() regress test and the errno value for out of range numbers.
d494b8155	2512f6efb	Tue Oct 15 07:23:51 2019 -0600	The fix for bug #869 broke "sudo -v" when verifypw=all (the default)
f752ae5ce	fd5d0f511	Thu Oct 10 10:04:13 2019 -0600	Treat an ID of -1 as invalid since that means "no change". Fixes CVE-2019-14287. Found by Joe Vennix from Apple Information Security.
c64add170	45a79cf86	Sat Oct 5 14:34:11 2019 -0600	Fix "make pvs-studio" run in a build dir
ab6cfc404	112dff276	Fri Sep 27 15:36:20 2019 -0600	Bug #898
112dff276	b7b3fb72d	Fri Sep 27 15:32:49 2019 -0600	Fix restoring the file context of the user\'s tty with SELinux. Also fix broken tty labeling when running a command in a pty. Includes a fix for a typo introduced in the last change set.
bcf8c3dd5	73dd3849c	Fri Sep 27 08:47:41 2019 -0600	Add some debugging around context setting and tty labeling Also be more extact with error return values
73dd3849c	81a30dd44	Sat Sep 21 07:47:24 2019 -0600	Better error message when debug log file cannot be opened.
b2fadf66d	8c96df036	Sat Sep 14 08:50:12 2019 -0600	sudoedit umask fix
8c96df036	751c0c444	Fri Sep 13 16:49:13 2019 -0600	Fix sorting of the time-based event queue.
62bb4aa63	972670bfc	Mon Aug 26 20:33:15 2019 -0600	Bug #895
972670bfc	5a2286513	Mon Aug 26 19:30:11 2019 -0600	Use the SUDO_CONV_PREFER_TTY flag during authentication. This prevents the password and PAM prompts from being redirected. Bug #895
5a2286513	2087f6354	Fri Aug 23 11:37:55 2019 -0600	Fix typo that prevented a missing linux audit lib from being detected.
e3967dc7d	a7cd4f0d4	Tue Aug 20 10:52:19 2019 -0600	Recent fixes.
a7cd4f0d4	37670a008	Tue Aug 20 10:33:51 2019 -0600	Add user ID to the search filter when matching sudoUser. We already support group IDs but the user ID was missing. From sudo-1.8.23-ldapsearchuidfix.patch in RHEL 7.
37670a008	5e692576c	Tue Aug 20 10:25:38 2019 -0600	Fix parsing of double-quoted Defaults bindings that start with % or +. From sudo-1.8.23-fix-double-quote-parsing-for-Defaults-values.patch in RHEL 7.
5e692576c	b98b82e4a	Tue Aug 20 07:25:53 2019 -0600	Restore core dump resource limit before the PAM session module is run. Otherwise, we may override the limits set by PAM. Bug #894
29534ad96	9f7db2df2	Mon Aug 19 08:36:30 2019 -0600	Fix handling of real-time signals.
9f7db2df2	e99082e05	Fri Aug 16 06:06:51 2019 -0600	ipa_hostname fix
e99082e05	b4bef30d3	Thu Aug 15 14:20:12 2019 -0600	Fix special handling of ipa_hostname that was lost in sudo 1.8.24. We now include the long and short hostname in sudo parser container.
3e56be356	dfc32e5b3	Mon Aug 5 16:30:58 2019 -0600	Store signal name, not number in I/O log timing file. The "SIG" prefix is not used so, e.g. SIGTERM -> "TERM". This makes the I/O log files portable from one system to another. Older I/O log files with signal numbers can still be replayed.
5e424640b	6f3d826f8	Fri Jul 19 20:14:44 2019 -0600	Use strftime(3) instead of formatting struct tm by hand. Fixes a warning on newer versions of gcc.
f63424111	a7137a522	Fri Jul 19 14:10:57 2019 -0600	Fix for Bug #888
a7137a522	15db0c3f8	Fri Jul 19 13:51:23 2019 -0600	If the command in sudoers does not exist on the file system, match by name. We still want to match the command even if it doesn\'t exist so that the NOPASSWD flag on sudoers entries with non-existant paths works as expected. Bug #888.
15db0c3f8	3c825e298	Fri Jul 19 11:51:20 2019 -0600	More verbose error message when a password is required and no terminal is present.  Bug #828.
cecf69ff3	10b5529a0	Sun Jul 14 18:51:50 2019 -0600	If we are unable to stat() sudoers as non-root, try again as root. By default, sudo relies soley on group permissions to read sudoers to make it possible to store sudoers on NFS.  However, if /etc/sudoers is not accessible to non-root uids for some reason, sudo will fail. Bug #880.
caceced2f	cd258e1d3	Wed Jul 3 13:13:04 2019 -0600	Use $libexecdir in default settings used by the documentation. The web and pdf pages will substitute /usr/local/libexec for $noexec_file. Also do substitution of variables using exec_prefix even if we don\'t use them in the Makefile since the documentation may reference them.
6e497be93	9d8f37439	Wed Jul 3 07:39:54 2019 -0600	Update plugindir even when --disable-shared is specified. Otherwise, the default value is substituted into the Makefiles and documentation which may not match --prefix.  Bug #886
6fe222329	a193f39c8	Thu Jun 20 11:05:15 2019 -0600	Fix details of how EDITOR, VISUAL and SUDO_EDITOR are (or are not) preserved. The description in the editor option was incorrect and didn\'t mention env_keep. Reported by Sander Bos
7d5b1e3b1	cb4ded8fb	Wed Jun 19 14:02:16 2019 -0600	Fix a few typos and awkward wording. Use the singular "they" instead of he/she. Add back missing text in description of variables starting with (). Based on changes from Sander Bos.
dae484213	07ed5b86f	Mon May 27 06:35:48 2019 -0600	Allow the user to change their password if expired on AIX. Bug #883
e28ba02c7	19e2da8ee	Wed May 22 08:58:51 2019 -0600	Fix a typo.
aa0146d68	9048ee6c4	Sat Apr 20 17:28:45 2019 -0600	Keep debug fds open in send_mail() to aid in debugging. Adds closefrom_nodebug() which acts like closefrom(3) but doesn\'t close debug fds for use by send_mail(). Also moves the code to exec the mailer to its own function.
9048ee6c4	de65d7092	Fri Apr 19 10:14:10 2019 -0600	Set def_mailerflags even if sendmail was not found at configure time. Fixes a NULL dereference when mailerpath is set but mailerflags is not. Bug #878
f0910c01d	731e79671	Mon Apr 8 08:50:03 2019 -0600	Restrict the PAM_TTY kludge to Solaris and Linux-PAM. Setting PAM_TTY to the empty string causes problems with some modules on HP-UX so restrict it to systems where it is fixes known issues.
731e79671	194968eaf	Mon Mar 18 14:08:21 2019 -0600	Fix the counting of supplementary groups on AIX. We should not assume that basegid will be present in the list of gids returned by getgrset().
e31ac5a99	28b0bff4f	Fri Mar 8 09:07:20 2019 -0700	Fix test failure when run by a user other than the file owner.
0c31cf15f	0766e0c64	Fri Mar 8 06:58:30 2019 -0700	Test cvtsudoers stdout and stderr separately. Fixes a test failure on systems with musl libc.  Bug #873
8ee2de998	0e8fffdb3	Tue Mar 5 10:23:07 2019 -0700	Fix error message when a fully-qualified plugin path does not exist.
0e8fffdb3	ea3ede690	Mon Mar 4 08:52:28 2019 -0700	Fix unescaped \'\\\' and remove an extra \'[\' in the definition of digest.
f3344b588	c0a12d9d9	Tue Feb 19 11:03:02 2019 -0700	Fix pasto; the unrestricted env file was read when we want the restricted one.
1e6e04818	bc2591505	Tue Feb 12 12:02:02 2019 -0700	Rename FOLLOW and NOFOLLOW tokens FOLLOWLNK and NOFOLLOWLNK. Fixes a namespace collision on Solaris when bison is used.
4f74fe3a8	928faf27f	Tue Feb 5 14:29:39 2019 -0700	Use correct debug_decl() names.
3788c6548	c1d934894	Sat Feb 2 13:55:30 2019 -0700	Fix memory leak when there are no network interfaces or an error occurs.
c1d934894	df8b855b2	Fri Jan 25 10:39:57 2019 -0700	Use $ac_cv_search_FUNCTION instead of $ac_lib and $ac_res. Fixes a problem where libcrypt is not used with autoconf caching. Adapted from a diff from Adam Labbe.
ecc9c366e	985600e7f	Tue Jan 22 06:41:16 2019 -0700	Fix listpw=never and verifypw=never.  Bug #869
3d63eee34	e2675d8f1	Mon Jan 7 11:01:21 2019 -0700	The AIX nofiles hard limit fix and bug #867 will make 1.8.27.
e2675d8f1	f7d7a9a61	Mon Jan 7 09:50:40 2019 -0700	Use PAM_SILENT to prevent pam_lastlog from printing last login information on RedHat except when explicitly running a shell. Adapted from a patch from Nir Soffer.  Bug #867
f7d7a9a61	32dc90c28	Mon Jan 7 09:38:03 2019 -0700	Fix the default nofiles and stack hard limits. The table of default hard limits in /etc/security/limits was out of date with respect to the current documentation.  The default hard limit for nofiles should be unlimited, not 8196.  The default hard limit for stack should be 4194304 blocks (which fits in an unsigned long on 32-bit platforms).
b2f7983c8	efe35e5b1	Wed Jan 2 07:39:33 2019 -0700	Fix setting of utmp entry when running command in a pty. Regression introduced in sudo 1.8.22.
efe35e5b1	24b0da367	Mon Dec 24 20:31:26 2018 -0700	Use debug_return_int not debug_return_bool in resolve_host
dc9338ffe	7d5b0064a	Mon Dec 24 08:26:18 2018 -0700	Allow the sudoers file to be specified without the -f option. Bug #864
04a4b3c1f	524277348	Tue Dec 11 09:02:30 2018 -0700	Fix some typos; reported by Radovan Sroka
4125808a8	e91e5ee82	Fri Dec 7 09:51:34 2018 -0700	The fix for bug #843 was incomplete and caused pam_end() to be called early. sudo_pam_approval() must not set the global pam status to an error value if it returns AUTH_SUCCESS.  Otherwise, sudo_pam_cleanup() will call pam_end() before sudo_pam_begin_session().  This resulted in a NULL PAM handle being used in sudo_pam_begin_session().
85dd1747c	b8ba37222	Thu Nov 29 08:47:42 2018 -0700	fix mode fixmdoc.sed
b8ba37222	e0d2dc61e	Tue Nov 27 13:15:08 2018 -0700	Fix section in the .TH line of *.man.in file. The substitution for @mansectsu@ and @mansectform@ was broken. No longer need to strip out OpenBSD from the header line.
e010706ed	23006c72c	Tue Nov 27 08:14:15 2018 -0700	Use roff conditionals in the manuals instead of post-processing. We still need to process the resulting .man.in files to add back the conditionals but this should be easier to debug as the changes are visible in the .in file. Some minor postprocessing is still used to make the manuals HP-UX friendly and to change "0 seconds" -> unlimited after substitution.
23006c72c	7c0019d2a	Sat Nov 24 08:39:09 2018 -0700	Sudo plugin manual updates and clarification from Guillem Jover: - Add missing return information for show_version(). - Fix prototypes for several function pointers. - Update SUDO_API_VERSION_MINOR. - Add missing references to log_suspend() and change_winsize(). - Add missing "array.". - Clarify that argc can be zero on sudo -V. - Clarify size requirements for conversation array arguments. - Clarify timeout zero value for struct sudo_conv_message. - Clarify initial and final state of reply in struct sudo_conv_reply.
7c0019d2a	0679f4529	Sat Nov 24 08:34:03 2018 -0700	Revert changes to give arguments to the .Bx macro. This is intended for things like .Bx 4.3 to generate "4.3BSD" so the argument ends up before the BSD, not after.  Just go back to using "BSD authentication" and "BSD login classes" so fixmdoc.sh can operate correctly.  Bug #861
0679f4529	ecd968881	Fri Nov 23 06:42:23 2018 -0700	Update fixmdoc.sh to match the BSD -> .Bx changes in the manuals. Bug #861
cfa4879db	c88b85985	Wed Oct 31 10:03:02 2018 -0600	Fix memory leak in runaslist_matches().
059796930	5eb0fbd07	Fri Oct 26 10:34:16 2018 -0600	Add missing #ifdef LDAP_OPT_X_TLS_REQUIRE_CERT Fixes problems building on older LDAP sdks.
019279a4b	404524c4e	Fri Oct 26 08:19:41 2018 -0600	Fix some mangled text in the license block.
1b035b542	78d35de93	Thu Oct 25 08:40:25 2018 -0600	Add padding option to cvtsudoers. Bug #856
78d35de93	cb588f233	Thu Oct 25 07:17:31 2018 -0600	Remove an errant grset++ in the AIX version of sudo_getgrouplist2(). Bug #857
deccfe68f	84ef50006	Thu Oct 18 15:38:54 2018 -0600	Fix a memory leak on malloc() error in sudo_ldap_role_to_priv(). Coverity CID 188804
2ff8f8601	c2d93b8c9	Thu Oct 18 14:29:33 2018 -0600	Fix trimming of non-escaped trailing space in ldif_parse_attribute(). Found by PVS-Studio.
63afa569f	675fc34c3	Thu Oct 18 08:08:44 2018 -0600	Fix handling of timeout values in sudoers. When passing the timeout back to the front end, ignore the user-specified timeout if it is not set (initialized to 0). Otherwise, sudo would choose a zero user-specified timeout over the sudoers-specified timeout (non-zero).
675fc34c3	60f0d65e2	Wed Oct 17 09:54:53 2018 -0600	Fix cut & pastos in cvtsudoers_make_gritem()
60f0d65e2	939585e90	Wed Oct 17 06:57:06 2018 -0600	Fix expected test output now that command_timeout is parsed correctly in LDIF.
a9fd783f2	387672583	Tue Oct 16 10:31:43 2018 -0600	Fix up #line entries that reference lex.sudoers.c.
387672583	fa7e6f3f0	Sat Oct 13 08:08:16 2018 -0600	Fix workaround for broken sudo 1.8.7 timing files.
fa7e6f3f0	75d9c6f16	Sat Oct 13 07:31:34 2018 -0600	Fix memory leak when reusing the runas list.  We need to free the member list itself as well as its contents.
013e0025c	675802b71	Sun Oct 7 07:35:36 2018 -0600	Fix remaining instances of "e.g." without a trailing \',\'.
5433eb546	dd6a6e401	Sun Oct 7 07:18:29 2018 -0600	Document log_suspend() and fix the description of the change_winsize() return value.
dd6a6e401	a814da673	Sat Oct 6 06:00:56 2018 -0600	Fix problems found by igor.  Bug #854
e2570307e	c0e8bde10	Fri Oct 5 14:04:29 2018 -0600	Initialize the pty rows/cols based on the values we stored in user_details. This fixes a minor issue where we would send an extra window size change event the first time the command was suspended.
8bf279b11	8aad36508	Thu Sep 20 15:10:15 2018 -0600	Add regress test for bug #853
8aad36508	8e1e46433	Thu Sep 20 14:56:25 2018 -0600	When expanding an alias in print_member_json_int() avoid printing an extra comma at the end of the entry.  Bug #853.
c639c965c	1a9b932ff	Wed Sep 12 07:02:13 2018 -0600	Fix a crash in the event system\'s poll() backend introduced with support for nanosecond timers.  Only affects systems without ppoll(). Bug #851
a924b4610	765d99e1f	Thu Aug 30 14:06:18 2018 -0600	Fix warnings on OpenIndiana (Illumos)
6e4f8c8cd	ae04b40c0	Thu Aug 30 09:22:16 2018 -0600	Bug #849
ae04b40c0	2221fbe2f	Thu Aug 30 08:36:09 2018 -0600	The sssd backend used to take the first match, assuming that entries were sorted in descending order by sudoOrder.  That allowed it to avoid iterating over the entire list of rules.  Now that we convert to a sudoers parse tree, we need to convert rules in ascending order, not descending.  The simplest way to accomplish this is to simply iterate over the rules from last to first, reversing the sort order.  Bug #849
ea38e9d90	58445393a	Thu Aug 30 07:48:16 2018 -0600	For conversion to a sudoers parse tree, ldap_entry_compare() now needs to sort in ascending order, not descending.  Bug #849
f1f632665	f9b3223ed	Wed Aug 29 07:38:27 2018 -0600	Fix memory leak in test.
fdd729612	a22296788	Mon Aug 27 13:50:23 2018 -0600	Add a test for the 4-argument au_close() function found in Solaris 11 instead of assuming it is present if __sun is defined.  Fixes a compilation error on OpenIndiana and older Solaris versions.
fe965c3a3	d876602db	Wed Aug 22 19:15:26 2018 -0600	Fix typo in last commit.
dcf168e70	ad104a3e4	Wed Aug 22 10:40:11 2018 -0600	fix compiler warnings on Solaris 11
ad104a3e4	6e4ec9180	Wed Aug 22 10:36:00 2018 -0600	Fix setting of errno when gotdata() fails.
6e4ec9180	5a0c86bb6	Wed Aug 22 08:23:29 2018 -0600	Bugs 846 and 847
9e6c14b09	31e065c6c	Tue Aug 21 17:35:44 2018 -0600	Fix printing of T_TIMESPEC values.
8d83bd5c0	afca08c74	Mon Aug 20 12:49:24 2018 -0600	Document when the I/O log timing file entry bug was introduced.
3c562facc	5af268228	Mon Aug 20 05:49:57 2018 -0600	Fix test output for bug #845
5af268228	3f1470ebe	Mon Aug 20 05:48:14 2018 -0600	Fix pasto when converting sudoNotAfter; from Miguel Sanders Bug #845
afad4eb94	46ab293ce	Sat Aug 18 20:29:30 2018 -0600	Fix I/O log timing file on systems without a C99-compatible snprintf(). On those systems we use our own snprintf() that doesn\'t support floating point.  We don\'t actually need floating point in this case since the we can print seconds and microseconds without using it.
46ab293ce	69541be94	Sat Aug 18 07:08:20 2018 -0600	Fix for Bug #844
69541be94	288f3f17a	Sat Aug 18 07:06:54 2018 -0600	Handle the case where O_PATH or O_SEARCH is defined but O_DIRECTORY is not.  In theory, O_DIRECTORY is redundant when O_SEARCH is specified but it is legal for O_EXEC and O_SEARCH to have the same value.  Bug #844
92975ee7c	7d014dfac	Fri Aug 17 15:58:17 2018 -0600	Fix get_starttime() on HP-UX.
7a929ce13	c0d60b9dd	Wed Aug 15 09:19:50 2018 -0600	Add debugging info so we can tell why a timestamp record doesn\'t match.
418bf793f	d02646928	Sat Aug 11 21:29:43 2018 -0600	Fix the return value of sudoers_io_change_winsize() on success. Otherwise, we only log a single window size change.
0484e3d6a	9722b304b	Tue Aug 7 10:03:05 2018 -0600	Fix ambiguity when talking about Aliases.  We can\'t use User_Alias in the grammar as both the definition of the Alias as well as its name.  This adds {User,Runas,Host,Cmnd}_Alias_Spec to help differentiate between the name of the alias and its definition.  Bug #834
db387a53a	9cc09e437	Sat Aug 4 07:38:47 2018 -0600	fix typo
9cc09e437	6a692fec3	Fri Aug 3 11:45:01 2018 -0600	Fix a warning on FreeBSD which has a fancier __containerof implementation.
608574a21	171686c42	Thu Aug 2 14:45:00 2018 -0600	For ldap/sssd, include defaults in the generate privilege unless we are listing in short mode (in which case we convert them to tags if possible).  Fixes a problem where sudoOptions were not being applied to the command.
394524fd5	dc1e0e716	Thu Jul 26 12:31:29 2018 -0600	Ignore PAM_NEW_AUTHTOK_REQD and PAM_AUTHTOK_EXPIRED errors from pam_acct_mgmt() if authentication is disabled for the user. Bug #843
dc1e0e716	5d31be96a	Mon Jul 23 11:37:26 2018 -0600	Work around a bug on AIX where closing the pty slave causes the main sudo process to lose its controlling tty (which was *not* the pty slave).
5d31be96a	e7daff062	Mon Jul 23 10:36:08 2018 -0600	Add missing aix_restoreauthdb() call to match the aix_setauthdb() added in b8a011be9af7.  Fixes issues on AIX where local users/groups may not be resolved when some NIS/AD/LDAP is used for users.
433a74d1d	dd3366106	Mon Jun 25 13:20:04 2018 -0600	RFC 2849 specifies whitespace as the space character only so replace tabs with spaces. Bug #840
dd3366106	e1ecc7142	Mon Jun 25 12:51:41 2018 -0600	Fix typo; bug #839
138561379	b67915c6e	Fri Jun 15 13:31:58 2018 -0600	Fix fd leak introduced by SUDO_CONV_PREFER_TTY commit.  Coverity CID 186605.
b67915c6e	6eadaddc9	Wed Jun 13 11:19:35 2018 -0600	Fix some issues pointed out by mandoc -Tlint
ec2dae810	dafb5f523	Mon Jun 4 20:00:41 2018 -0600	Fix conversion of usec to nsec; from Scott Cheloha
dafb5f523	919b56722	Fri Jun 1 21:15:57 2018 -0600	Fix typo.
1202beafb	c990d93a4	Tue May 29 10:10:20 2018 -0600	Fix memory leak of handle pointer on close.
a04cb53e3	5c113e59e	Sun May 20 07:42:54 2018 -0600	Fix pointer sign warnings.
1494f25ba	c30ad9710	Wed May 16 12:14:14 2018 -0600	Fix logic inversion when handing the authenticate Defaults option for "sudo -l" and "sudo -v" in long list mode.
8ce49ecb2	8ad51fe08	Wed May 16 10:45:00 2018 -0600	Fix memory leak on error, CID 185602
210280082	b31656b7f	Wed May 16 10:15:15 2018 -0600	Fix format string mismatch, sudo_order is unsigned.
cf9c0102d	f38317269	Wed May 16 09:10:43 2018 -0600	Only set MODE_PRESERVE_ENV when preserving the entire environment. Fixes a problem introduced in 1.8.23 where "sudo -i" could not be used in conjunction with --preserve-env=VARIABLE.  Bug #835
4a3aa5f6e	7b1e78d6d	Fri May 11 07:51:43 2018 -0600	Add debug warning if lseek() fails (should not be possible).
7b1e78d6d	6e290763c	Fri May 11 07:45:22 2018 -0600	Fix swapped args of lseek() when rewinding.  This didn\'t cause a problem because the value of SEEK_SET is 0.
6e290763c	3359d7290	Thu May 10 21:17:03 2018 -0600	Fix a format-truncation warning in newer gcc by avoiding using %0x and %0X in the test.  We are formatting a single byte so just do it one nybble at a time.
1a087ceba	82dfbf458	Mon Apr 30 09:56:40 2018 -0600	Fix typo
82dfbf458	929396fbc	Sun Apr 29 13:58:49 2018 -0600	fix version
f53e5e2bd	55869277b	Tue Apr 24 16:40:16 2018 -0600	Fix compilation error with older Sun Studio compilers.
55869277b	f23d73dfe	Tue Apr 24 14:29:58 2018 -0600	Update Bug #831 decription.
64c78a61c	6e22da341	Mon Apr 23 20:43:04 2018 -0600	Rewind the fd after calling sudo_filedigest().  Otherwise, when running a script via fexecve(), the interpreter may get EOF when reading /dev/fd/N.  This only appears to affect BSD systems with fdescfs.  Bug #831.
3f1ec0c5f	def2e761e	Mon Apr 23 11:01:49 2018 -0600	Bug #831.
def2e761e	16093ee8d	Mon Apr 23 10:54:51 2018 -0600	We can only use fexecve() on a script if /dev/fd/N exists. Some systems, such as FreeBSD, don\'t have /dev/fd mounted by default.  Bug #831
e1392cd28	109160df3	Thu Apr 19 09:23:45 2018 -0600	Fix the -b option when converting from LDIF.
3dd7d9693	93a8ddca2	Wed Apr 18 14:25:11 2018 -0600	Fix some more typos.
1e26c6043	8eccfbd7b	Wed Apr 18 14:14:47 2018 -0600	Describe the special handling of LOGNAME, USER and USERNAME. Fix typos reported by aspell.
8eccfbd7b	3194a00e9	Wed Apr 18 10:09:22 2018 -0600	Fix a memory leak on the error path.
f8f0c16c7	d85e244c6	Sat Apr 14 19:54:54 2018 -0600	Fix typo
d85e244c6	38ff66162	Sat Apr 14 06:13:44 2018 -0600	Fix cut & pasto that prevented "-d command" from working.
38ff66162	c1accd4b4	Fri Apr 13 10:49:05 2018 -0600	Fix a user after free crash as well as a memory leak when filtering Defaults.
512e0be83	7663ae7b2	Wed Apr 4 11:28:53 2018 -0600	Use btime in /proc/stat to determine system start time instead of /proc/uptime.  Fixes the process start time test when run from a container where /proc/uptime is the uptime of the container but the process start time is relative to the host system boot time. Bug #829
6f6621644	b4b5243bf	Thu Mar 29 18:53:50 2018 -0600	Avoid false positive NULL dereference by uses value.u.string instead of name as the former is guaranteed not to be NULL. Fixes CID 183465.
4df454310	6da40a7b5	Sun Mar 25 06:03:19 2018 -0600	In pty_close() close the slave and remove any events associated with it.  Fixes a potential hang when performing the final flush on non-BSD systems.
6da40a7b5	22c9ed8e7	Fri Mar 23 09:54:52 2018 -0600	Fix typo in strcmp(), we are comparing var not val.
fbed17e1a	e9512df6b	Wed Mar 21 14:43:17 2018 -0600	Fix memory leak on error path.
910f28894	1cb5ab8b9	Sat Mar 10 20:16:20 2018 -0700	fix compilation on Solaris
bdbd102c9	217e0a9b4	Tue Mar 6 12:00:37 2018 -0700	Fix crash when converting sudoers entry with a runas list that is present but empty.
88bc4ba86	0804cda64	Thu Mar 1 10:35:32 2018 -0700	Fix clean target for *.sudo regress files
8275ab873	73b5f961e	Thu Mar 1 10:18:48 2018 -0700	Fix use of uninitialized variable (conf) if sudoers_debug_register() happens to fail.
12affcd5e	7919b9ad2	Mon Feb 26 17:59:58 2018 -0700	Add missing close parenthesis in "Including other files from within sudoers" section.  Bug #824
bb0623324	19502307a	Thu Feb 22 13:17:37 2018 -0700	Fix a typo.
8b22ed783	91f97d2f2	Wed Feb 21 21:24:53 2018 -0700	Fix LDIF conversion of commands with an associated digest.
337ace644	c13557b6c	Wed Feb 21 21:08:37 2018 -0700	Prepend digest to command if present. Fix printing of group IDs and non-unix groups.
c13557b6c	03f94d62f	Wed Feb 21 21:02:36 2018 -0700	Fix gcc false positive for uninitialized variable
3f204c5eb	e48cbfc10	Mon Feb 19 13:39:11 2018 -0700	Fix conversion of "ALL" in the JSON output format, which was being printed as an alias.
e48cbfc10	d5d170252	Mon Feb 19 11:27:30 2018 -0700	Clarify that --with-rundir and --with-vardir take sudo-specific directory, e.g. /var/run/sudo and not just /var/run.  Bug #823
d5d170252	42fe0409f	Mon Feb 19 11:00:12 2018 -0700	In pty_cleanup() we need to call sudo_term_restore() even if no I/O plugins are present as long as /dev/tty exists.  Fixes the use_pty case with no I/O plugins.
525c6a3d9	59086e9c8	Mon Feb 19 10:59:12 2018 -0700	Use /run in preference to /var/run if it exists. Bug #822
9d49592f1	57e7b4b49	Mon Feb 5 06:23:33 2018 -0700	Fix compilation with glibc where stdout is not constant.
07d9cec27	5de49b2d6	Tue Jan 30 11:12:38 2018 -0700	Remove extraneous break statement and fix some whitespace.
5e9e641b3	f3ef0f509	Mon Jan 29 14:02:21 2018 -0700	Check the return value of sudoers_debug_register(). Coverity CID 182574
f3ef0f509	776627803	Mon Jan 29 13:58:25 2018 -0700	Fix memory leak, su->count is now 0 when it is unused, not 1. Covertity CID 182573
7638e7173	cc31b3fd4	Sat Jan 27 19:52:20 2018 -0700	fix make check
fa2ab63da	740a47980	Thu Dec 21 16:31:42 2017 -0700	Stop looking for an editor as soon as we find one. A similar fix was made to visudo some time ago.
b78296197	79caf1e68	Sat Dec 16 20:46:58 2017 -0700	Fix compilation error on FreeBSD
79caf1e68	1709dc7f7	Sat Dec 16 14:50:14 2017 -0700	Fix debug_decl(), it should be SUDOERS_DEBUG_UTIL Add debugging for the successful case For Linux, don\'t NUL out *ep before parsing with strtoull(). * * * Add missing debug info for the System V /proc version.
5cec5734c	cd0b70054	Fri Dec 15 21:08:38 2017 -0700	If the lock record doesn\'t match the expected record size we need to seek to the end of the record as we otherwise may have gone too far (or not far enough).  Fixes interop problems when the time stamp record changes size.
d322caf7a	00a00ebd1	Sun Dec 10 07:53:09 2017 -0700	Print usage and return an error when an empty argument is given for all command line arguments other than -p and -E.  Bug #817
4168668f5	116c5d7ef	Fri Dec 1 12:58:37 2017 -0700	Add debug printfs around group list retrieval.
486ced7c1	54acf4f99	Wed Nov 29 13:13:33 2017 -0700	Sprinkle some extra debugging printfs
54acf4f99	5ccc7ab87	Wed Nov 29 12:06:12 2017 -0700	Handle receipt of SIGTTIN/SIGTTOU when reading/writing from/to the tty. We can\'t use a signal event for these since that would restart the system call after the signal was handled and the callback would not get a chance to run.  Fixes running a command in the background that write to the tty when the TOSTOP terminal flag is set.
53a8ad712	2c45774a3	Fri Oct 20 07:55:48 2017 -0600	Return an error if the sudo front end doesn\'t set the user name, user ID, group ID or host name.  Bug #807
3b88cdfcd	1051cf1e6	Tue Sep 26 14:21:11 2017 -0600	Fix stair-stepped output when the output of a sudo command is piped to another command and use_pty is set.
1051cf1e6	749cdc9d9	Tue Sep 26 13:08:57 2017 -0600	env_keep and env_check are also taken into account with "sudo -i". Bug #806
d85056d95	4b5aeefeb	Wed Sep 6 16:08:23 2017 -0600	sudo_terminated() should not return true when SIGCHLD is pending. Bug #801
8e021c39f	f5425a80a	Tue Sep 5 09:30:19 2017 -0600	Fix a logic error in 96651906de42 which prevented sudo from using the PAM-supplied prompt.  Bug #799
06d52c97c	507ab6fdc	Fri Sep 1 11:36:15 2017 -0600	The fix for matching when no sudoRunAsUser is present in a sudoRole was incomplete.  If no -g option was specified on the command line but sudoRunAsGroup is present in a sudoRole, we need to treat the group match as failed instead of missing.
507ab6fdc	e10025961	Fri Sep 1 09:22:31 2017 -0600	Sprinkle a few more debugging printfs.
e10025961	447c2c7e8	Fri Sep 1 09:00:17 2017 -0600	Fix replaying sessions that contain input logs.  When the inter-record timeout expires we need to read the next record if there is nothing to output.
7652dad0d	d5c41ae37	Fri Sep 1 06:00:48 2017 -0600	Fix typo (Auguest vs. August).  From David Pocock.
5cdee2c2c	c3d098254	Thu Aug 31 11:05:48 2017 -0600	Fix the pass2 ldap query string when no search filter is defined. Due to the addition of "(sudoUser=*)" to the query we always need the AND operator, even if no search filter is present.
c3d098254	0d31a1c30	Tue Aug 29 08:58:14 2017 -0600	Don\'t forward SIGINFO to the child when it is send by the kernel (not another user process).  This is consistent with the handling of other keyboard-generated signals such as SIGINT, SIGQUIT and SIGTSTP.  Bug #796
0d31a1c30	0d243a882	Wed Aug 23 11:54:13 2017 -0600	Fix path to LICENSE and NEWS files that get used in the installer. Previously, the installed versions were used instead of the ones in the destdir.
159f89f0d	a01bbfacf	Fri Aug 11 09:50:07 2017 -0600	Preserving environment variables on the command line was bug #279
5ab1d724a	98369bf98	Mon Jul 31 10:44:39 2017 -0600	fix playback of stdout/stderr without embedded carriage returns
beece9171	ad81862b0	Fri Jul 28 13:52:55 2017 -0600	Add support for --enable-sasl and --disable-sasl to make it possible to enable/disable support for LDAP with SASL authentication.  Sudo compiles in support for SASL authentiation by default if the ldap_sasl_interactive_bind_s() function is detected. Bug #788
5bc80d3dd	28fe33501	Mon Jul 17 09:26:00 2017 -0600	Reparse sudoers if a new #include file was added. Otherwise the new file will not get its syntax checked. Bug #791
a7759b626	88bf0337e	Mon Jul 10 16:28:10 2017 -0600	Store the debug instance ID for I/O plugins too. Now iolog_open() is consistent with policy_open().
f5b60ef74	c8c586ee0	Thu Jun 15 07:51:02 2017 -0600	Add debug warning when we have wait status but don\'t overwrite the existing cstat.
c8c586ee0	022ac87d6	Thu Jun 15 07:51:00 2017 -0600	Better handling of SIGCONT from in command in the monitor.  It is useful to know when the command continued but we don\'t want to inform the parent or store the wait status in this case.  Fixes a hang after multiple suspends on Linux.
60146c295	ab59834a0	Wed Jun 7 16:25:46 2017 -0600	Fix the man section of sudo_plugin in cross-references.
b3fe46ce6	20a0fa128	Mon May 29 14:32:53 2017 -0600	Fix for CVE-2017-1000367, parsing of /proc/pid/stat on Linux when the process name contains spaces.  Since the user has control over the command name this could be used by a user with sudo access to overwrite an arbitrary file. Thanks to Qualys for investigating and reporting this bug.
20a0fa128	b2770313c	Tue May 23 13:26:54 2017 -0600	Fix potential memory leak on reallocarray() error.  Coverity CID 169639
b2770313c	f794de950	Tue May 23 13:19:50 2017 -0600	Only fall back to deprecated getaudit() on FreeBSD.  Fixes compiler warnings on macOS.
b53a531cc	ad8c1ae07	Tue May 23 11:52:40 2017 -0600	fix paths to LICENSE and NEWS files for macOS packages
f60030b90	7db97c783	Mon May 15 08:57:45 2017 -0600	Fix compilation error on macOS
a842913aa	d979898e7	Fri May 12 10:02:18 2017 -0600	Use debug logging instead of ignore_result() where possible.
246ed8777	0244f931d	Thu May 11 05:28:19 2017 -0600	Fix "make check" when openssl or gcrypt is used.  Bug #787
e51831fab	93c029f4f	Mon May 8 13:55:02 2017 -0600	Be clear that #includedir diverts control to the files in the specified directory and, when parsing of those files is complete, returns control to the original file.  Bug #775
e18a5c7d7	44dc15d02	Fri May 5 14:45:35 2017 -0600	Fix a hang introduced in the last commit.  Don\'t close the pty slave until after we have the controlling tty.
237eddd95	32ebb4a38	Thu May 4 10:30:59 2017 -0600	Fix typo (fd2 vs. fd) caught by coverity, CID 168359.
d9bfaa386	c37966555	Wed May 3 10:24:12 2017 -0600	Fix a pasto that resulted in an extra (empty) syslog_goodpri list entry.
6af6f8467	dab8651ed	Fri Apr 28 12:12:00 2017 -0600	Fix exponential behavior in glob() with respect to multiple \'*\'. See https://research.swtch.com/glob Adapted from https://perl5.git.perl.org/perl.git/commit/33252c318625f3c6c89b816ee88481940e3e6f95
9ee50beaa	2180eab1f	Wed Apr 26 20:17:34 2017 -0600	The fix for Bug #722 contained a typo/thinko that resulted in the exit status being 0 when a command was killed by a signal other than SIGINT.  This fixes the signal handler setup so sudo will terminate with the same signal as the command.  Bug #784.
f7df25062	11c82e2f1	Mon Apr 24 10:05:38 2017 -0600	Add missing $(srcdir) prefix to shlib_exp definition.
11c82e2f1	18c8ce10e	Fri Apr 21 09:25:17 2017 -0600	Fix typo in killpg macro.
18c8ce10e	9f1afe23f	Fri Apr 21 07:28:45 2017 -0600	Fix the killpg macro for systems without killpg() in libc.
583fac17e	a245fedc2	Wed Apr 19 14:15:18 2017 -0600	Fix a use after free when the fqdn sudoOption is set and no hostname value is present in sssd.conf.
b63df21ba	453360666	Fri Mar 10 11:52:49 2017 -0700	Fix declaration of sudo_krb5_verify() in the case where krb5_verify_user() is not present.  Bug #777
453360666	a86d399ef	Fri Mar 10 11:49:07 2017 -0700	Use HAVE_STDBOOL_H to detect systems w/o stdbool.h. Bug #778
00b4732c9	a78814409	Fri Mar 3 11:20:56 2017 -0700	Add some casts to quiet gcc warnings on Solaris and remove a now-useless debug printf.
a78814409	6dba84dca	Fri Mar 3 11:20:25 2017 -0700	change debug info when suspending sudo
daa728fd8	143620bb2	Wed Feb 22 06:38:33 2017 -0700	Go back to using a Warning/Error prefix in the message printed to stderr for alias problems.  Requested by Tomas Sykora.
143620bb2	b9954fb9b	Tue Feb 21 09:03:57 2017 -0700	fix copyright years
e954facb9	d7f7cf7a7	Tue Feb 14 15:56:34 2017 -0700	List SELinux role/type for "sudo -l" with LDAP and SSSd backends. Also fix printing of the timeout.
47b82acd7	4dad181be	Tue Feb 14 13:19:45 2017 -0700	fix typo that prevented compilation on FreeBSD
f59327bc5	6263cc55a	Mon Feb 13 20:30:45 2017 -0700	Fix final test with a format > 2048 bytes. Keep track of tests run in the syslog() stub so we can detect if the stub is not being called.
359cacc40	8c1da9b69	Mon Feb 13 13:38:24 2017 -0700	Fix for including a sudoers file that begins with the letter \'i\'. The hack to determine whether we are parsing an include or includedir is no longer safe now that relative include paths are permitted. Bug #776.
26b8dc11b	413e1100b	Mon Jan 23 07:43:32 2017 -0800	Fix fdexec=never when a digest is present.
df03020c4	34ba901ba	Tue Jan 17 11:09:23 2017 -0700	Add support for SASL_MECH in ldap.conf; Bug #764
34ba901ba	57933a8ff	Tue Jan 17 10:10:47 2017 -0700	Fix documentation bug, the contents of env_file have never been subject to env_keep or env_check.  However, variables are only added if they have not already been preserved.
57933a8ff	b4f524fe7	Tue Jan 17 08:55:40 2017 -0700	Safer example for rule that can change non-root passwords.  GNU getopts allows options to follow arguments so we need to be able to deny things like "passwd root -q".  From Paul "Joey" Clark. Bug #772
deb4c3b19	1a59ab8b7	Mon Jan 16 11:12:56 2017 -0700	In sudo_unsetenv_nodebug(), decrement envp.env_len after removing the variable.  From Paul Zirnik of SUSE.
921ad88ab	414b28dc4	Fri Jan 13 16:30:44 2017 -0700	Fix typo, want vsnprintf not snprintf.
90e1f4ec3	0c3a8085b	Sat Jan 7 19:50:05 2017 -0700	Fix crash in visudo introduced in sudo 1.8.9 when an IP address or network is used in a host-based Defaults entry.  Bug #766
0d9255b2f	87d02bfe2	Tue Dec 20 10:24:55 2016 -0700	Fix logic bug when matching syslog priority and facility.
f847570ba	f9ea84383	Mon Dec 19 12:48:15 2016 -0700	Fix copyright year
e8f612ead	2884816c8	Fri Dec 2 09:34:08 2016 -0700	Fix a clang warning on macOS
334350af4	70d3e0e98	Wed Nov 30 07:32:59 2016 -0700	id_t is 64-bits on FreeBSD so use strtoll() there. Fixes the strtoid regress.
70d3e0e98	aaf6fff73	Tue Nov 29 19:46:59 2016 -0700	fix typo
aaf6fff73	7bcd0285e	Tue Nov 29 19:46:25 2016 -0700	Fix the "all" setting for verifypw and listpw; nopass would never be true even if all the user\'s entries had the NOPASSWD tag. Regression introduce in sudo 1.8.17.  Bug #762
6c5936296	de0c5c48a	Mon Nov 21 06:37:23 2016 -1000	Add SUDO_DEBUG_INSTANCE_ERROR return value for sudo_debug_register() and check for it in places where we check the return value of sudo_debug_register().
0cde3f5de	cb7e82acc	Thu Nov 17 10:27:26 2016 -0700	Fix sign compare warning.
da7373372	c7d6521b4	Wed Nov 16 11:03:50 2016 -0700	Fix printing of sudoedit_follow in "sudo -l"
bdbb3e985	589e129c8	Tue Nov 15 10:15:36 2016 -0700	Add ASAN_CFLAGS and ASAN_LDFLAGS and use -Wc prefix in ASAN_LDFLAGS to prevent libtool from strippign them out. Avoid using ASAN flags when building sudo_noexec.so.
068f96a21	60bf13945	Mon Nov 14 11:04:29 2016 -0700	Unbreak sudo_noexec on macOS where shared libraries and dynamic modules are different.  We still want to install sudo_noexec.so without the "lib" prefix so some hackery is required.
07cc9d815	deb625976	Sun Nov 13 16:00:31 2016 -0700	Need to link sudo_noexec.so with -ldl for dlsym() on some platforms. Otherwise, the wordexp(3) wrapper will fail due to an undefined symbol.  Bug #761
17868f89d	1d9b8ca32	Tue Nov 8 14:35:23 2016 -0700	Fix a bug in host matching where a negated sudoHost entry would prevent other sudoHosts following it from matching.
75e29f163	a9715211a	Wed Nov 2 17:07:32 2016 -0600	Add file:linenumber prefix to all Defaults warnings so we can see them when running sudo too.  For LDAP/SSSD we print the sudoRole instead of the file name and omit the line number.
b5f444111	5a8b60e4b	Mon Oct 31 15:57:05 2016 -0600	The fix for Bug #408 broke editing of files in an include dir that have a syntax error.  Normally, visudo does not edit those files, but if a syntax error is detected in one, the user gets a chance to fix it.
5a8b60e4b	a3a545e41	Mon Oct 31 15:21:18 2016 -0600	Make a copy of the current sudoers path when assigning errorfile. Fixes a potential use after free in visudo when there is an error in one of the include files.
a3a545e41	e8af335eb	Mon Oct 31 13:36:35 2016 -0600	sudoers_debug_register() was not setting the active debug instance to sudoers_debug_instance when called from the I/O log plugin.  This is because it relied on sudo_debug_register to do that but sudoers_debug_parse_flags() doesn\'t set debug_files[] sudoers_debug_instance is already set (we can only init sudoers debug once).
e8af335eb	1fdcce7fa	Mon Oct 31 13:12:35 2016 -0600	Fix pasto when setting I/O plugin debug files
dbd525279	4c8988d48	Wed Oct 26 11:25:59 2016 -0600	Fix incorrect strncmp() lengths.  The check for USERNAME was only looking at the first 5 characters (copy and paste error).  The check for SUDO_PS1 was not checking the trailing \'=\' character (off by one error).  Found by PVS-Studio.
6fa59b741	c18ff022e	Wed Oct 19 07:33:07 2016 -0600	There are now 14 tag values, not 10.  Don\'t bother mentioning the number since it keeps increasing.  Bug #759
8e49ce07f	237e2f964	Sun Oct 9 11:24:29 2016 -0600	Fix configure check for seccomp filter on Linux
0a68d6799	1bccd1418	Mon Sep 19 06:19:49 2016 -0600	Fix matching when no sudoRunAsUser is present in a sudoRole. If only a sudoRunAsGroup is present, match on the invoking user if the -g option was specified and the group matched. If no sudoRunAsGroup is present and the -g option was specified, allow it if it matches the passwd gid of the runas user. This matches the behavior of the sudoers backend.
d64153967	fb32867e4	Thu Sep 15 11:29:27 2016 -0600	Fix printing of the default runas user when a RunAsGroup is specified but no RunAsUser is present.
37099a6e7	394485f27	Thu Sep 15 05:54:53 2016 -0600	Fix underflow in get_ipa_hostname() when trimming trailing whitespace.
c73dec723	7687dd652	Tue Sep 13 09:06:25 2016 -0600	Move valid domain name check into a new valid_domain() function. Fix memory leak if getdomainname(2) fails and avoid using heap garbage for the domain name matching in this case.
f7bd14f70	ead485b96	Fri Sep 9 16:29:37 2016 -0600	Bug #757
ead485b96	3f022419a	Fri Sep 9 16:26:22 2016 -0600	Fix typo that broke short host name matching when the fqdn flag is enabled.  Bug #757
fc7e2a98f	b80309e6d	Wed Sep 7 11:02:25 2016 -0600	Fix for Bug #756
b80309e6d	43084d8f9	Mon Sep 5 19:44:46 2016 -0600	In sudoers_main() avoid setting rval prematurely.  Prevents a crash when auditing fails after successfully authenticating.  Bug #756
40d0ecc7d	5b86d2d29	Fri Sep 2 08:05:07 2016 -0600	Don\'t disable large file support for Linux, just SVR4-style /proc. Otherwise, stat(2) may fail on Linux when running a 32-bit sudo on a 64-bit machine.  Bug #755
04340eea6	c9572db75	Thu Sep 1 08:23:19 2016 -0600	If get_process_ttyname() fails for errno != ENOENT, just warn instead of making it a fatal error.  Bug #755
e147ba1fe	a9570e64f	Wed Aug 31 08:39:26 2016 -0600	Use W_EXITCODE to construct the wait status if sudo could not execute the command.  Fixes the sudo exit value for exec(3) failure.
a9570e64f	b610137ef	Wed Aug 31 08:34:07 2016 -0600	fix brace style
12ab1383a	5b51b7f11	Mon Aug 29 10:42:17 2016 -0600	Mention "sudo -l command" bug fix.
5b51b7f11	7918f7e7e	Mon Aug 29 10:04:24 2016 -0600	Fix "sudo -l command" in the LDAP and SSS backends when the command is not allowed.
c50b83525	a246c9570	Thu Aug 25 13:24:03 2016 -0600	Move SIGPIPE bug fix to 1.8.18 where it belongs
a246c9570	c5cfc9584	Thu Aug 25 10:36:53 2016 -0600	Fix memset size typo in previous commit.
c5cfc9584	99b969979	Thu Aug 25 08:33:07 2016 -0600	Add regress for check_defaults() use-after-free bug.
99b969979	403b904ab	Thu Aug 25 08:32:45 2016 -0600	Fix use-after-free in check_defaults(), reported by Radovan Sroka of RedHat.
403b904ab	7625f0684	Wed Aug 24 09:01:28 2016 -0600	SIGPIPE bug fix
d54148bbd	5a432b961	Mon Aug 22 07:13:02 2016 -0600	Fix appending to make_opts
5a432b961	8d89d8395	Mon Aug 22 06:32:54 2016 -0600	Add Bug #753 and fix reference to Bug #752.
ed18d0d5f	9ccd26084	Wed Aug 17 07:22:51 2016 -0600	Make the behavior when we cannot write to a log or audit file configurable.  File log failures are ignored by default for consistency with syslog.  Audit errors are ignored by default to allow the admin to fix the issue.  I/O log file errors are still fatal by default since if I/O logging is activated it is usually to have an audit trail. Bug #751
9ccd26084	043b3d223	Mon Aug 15 07:25:18 2016 -0600	Make sure we print an error message to stderr (and not just send mail) if do_logfile() fails.  Bug #751
4352bb9ca	383debee9	Thu Jul 28 06:23:39 2016 -0600	Add function name in "command resumed" debug message
4f47a2ad7	a014a2abd	Wed Jul 27 16:17:41 2016 -0600	Explicitly check for a continued process with waitpid(2).  Otherwise, waitpid() will return 0 when the command is resumed after being suspended, which we were treating the same as -1.  Fixes suspend and resume on Linux and probably others.
a014a2abd	16551031f	Wed Jul 27 15:03:48 2016 -0600	Fix --with-fqdn, the value should be NULL since it is a flag.
bf82b3f2b	266357511	Mon Jul 25 10:26:54 2016 -0600	On systems that lack the O_NOFOLLOW open(2) flag, check in sudo_edit_open() whether the path to be opened is symlink before opening it.  This is racey but we detect losing the last post-open and it is better to fail early if possible.  When editing a link to a non-existent file, a zero-length file will be left behind but it is too dangerous to try and remove it after the fact. Bug #753
266357511	2c21663b2	Mon Jul 25 10:22:29 2016 -0600	Update debug_decl for sudo_edit_openat_nofollow() Remove unused variables when O_NOFOLLOW is not present.
684161618	1349bb760	Wed Jul 20 13:35:04 2016 -0600	Fix regression that would cause early defaults entries to be set multiple times.
d92a396da	36b18c6e6	Mon Jul 18 12:20:46 2016 -0600	add debug_decl for cb_runas_default and cb_sudoers_locale
eae8bc9d5	73b0ac4bc	Sat Jul 16 20:59:59 2016 -0600	Fix typo introduced in last commit to fix fill_args() overflow check.
73b0ac4bc	88ba54f47	Sat Jul 16 20:54:07 2016 -0600	Fix underflow checl in fill_args().
88ba54f47	0f816c440	Sat Jul 16 20:12:17 2016 -0600	Make sure we account for the trailing NUL when computing arg_size in fill_args().  Bug #752
7bfe2e796	5a176e850	Thu Jun 30 12:40:19 2016 -0600	Set the sudoers locale before opening the sudoers file. Previously the sudoers locale was used when evaluating sudoers but not during the inital parse.  Bug #748
5a176e850	c56d52ea6	Thu Jun 30 12:38:30 2016 -0600	Add debugging
9c7680e01	66ab525f1	Mon Jun 27 05:48:19 2016 -0600	Some versions of HP-UX make will ignore suffix rules if they are empty.
66ab525f1	f683cbd58	Thu Jun 23 11:27:59 2016 -0600	Don\'t skip debug printfs in handle_sigchld() just because execve() returned an error.
ed9b457eb	f98b481af	Wed Jun 22 10:21:29 2016 -0600	Set user groups in exec_setup() if they were not already set by policy_init_session().  Bug #749
6c7eb07e0	72f18cff9	Wed Jun 15 05:14:33 2016 -0600	Fix typo; cn=default should be cn=defaults
63a242889	e2de0027d	Thu Jun 9 12:25:36 2016 -0600	Bug #746
e2de0027d	74c2dc780	Thu Jun 9 11:41:09 2016 -0600	When matching paths with glob(3), check returned matches against user_cmnd first if it is fully-qualified.  This avoids a lot of needless stat(2) calls and avoids a mismatch between safe_cmnd and argv[0] if there are multiple matches with the same inode/dev due to links.  Bug #746.
74c2dc780	ce28b15ec	Thu Jun 9 11:00:02 2016 -0600	Add execve failure in pty bug fix.
8a86233c1	1ec4d9918	Thu Jun 9 10:50:58 2016 -0600	In handle_sigchld() fix the return value when we\'ve already received an exec error.  We don\'t want to overwrite the error status but we do need to indicate that the command is no longer running. Fixes as hang on execve(2) error when running in a pty.
1ec4d9918	12ab5b810	Thu Jun 9 10:48:59 2016 -0600	Move sudo_debug_execve() call into sudo_execve().
1052a7205	734b43c6b	Tue Jun 7 13:06:27 2016 -0600	Fix setting of hard stack limit when stack_hard is not specified in /etc/security/limits.  When 64-bit resource limits are supported we can use the default value of 8388608 512-byte blocks directly. We should only resort to using RLIM_SAVED_MAX for 32-bit resource limits.
fc517ba9f	6c3c03ea2	Wed Jun 1 12:38:53 2016 -0600	Back out cfa26b99228f, it was already fixed differently. Caught by regress checks.
638acc28c	77331392e	Tue May 31 13:17:38 2016 -0600	The sudoers.ldap manual is installed in section 4 or 5, not 1m or 8. Also fix the section for ldap.conf cross-references.
77331392e	461a419d0	Tue May 31 13:14:30 2016 -0600	Fix copy pasta, "sudoNotAfter" not "sudoNotBefore". Add missing word "order" in a sentence describing sudoOrder.
53ebf69af	e93b4aa68	Wed May 25 14:50:05 2016 -0600	fputs() is now specified as returning non-negative on success, not explicitly zero.  Fixes a failure on glibc.
223b251c1	994f86b40	Fri May 20 10:14:38 2016 -0600	Improve debug info in sudo_ev_add() and sudo_ev_del()
fb247aa76	3b6cb9d65	Tue May 17 08:19:21 2016 -0600	I/O logging bug fix
3b6cb9d65	eb4510597	Tue May 17 08:16:43 2016 -0600	Don\'t use SUDO_EVLOOP_NONBLOCK when flushing buffers at pty close time, only when the user suspends sudo.  Fixes a problem where all buffers might not get flushed at exit when logging I/O.  Reproducible via "sudo tar cf - foo | (cd /tmp && sudo tar xf -)" on OpenBSD.
67eb6dad0	787912fa9	Sat May 14 19:40:12 2016 -0600	SELinux fixes in 1.8.17.
a2085809f	ea5bd18b9	Fri May 13 06:40:59 2016 -0600	Fix last commit, now that argc is not reset we need to explicitly start the copy from argv[1].  From Daniel Kopecek
b0be9895d	d3622b0f2	Wed May 11 15:01:45 2016 -0600	Now that pam_open_session() failure is fatal we should print and log an error from it.  Bug #744
0568fa90c	334b8f36a	Sat May 7 07:57:15 2016 -0600	Fix memory leak in sudo_netgroup_lookup() in the non-error case. Coverity CID 104572, 104573, 104574, 104575.
334b8f36a	b84b2e680	Sat May 7 07:49:35 2016 -0600	Fix fd leak in sudo_krb5_copy_cc_file() if restore_perms() fails. Coverity CID 104571.
e99e3c26c	355cce457	Sat May 7 05:10:11 2016 -0600	In sudo_edit_create_tfiles(), fix fd leak if sudo_edit_mktemp() fails. Coverity CID 104114.
355cce457	d733dd778	Sat May 7 05:07:38 2016 -0600	Fix fd leak in sudo_edit_open_nonwritable() if dir_is_writable() returns an error.  Coverity CID 104113.
d733dd778	bbda2e7b5	Sat May 7 05:05:30 2016 -0600	Fix memory leak of sesh_args in selinux_edit_copy_tfiles(). Coverity CID 104112.
bbda2e7b5	0f359e038	Sat May 7 04:59:56 2016 -0600	Fix memory leak in get_editor() if resolve_editor() fails with an error.  Coverity CID 104107.
0f359e038	96f5fe4cd	Sat May 7 04:57:11 2016 -0600	Fix memory leak on error if sudo_new_key_val() fails. Coverity CID 104103.
0ecc6025a	c56a812ea	Sat May 7 04:33:45 2016 -0600	Fix logic inversion in sudoers_gc_remove(), currently unused. Coverity CID 104568
5ee1e5bbc	7a86430d4	Fri May 6 14:30:46 2016 -0600	Newer versions of Ubuntu have switched from using the "admin" group to the "sudo" group to align with Debian.  create_admin_success_flag() now accepts either one. https://bugs.launchpad.net/ubuntu/+source/sudo/+bug/1387347
cc82c3193	3b4f2bbff	Fri May 6 11:12:45 2016 -0600	Fix compilation error and export sample_policy struct. From Michael Evans
b4cb1c0a1	61c53c8e6	Fri May 6 09:23:22 2016 -0600	Fix memory leaks in resolve_editor() in the error path. Coverity CID 104109, 104110
61c53c8e6	0690793c2	Fri May 6 09:17:14 2016 -0600	Fix memory leak of gid_list in sudoers_policy_exec_setup() in the error path.  Coverity CID 104111.
0690793c2	7a5149d73	Fri May 6 09:12:39 2016 -0600	Fix fd leak in do_logfile() if we fail to lock the log file. Coverity CID 104115.
7a5149d73	4bfdf0c2b	Fri May 6 08:22:03 2016 -0600	Fix memory leak of sss_result in sudo_sss_lookup() Coverity CID 104106
4bfdf0c2b	444d2a5c3	Fri May 6 08:11:34 2016 -0600	Fix fd leak in open_io_fd() if gzdopen/fdopen fails. Coverity CID 104105
444d2a5c3	562b5cb59	Fri May 6 08:07:40 2016 -0600	Fix fd leak in io_nextid() in error path. Coverity CID 104104
20ff6023a	2152f053b	Wed May 4 11:15:20 2016 -0600	Fix cut and paste error when checking cols for 0. Coverity CID 104081
2152f053b	a152afaeb	Wed May 4 09:15:12 2016 -0600	Use a single debug message for cache hit or store to avoid another situation where they get out of sync.  Bug #743
a152afaeb	9d5c6fbd6	Wed May 4 08:55:21 2016 -0600	Sync the "cache hit" debug messages with the "cached" debug messages. This fixes a bug where we could dereference a NULL pointer when we look up a negative cached entry which is stored as a NULL passwd or group struct pointer.  Bug #743.
57b1dc5e1	3e9702580	Tue Apr 26 14:39:42 2016 -0600	Add missing newline when logging to a file (not syslog) and loglinelen is set to a non-positive number.  Bug #742
3e9702580	b4309d4ae	Mon Apr 25 09:58:32 2016 -0600	style fix; fork_cmnd should start on a new line
48dff8408	935367260	Wed Mar 9 09:39:46 2016 -0700	Work around an ambiguity in the PAM spec with respect to the conversation function.  It is not clear whether the "struct pam_message **msg" is an array of pointers or a pointer to an array.  Linux-PAM and OpenPAM use an array of pointers while Solaris/HP-UX/AIX uses a pointer to an array. Bug #726.
f5b8ad480	514c62fc2	Sat Feb 27 16:56:56 2016 -0700	Bug #738
547a9b7d9	95dd64ea7	Fri Feb 26 10:52:55 2016 -0700	Fix negation of character classes.
95dd64ea7	5dd7ac20e	Fri Feb 26 09:32:08 2016 -0700	Fix the check for whether a user is allowed to lists another user\'s privileges.  The "matched" variable is not boolean, it can also have the value UNSPEC so we need to check explicitly for true. Bug #738
5dd7ac20e	4b079ee7e	Fri Feb 26 09:30:31 2016 -0700	Log the number of PAM messages in the conversation function at debug level.
4b079ee7e	1d796d629	Wed Feb 24 16:00:08 2016 -0700	Don\'t check for posix_spawn() or posix_spawnp() if we were unable to find spawn.h.  This should only be a problem on systems with broken headers.  Bug #730
99978e4a7	47adf0d3c	Mon Feb 22 11:07:33 2016 -0700	Fix documented bug with duplicate role names and turn on perl warnings. Based on a diff from Aaron Peschel
8509229eb	4f7b0b115	Fri Feb 19 13:37:43 2016 -0700	Add a note that --with-solaris-audit is only for Solaris 11 and above.  Bug #737
42548a1b0	6cbba7d66	Thu Feb 18 16:13:51 2016 -0700	src/load_plugins.c needs _PATH_SUDO_CONF so allow it to be overridden via the Makefile like other consumers of _PATH_SUDO_CONF.  Bug #735
60ea106cc	6635f97b3	Wed Jan 27 09:20:04 2016 -0700	Add missing return when user is not found in sudo_sss_result_get(). Previously we fell through to the default case which just logged a debug message and returned so this just avoids the extra (generic) debug message.
6635f97b3	5507b2328	Tue Jan 26 14:35:14 2016 -0700	Fix a warning on AIX.
c28f59271	41a32a1c5	Fri Jan 22 17:04:59 2016 -0700	Additional debugging for pwutil functions.
5016fa23d	7ed519125	Thu Jan 21 07:43:25 2016 -0700	When parsing debug entries, don\'t make a lower value override a higher one.  For example, for "pcomm@debug,all@warn" the "all@warn" should not set pcomm to "warn" when it is already at "debug".
5bae35c05	ec37504df	Wed Jan 20 15:09:32 2016 -0700	Fix off by one error in new SET_FLAG macro.
4bcef637f	5a77989a3	Wed Jan 13 11:10:33 2016 -0700	Work around the buggy pread(2) on 32-bit HP-UX 11.00 by using pread64() on that platform.
f97eba71f	55fdf66c1	Tue Jan 12 14:28:58 2016 -0700	Add missing sudo_debug_exit_ssize_t_v1 symbol.
0f991ff78	089b468de	Mon Jan 11 15:54:02 2016 -0700	Use user_runhost and user_srunhost instead of user_host and user_shost. Fixes "sudo -l -h other_host" for LDAP and sssd.
9308d05e7	14b454cc0	Mon Jan 11 16:52:52 2016 -0700	Fix free() of invalid pointer introduced in the commit that stripped whitespace between a \'!\' and the name in a sudoOption.
14b454cc0	051fe2d4c	Mon Jan 11 16:44:05 2016 -0700	Fix free() of invalid pointer introduced in the commit that stripped whitespace between a \'!\' and the name in a sudoOption.
68c1073fe	39db87e62	Sun Jan 10 18:31:29 2016 -0700	Rewritten sudoedit_checkdir support that checks all the dirs in the path and refuses to follow symlinks in writable directories. This is a better fix for CVE-2015-5602. Adapted from a diff by Ben Hutchings.  Bug #707
330a20969	88a634b7f	Thu Dec 24 08:26:26 2015 -0700	Fix compilation with --disable-shared
8b12390ab	c6dad0001	Sun Nov 1 15:13:28 2015 -0700	Add debug_return_ssize_t
c6dad0001	c752d91a3	Sun Nov 1 15:08:50 2015 -0700	Avoid compilation error on Solaris 10 with Stun Studio 12. Bug #727
7fd8a7df3	a012fba17	Sat Oct 31 09:10:58 2015 -0600	Mention ssp configure fix.
640e867db	448f7f25f	Fri Oct 30 10:11:55 2015 -0600	Don\'t use CPPFLAGS for the -fstack-protector check.  Otherwise on systems with _FORTIFY_SOURCE support we\'ll get an error due to the lack of optimization flags.  Bug #725
e244b0cda	202dd1ccf	Sun Oct 25 09:10:15 2015 -0600	Fix the check for whether to include 32-bit arch in Mac OS X packages.
04457ecee	52ec12f52	Mon Sep 28 12:28:18 2015 -0600	Set active debug instance to sudo_debug_instance() during the conversation function.
99322bcf3	9486afb4e	Sat Sep 26 11:02:24 2015 -0600	Bug #722
9486afb4e	7b7db55db	Sat Sep 26 10:53:16 2015 -0600	When the command sudo is running is killed by a signal, sudo will now send itself the same signal with the default signal handler instead of exiting.  The bash shell appears to ignore some signals, e.g.  SIGINT, unless the command is killed by that signal.  This makes the behavior of commands run under sudo the same as without sudo when bash is the shell.  Bug #722
0649a261e	2c7ff33ea	Thu Sep 24 13:43:17 2015 -0600	Fix passing of the callback pointer to the conversation function. This was preventing the on_suspend and on_resume functions from being called on PAM systems.
118680eab	824021b51	Thu Sep 24 10:52:44 2015 -0600	Cast sizeof(entry) to off_t before making it a negative offset for lseek().  Fixes "sudo -k" on Solaris and probably others.
0cfce655b	71d024632	Mon Sep 21 15:07:00 2015 -0600	Fix potential double free of the cookie when sudo is suspended at the password prompt.
43fd191cf	3ac17b302	Tue Sep 15 13:36:34 2015 -0600	Bug #719
3ac17b302	3f6f1cd15	Tue Sep 15 12:24:19 2015 -0600	SIGHUP is now relayed to the command.  Bug #719
3f6f1cd15	b12500993	Tue Sep 15 10:30:36 2015 -0600	When a terminal device is closed, SIGHUP is sent to the controlling process associated with that terminal.  It is not sent to the entire process group so sudo needs to relay SIGHUP to the command when it is not being run in a new pty.  Bug #719
b12500993	b6cb1b65c	Tue Sep 15 09:50:35 2015 -0600	Mention visudo bug in 1.8.14
69d51b759	d08faa73a	Wed Sep 9 10:52:23 2015 -0600	Bug #713
d08faa73a	27c2a3d15	Wed Sep 9 10:50:21 2015 -0600	Fill in cstat if exec_setup() fails.  Previously it was only filled in for an execve() failure.  Fixes an unkillable sudo process when exec_setup() fails and I/O logging is enabled.
27c2a3d15	0dbfbee03	Wed Sep 9 10:45:56 2015 -0600	Fix running commands as non-root when neither setresuid() not setreuid() are available.  At this point we are already root so setuid() must succeed.  Bug #713
2042aa2b7	3fd97f6ba	Wed Sep 9 09:57:10 2015 -0600	Mention time stamp file locking changes, fix some spelling.
333faa20e	7df248716	Fri Aug 21 11:25:02 2015 -0600	When parsing def_editor, break out of the loop when we find the first valid editor.  Bug #714
db5376001	ad9a51bd9	Mon Aug 10 10:56:47 2015 -0600	Sprinkle some debugging.
796911b3f	329a8dee8	Fri Aug 7 12:37:15 2015 -0600	Emphasize that wildcards are not regexps.  Bug #692
329a8dee8	dc5ccf473	Fri Aug 7 12:21:37 2015 -0600	Emphasize that wildcards in command line arguments are dangerous. Document the failings of the passwd example on GNU systems. Bug #691
918190fce	1965da8c3	Sun Aug 2 19:59:32 2015 -0600	Include sys/types.h for id_t.  Bug #711
d536626b1	01bfae5ba	Mon Jul 27 07:07:38 2015 -0600	Set sssd lib location to /usr/lib64 on 64-bit RHEL/Centos. Bug #710
ddd35459c	e941f97eb	Fri Jul 24 13:38:03 2015 -0600	The init.d files are generated from a .in file so we need to install from top_builddir not top_srcdir.  From Ross Burton.  Bug #708
e941f97eb	0765f5fe7	Wed Jul 22 19:11:32 2015 -0600	Replace two "return 0" with debug_return_bool(false).
0765f5fe7	620f8a33e	Wed Jul 22 06:21:21 2015 -0600	fix typo in previous commit
83d8cbf81	aeaa6a611	Tue Jul 21 15:20:49 2015 -0600	Fix errno value from get_process_ttyname() when no tty is present.
8f8485797	d96f8bcab	Mon Jul 20 20:16:14 2015 -0600	Fix creation of the timestamp file; bug #704
db8607fe4	6eb4d142e	Fri Jul 17 13:58:26 2015 -0600	Fix typo in sudo_sss_attrcpy() that caused a memory allocation error.
d4211081c	108bfb7af	Tue Jul 14 15:28:01 2015 -0600	Add some debugging printfs when malloc fails and we don\'t have an explicit call to sudo_warnx().
f2f5c2949	7187c19c8	Tue Jul 14 14:47:12 2015 -0600	Add line number to debug log for memory allocation errors.
7187c19c8	ff5b6dbb6	Tue Jul 14 14:00:18 2015 -0600	Add warning if calloc() fails. Add debugging for other unexpected errors.
d11ffce66	246063609	Thu Jul 9 11:36:51 2015 -0600	Fix linux_audit setting on non-multiarch Debian.
246063609	2f00f170f	Thu Jul 9 11:06:03 2015 -0600	Fix typo that broke the linux_audit dependency on Debian.
2f00f170f	43a57126e	Thu Jul 9 10:45:33 2015 -0600	Mention /proc/stat btime fix.
b73d96804	6c9e92aba	Thu Jul 9 10:10:34 2015 -0600	Sprinkle debugging for boottime.
854c08495	ef69b7c73	Mon Jul 6 13:56:39 2015 -0600	Fix utmp setup broken by commit be0ca60facf8
701534c63	7583e8d76	Fri Jul 3 07:06:29 2015 -0600	Fix typo in error message.
7583e8d76	d77941c2b	Thu Jul 2 14:06:16 2015 -0600	Bug #702 is the AIX timespec issue.
105f199f6	44f7ed3b1	Tue Jun 30 10:41:14 2015 -0600	Fix build on compilers w/o __func__ or __FUNCTION__
2b4e44f33	54f9de6cc	Sat Jun 27 14:01:09 2015 -0600	Fix entry for Joel Pelaez Jorge.
ea5ce39c9	d84757951	Thu Jun 25 09:12:15 2015 -0600	When checking whether the PAM prompt matches "Password:", also check for the untranslated version.  The PAM module might not be using the localized string even though it exists.  From Joel Pelaez Jorge. Fixes Bug #701
2aeeb54f3	d36e46cb6	Tue Jun 23 12:57:47 2015 -0600	Fix uninitialized variables warnings in error case when src file cannot be opened.  At least one of these is a false positive.
048e251ae	69a4af9e7	Fri Jun 19 09:54:12 2015 -0600	Fix check for strnlen() when cross-compiling.
ea34d0101	f43f53098	Mon Jun 15 13:32:48 2015 -0600	Use \\28 and \\29 instead of \\( and \\) in the ldap query as per RFC 2254.  Fixes netgroup queries on AIX.  From Steven Soulen.
db8aae12e	7107ce4d1	Mon Jun 8 16:49:09 2015 -0600	Fix underlining of "root" in -u option descriptions.  Bug #699
c0fa0e248	564eb7e7d	Fri Jun 5 13:18:48 2015 -0600	Add debugging output on memory alloc failure. Add missing checks in event_select.c for reallocarray() failure.
1100d91e8	dee7a6dda	Wed May 27 16:41:46 2015 -0600	Fix typo/thinko in static buffer conversion; use vsnprintf() not snprintf()
dee7a6dda	21f5753b7	Wed May 27 16:38:59 2015 -0600	Fix old gcc2 variadic macro support.
2bf454b74	46770c958	Wed May 27 09:51:54 2015 -0600	Use non-exiting allocators in the redblack tree and fix the fallout. Also switch to non-exiting allocators in affected code blocks.
c5e4c3055	4131449ff	Wed May 27 09:48:31 2015 -0600	Fix typo, efree vs. free.
11840308c	82286d8b7	Tue May 26 14:14:06 2015 -0600	Fix sudo_strnlen() prototype.
8437e3606	49d56f323	Tue May 26 14:01:37 2015 -0600	Add missing sudo_ prefix and include sudo_compat.h.
fc7143760	6ab599415	Mon May 11 13:34:41 2015 -0600	Fix indentation of -a flag help line.
6ab599415	0c77de559	Mon May 11 13:26:16 2015 -0600	Fix compilation when HAVE_DECL_SIG2STR_MAX is not defined.
eea4e1afd	caf5d45e0	Thu May 7 10:40:46 2015 -0600	Convert two debug_return_int to debug_return_bool.
caf5d45e0	9c9ff3dc4	Thu May 7 10:33:23 2015 -0600	Previously, debug_return_bool was the same as debug_return_int except that it logged true/false for 1/0.  However, this appears to trigger a bug in some compilers.  To avoid this, debug_return_bool now uses bool, not int.  Callers that were passing it an int have been converted to use debug_return_int instead.
6f8af4d26	e98778b2a	Wed Apr 22 13:30:58 2015 -0600	Split variable declaration out of debug_decl into debug_decl_vars() so we can use it in main() when we know sudo_debug_enter() cannot succeed.
3de14196c	db7404898	Tue Apr 14 09:50:40 2015 -0600	Add some ldap_err2string() debugging when the LDAP search fails. Adapted from a diff from Steven Soulen.
68339fa9c	a79f3790e	Thu Apr 9 18:14:38 2015 -0600	Work around a bug in pp that caused a warning when exampledir is a subdir of docdir.
6d63ca32f	f63896e7d	Tue Apr 7 10:15:45 2015 -0600	Fix setting of pp_rpm_version when there is no patchlevel present. Also tighten up the regexp for pp_rpm_release.
cd669526e	15037d3b7	Sun Mar 22 13:09:26 2015 -0600	Fix "mandoc -Tlint" warnings. Sync AUTHORS section in man pages. Regenerate all man pages.
15037d3b7	3b3098440	Sun Mar 22 08:16:22 2015 -0600	Make libsudo_util depend on libintl instead of requiring users of libsudo_util to link with libintl directly.  Bug #690
3b3098440	cfeda97b0	Sat Mar 21 15:41:59 2015 -0600	Use saved errno in vlog_warning() before calling sudo_vwarn_nodebug(). Fixes the error message printed if set_perms() fails.
be4872f69	d8d6fae79	Mon Mar 16 20:19:24 2015 -0600	For sudoedit, run the editor with the user\'s original environment as per the documentation (and as in sudo 1.7.x).  Bug #688
8088806bd	ef1b2c3be	Tue Mar 10 11:09:25 2015 -0600	Update function names in debug_decl.
35dcb05a5	2dd0540ad	Thu Mar 5 12:27:26 2015 -0700	Fix symbol name collision with systems that have their own sha2 implementation.  This can result in PAM using the wrong sha2 implementation on Solaris systems configured to use SHA512 for passwords.
3c79ea75b	ee72cba93	Mon Mar 2 14:28:46 2015 -0700	Fix compilation error on systems without futimes().
ea514dc39	c9d4e1084	Mon Mar 2 13:58:45 2015 -0700	Fix compiler warning on systems where mode_t is not unsigned int, such as 32-bit Solaris.
c9d4e1084	b78a985bf	Mon Mar 2 11:37:43 2015 -0700	Fix logic for verifypw/listpw all in sudoers LDAP and sssd.
b78a985bf	f25cf9967	Mon Mar 2 08:49:04 2015 -0700	Fix cut & pasto that prevented the SIGPIPE handler from being restored before returning from tgetpass().  From mancha
233783511	f95d76258	Fri Feb 27 07:10:20 2015 -0700	Define YYDEBUG to 0 if not already defined so we can protect use of sudoersdebug with "#if YYDEBUG" like the generated parser does. From David Michael.
23f4e49f4	a604f0f02	Mon Feb 23 15:40:37 2015 -0700	Plug memory leak when debug file cannot be opened. Use %zu printf format now that our snprintf support it.
1ce9dd5e0	b5831d55d	Mon Feb 23 06:32:43 2015 -0700	Fix cast.
2ed7f2dd9	1ae2e5514	Wed Feb 18 16:17:24 2015 -0700	Fix packaging of the example dir.
1ae2e5514	166db8eeb	Wed Feb 18 06:24:31 2015 -0700	Fix mkstemps() extension handling.  Sudoedit will now preserve the extension properly when the system libc lacks mkstemps().
8cae9876f	915e08eec	Tue Feb 17 06:21:06 2015 -0700	Include unistd.h in siglist.c and signame.c to get gid_t which is used by sudo_compat.h.  Bug #686
117a30fac	00f663d54	Tue Feb 10 09:50:09 2015 -0700	Move example dir under the doc dir to conform to Debian guidelines. Bug #682.
0414ea457	2e32bb10f	Mon Feb 9 11:39:28 2015 -0700	Fix typos.
2e32bb10f	9206ba54c	Mon Feb 9 08:52:19 2015 -0700	Fix compilation on systems w/o __dso_public
de1181619	0008747be	Fri Feb 6 10:56:52 2015 -0700	Mention crash fixes.
cebd92a88	67eba7e53	Thu Feb 5 11:17:26 2015 -0700	Fix a potential crash when getpwnam() of the running user fails and we don\'t replace the negative cached entry with a faked up one. From Stephane Chazelas
bb19428fc	fd149e632	Mon Feb 2 14:36:38 2015 -0700	Fix check for SIZE_MAX, which should be in stdint.h not limits.h.
59ab26dbc	e71726d0f	Sun Feb 1 08:24:49 2015 -0700	Go back to a 2 args debug_decl and just use the "default" instance, now renamed "active".
0ac881ba4	1517d18b1	Fri Jan 30 10:45:15 2015 -0700	Avoid a cppcheck warning about undefined behavior (using the address of a stack buffer - 1) and fix a memory leak of the iov when doing nl->crnl conversion.
770e6ca19	4dd2a3c6b	Fri Jan 30 09:23:30 2015 -0700	Fix handling of partial writes from writev() which can occur with large output buffers.
2188c83a2	721cab85e	Wed Jan 21 10:08:41 2015 -0700	If sudo_debug_register() fails return SUDO_DEBUG_INSTANCE_INITIALIZER, not -1.  Otherwise we could end up setting the instance to -1 which is invalid.
721cab85e	716e6a991	Wed Jan 21 08:51:41 2015 -0700	Fix typo.
88c4a9668	d0c333969	Wed Dec 10 14:06:34 2014 -0700	fnmatch fix
d0c333969	b1dc5c54d	Wed Dec 10 14:00:12 2014 -0700	Remove artificial limit on length of pattern and string.  It is possible to use fnmatch() on things other than paths (such as arguments) so a limit of PATH_MAX does not make sense.  Fixes a bug where rules would fail to match if the length of the arguments were larger than PATH_MAX (usually 1024).
9d3fe082f	e0d927a98	Thu Nov 27 09:51:06 2014 -0700	Reference bugzilla.sudo.ws
29039859b	552dbe525	Tue Nov 18 14:05:51 2014 -0700	Defer registration of the SIGCHLD handler until just before we exec the command.  Fixes a problem where pam_gnome_keyring installs its own SIGCHLD handler and may not restore the original one.  As a result, we now have to explicitly wait for the askpass helper to finish.  Bug #657
3870fdf62	0c88ecd3b	Fri Nov 14 16:31:56 2014 -0700	Fix potential NULL pointer deref found by cppcheck.
1c96c5ec3	cafd7baa2	Fri Nov 14 14:56:29 2014 -0700	Fix typo in hook return value check.
d956785e9	b4432df5e	Fri Nov 14 13:11:11 2014 -0700	Mention fix for bug #678
832a4dee6	ae00eb719	Wed Nov 12 20:33:41 2014 -0700	In set_fqdn() we neeed to set user_runhost/user_srunhost at the same time we set user_host/user_shost since that is what hostlist_matches() uses.  Bug #678
4d04c5644	fbac05467	Tue Nov 11 15:29:19 2014 -0700	No need to keep specifying ".Nm foo" since the Nm macro remembers the argument it was first called with and uses it if none is specified.  Also fix a few minor formatting errors and regen bulleted lists in the .man.in files.
328429832	e71c646c9	Tue Nov 11 14:15:47 2014 -0700	Mention sudo.conf use for debugging
21166d4da	be2de71df	Tue Nov 4 09:24:41 2014 -0700	Make sure that SIGCHLD is not treated as a user-generated signal in which case it could be ignored.  Bug #676
2eed95639	55098ff6e	Fri Oct 31 06:57:17 2014 -0600	Use a static buffer for sudo_debug_execve2() if possible.
55098ff6e	bbf3c0832	Wed Oct 29 10:54:40 2014 -0600	Mark the putenv(), setenv() and unsetenv() symbols as global, not hidden.  Fixes a mismatch where a plugin (or its loaded dso) would call setenv() to set a variables but be unable to find it later with getenv().
bbf3c0832	53d4a02a4	Tue Oct 28 14:45:39 2014 -0600	Fix install-nls target from builddir.
53d4a02a4	ef6dfb3ce	Tue Oct 28 14:14:22 2014 -0600	Fix dependency on sudo.pp, it needs to relative to srcdir.
ef6dfb3ce	67c7c7f9d	Tue Oct 28 07:36:08 2014 -0600	Adapt to new debug subsystem registration.
1be81d572	f730b28ce	Mon Oct 27 16:31:33 2014 -0600	Fix path settings broken in rev 9731.
9d6e1a57d	0982f7838	Mon Oct 27 16:06:20 2014 -0600	Add sudoers_debug_deregister() and use it instead of calling sudo_debug_deregister() directly.
0d6895cbd	7c295e40d	Mon Oct 27 14:21:27 2014 -0600	fix comment typo
adfdad9ae	d5fdd1ea0	Mon Oct 27 05:26:08 2014 -0600	Version the symbols for sudo_debug.c now that the API is stable.
d5fdd1ea0	6b1b734ff	Sun Oct 26 08:33:09 2014 -0600	Go back to parsing sudo.conf in place for settings and paths and improve debugging info for unsupported entries and parse errors.
6b1b734ff	f8bd2af4d	Sun Oct 26 08:33:08 2014 -0600	Add a flag argument to sudo_conf_read() so we can decide which bits get parsed.  This lets us parse Debug statements first and init the debug subsystem early.
6e8b84fda	34d9cfe1c	Fri Oct 24 14:25:10 2014 -0600	Fix a packaging problem with the sudoedit man page link on Debian.
34d9cfe1c	fd8cf2c89	Fri Oct 24 12:50:12 2014 -0600	Initialize the debug subsystem in sudoers early.  Currently this means iterating over the settings list twice.
fd8cf2c89	4bf641df6	Fri Oct 24 11:28:39 2014 -0600	No need to convert sudoedit -> sudo in sudo_debug_get_instance() as we store the actual program name and only do the sudoedit -> sudo conversion when reading the sudo.conf file.  Fixes debugging when invoked as sudoedit.
4bf641df6	a2e9d66be	Fri Oct 24 11:17:48 2014 -0600	In the plugin registers with the debug framework at open time, the sudo front-end will now set the default debug instance appropriately before calling into the plugin.  This means the plugin no longer needs to do the sudo_debug_set_default_instance() dance.
d0cc4d9e4	7dc2c8fa1	Thu Oct 23 15:44:03 2014 -0600	Fix inet_ntop() replacement on older systems without it. We only expose the prototype for net_ifs.c due to the use of socklen_t.
7dc2c8fa1	17a2a27e4	Thu Oct 23 14:37:29 2014 -0600	Dynamically allocate debug_fds bitmap and realloc as needed.
4baa7e6d2	935e48c6e	Thu Oct 23 13:43:17 2014 -0600	Replace sudo_debug_num_instances with sudo_debug_max_instance
935e48c6e	2a47abad2	Thu Oct 23 13:42:50 2014 -0600	Don\'t call into the debug subsystem after we\'ve deregistered the plugin\'s instance.
119c13d8b	2968ce060	Thu Oct 23 10:16:13 2014 -0600	Fix includes order.
386055271	fe9e035cc	Thu Oct 23 09:50:29 2014 -0600	Fix typo in unset.
fe9e035cc	1ca52382a	Thu Oct 23 09:40:36 2014 -0600	Set debug instance for standalone programs.
1ca52382a	6d2be1fd6	Thu Oct 23 09:26:13 2014 -0600	Fix compilation issues, fallout from the debug changes.
323b4a814	5270ebf1f	Thu Oct 23 07:28:36 2014 -0600	Update with debug system changes and revent bug fixes.
5270ebf1f	8db5f2939	Thu Oct 23 06:36:50 2014 -0600	When registering with the debug subsystem, the caller now passes in an arrary of ints that gets filled in with the subsytem IDs to be used in debug_decl.
8db5f2939	e9914a91b	Thu Oct 23 06:19:30 2014 -0600	sudoers_debug_instance is now included in libparsesudoers so we don\'t need to declare it here.
e9914a91b	866cfc4fc	Wed Oct 22 13:30:52 2014 -0600	The sudoers plugin now defines its own list of debugging subsystem names and defines.
866cfc4fc	a7e724b75	Wed Oct 22 13:23:05 2014 -0600	Add support for multiple Debug lines per program.  Callers may register arbitrary debug facilities or use built-in defaults.  We now use separate Debug statements for plugins and programs.
a7e724b75	346ff6766	Wed Oct 22 13:20:32 2014 -0600	Change how sudo.conf is parsed.  We now do a quick parse and then set the values after the entire file has been parsed.  This lets us init the debug system earlier.  Plugin-specific debug flags are now stored in struct plugin_info and struct plugin_container and passed to the plugin via one or more debug_flags settings.
15f5af06d	38c7d7abc	Tue Oct 14 08:54:23 2014 -0600	Set locale to C for visudo and testsudoers regression tests. Bug #672
38c7d7abc	2c5239a3a	Mon Oct 13 08:33:25 2014 -0600	Fix logic bug.  We only want to return -1 from linux_audit_open() when audit_open() fails and errno is not one of EINVAL, EPROTONOSUPPORT, or EAFNOSUPPORT.  For those errno values, we return AUDIT_NOT_CONFIGURED which is not a fatal error.  Bug #671
2c5239a3a	8f1fb89d5	Sat Oct 11 16:45:07 2014 -0600	Add back fix for Bug #663
7a901d4c0	0be86df4d	Fri Oct 10 13:55:36 2014 -0600	Apple uses a different variant of the BASH_FUNC prefix for bash functions.
837fb1f81	1dd96778e	Tue Oct 7 13:50:53 2014 -0600	Only check stdin for the tty and avoid the check entirely if we don\'t have a way to get the tty from the kernel.  Bug #643
1dd96778e	dc6744215	Tue Oct 7 12:26:32 2014 -0600	Make a copy of ap in sudo_debug_vprintf2() in case the static buffer is not big enough and we need to call vasprintf().
dc6744215	1890f0fcd	Tue Oct 7 10:56:50 2014 -0600	Avoid comparing new cwd with old one if getcwd() failed. Bug #670
1890f0fcd	d7574a344	Tue Oct 7 10:11:08 2014 -0600	Fix debugging printout output for env_should_keep()
d7574a344	79f4471e4	Mon Oct 6 14:23:41 2014 -0600	Use INSTALL_OWNER instead of -O/-G flags so we can work with the autotools install-sh too.  Bug #669
1d7bab504	1faf2b595	Wed Oct 1 15:42:07 2014 -0600	Fix detection of functions in network libs like -lsocket, -lnsl and -linet when we have already added those libs to NET_LIBS. Fixes a problem where inet_pton() was not detected on Solaris.
1faf2b595	2f3ebce11	Wed Oct 1 15:09:44 2014 -0600	Mention --disable-shared-libutil fix.
0b0481fa3	05d3a4c5e	Wed Oct 1 14:32:30 2014 -0600	Instead of building libutil statically for --disable-shared-libutil, just treat it as a convenience library.  Do the same with sudoers for --enable-static-sudoers.  Fixes link errors on Solaris among others when --disable-shared-libutil is used.
1d0b5422a	b2e138bde	Wed Oct 1 09:30:17 2014 -0600	Include sys/types.h to get gid_t, etc used in sudo_compat.h. Fixes a build issue on Solaris.
b2e138bde	c823eb3ef	Mon Sep 29 15:33:39 2014 -0600	Fix cust & pasto in error message when there is a mismatch between the sudo and libc ttys.  From Diego Elio Petteno\'.  Bug #643
d92df7974	1073df76c	Wed Sep 24 09:18:54 2014 -0600	In pp_files_expand() set _target to be empty.  Fixes a problem with Solaris sh where simply using typeset doesn\'t causes the variable to be treated as local so we can inadvertantly inherit a value from a previous call.
1073df76c	8f75f65bb	Tue Sep 23 11:00:32 2014 -0600	Fix version for release.
6be0a820d	7ab40be5c	Sat Sep 20 09:35:51 2014 -0600	Bug 661
f5647654d	ae137ba55	Sat Sep 20 06:46:27 2014 -0600	Don\'t use SSP_CFLAGS or PIE_CFLAGS when building mksiglist/mksigname as they are built with the host compiler which may be different when cross-compiling.  From Gustavo Zacarias.  Bug 662.
109b2116c	52b675d74	Tue Sep 16 13:38:38 2014 -0600	Make nsswitch.conf bug fix description more accurrate.  It affects the "files" nsswitch source too.
52b675d74	15dee8745	Tue Sep 16 12:54:13 2014 -0600	Mention nsswitch.conf duplicate entry fix.
f9ac17776	326167bad	Mon Sep 15 07:40:33 2014 -0600	Fix infinite loop when mulitple sudoers entries are present in nsswitch.conf.  From Daniel Kopecek.
326167bad	d1fe802f0	Wed Sep 10 06:01:29 2014 -0600	Fix for bug #660
d1fe802f0	398a16c6a	Wed Sep 10 05:57:31 2014 -0600	Fix compilation on systems without openpty(), _getpty() or grantpt(). From Vasilyy Balyasnyy
e20475922	0f735f658	Mon Sep 8 16:24:32 2014 -0600	There is no longer a reason for the plugin to init the debug subsystem itself.  It will always be initialized by the front-end if needed.
4fa58d697	f6e738fee	Tue Sep 2 14:36:05 2014 -0600	Use a stack buffer for the debug message when possible, most are small.
0546f0b6a	8bc688188	Sun Aug 31 20:32:18 2014 -0600	Convert a debug printf to a user-visible warning.
73d5fb33e	152178e4b	Sun Aug 31 15:21:48 2014 -0600	Work around a bug in the HP C compiler.
ef11361ee	191a0569f	Tue Aug 26 15:47:48 2014 -0600	Fix osrelease sed expression.  It wasn\'t matching distros with a single digit version such as sles9.
3e13662f3	136e6e616	Tue Aug 26 12:05:09 2014 -0600	regen to fix version.
79f209dbd	4f1deee57	Mon Aug 25 11:30:03 2014 -0600	Fix restoration of effective uid/gid in command_details. This masked the effects an unset (really zero) egid. Bug 656
4f1deee57	5676d9874	Mon Aug 25 11:27:30 2014 -0600	Set runas egid to the same value as runas gid if egid not specified by the plugin.  Only affects new files created by sudoedit.  Bug #656
5676d9874	8ad53f458	Mon Aug 25 10:42:59 2014 -0600	Don\'t leak temp fd in sudo_edit_copy_tfiles(). Fix fd leak in error path in sudo_edit_copy_tfiles().
8ad53f458	db494700d	Fri Aug 22 15:23:42 2014 -0600	fix typo
a8f63191e	db35c7c0e	Thu Aug 21 15:42:35 2014 -0600	Sprinkle some debugging around uid/gid setting in sudoedit.
ffbc003b7	2c542178a	Thu Aug 21 09:23:34 2014 -0600	Fix typo, .em should be .Em
2246b1827	dbe0b213d	Mon Aug 18 16:35:58 2014 -0600	Don\'t recurse infinitely until we blow the stack when the debug file can\'t be opened in the front-end.  The conversation-type debug mode will be removed in the future.
dbe0b213d	fb82e823f	Fri Aug 15 16:46:24 2014 -0600	Only use the first two digits of the version number. Fixes a problem on RHEL 7 which has version numbers like 7.0.1406
fb82e823f	6d8c6ed37	Fri Aug 15 15:56:25 2014 -0600	Fix return value when kernel has no audit support.
53a251dc0	696080917	Fri Aug 8 14:33:22 2014 -0600	Add additional 1.8.11 changes and fix typos.
703263bf0	df0fd4153	Thu Aug 7 09:38:03 2014 -0600	Fix "sudo -C" when we have internal fds to preserve from closefrom().
d75d22e98	0a9e9016f	Wed Jul 30 15:47:15 2014 -0600	Fix exporting of asprintf/vasprintf symbols.
daf634b72	f99a91023	Tue Jul 29 10:52:43 2014 -0600	Only include functions in util.exp that are actually in the library. Fixes a problem on Solaris where undefined functions that are listed as exported in the map file result in a link error. Also make sure we use our glob.c if the system is missing glob().
d058611bd	787a89ed0	Mon Jul 28 06:22:52 2014 -0600	Fix compilation on systems w/o netgroups.
787a89ed0	6f77ffd7c	Sat Jul 26 06:07:34 2014 -0600	Back out old workaround for sudoedit hang when debugging was enabled.
6f77ffd7c	32a837623	Sat Jul 26 06:06:18 2014 -0600	Don\'t memcpy() the preserved_fds TAILQ as the pointers into the head will be wrong.  All we need to do is save the old command details and restore them after calling run_command().  Fixes a hang with sudoedit when debugging is enabled.
7e5a23974	8c86e5c11	Fri Jul 25 17:00:10 2014 -0600	If there the preserved fds list is empty, add a new element with TAILQ_INSERT_HEAD instead of TAILQ_INSERT_TAIL to avoid an infinite loop on AIX, Solaris and possibly others when debug mode is active.
742152447	f6fec0603	Fri Jul 25 09:42:41 2014 -0600	Remove pstat_getproc() path as pst_ucomm on HP-UX will return the target of a symbolic link and not the name of the link itself. Avoid using pr_fname on AIX for the same reason. Bug 654
f6fec0603	5ff2c8025	Fri Jul 25 09:37:58 2014 -0600	Add test for getprogname() and symbolic links; bug 654
28f6ee5f9	47835ff28	Tue Jul 22 14:53:15 2014 -0600	Fix NULL deref if base64_decode returns -1.
d7c309f70	2b104d6b3	Mon Jul 21 09:13:47 2014 -0600	Conver sudo_debug_write() to a macro
2b104d6b3	c6879683a	Thu Jul 17 08:40:26 2014 -0600	Fix man page post-processing; it was deleting more than intended.
96d1967ab	4bc4522ed	Mon Jul 14 09:08:50 2014 -0600	Avoid passing -no-fast-install to libtool as this results in the build dir being left in the library path of the installed executable. Instead, we remove the "lt-" prefix from the program name in initprogname() so that the regress test output is unaffected by libtool\'s binary wrapper.
4bc4522ed	00bac387b	Mon Jul 14 06:32:21 2014 -0600	Fix syntax error with some shells.
b5a6037a6	9f3caa5a6	Sun Jul 13 14:27:20 2014 -0600	Fix a pointer signednes warning calling base64_decode().
d86df074d	81a989fd1	Fri Jul 11 15:32:17 2014 -0600	Avoid packaging parent directories when they are system directories. Currently we just skip this when prefix is /usr
81a989fd1	06076e445	Fri Jul 11 11:02:05 2014 -0600	Fix typo: sudo.d -> sudoers.d.  From RedHat bz #726634
5c117d480	4ad98300d	Thu Jul 3 15:06:46 2014 -0600	Fix typos in utimes/futimes macros.
fb2b6e59f	4e1e76a4b	Tue Jul 1 17:16:12 2014 -0600	Fix sudo when --disable-shared configure option was specified.
67efcf092	fb60fd863	Sun Jun 29 07:34:51 2014 -0600	Fix my typos in the HP-UX libtool patch
d6948f5a4	2be0929f2	Fri Jun 27 11:48:07 2014 -0600	Fix regexp damage when renaming erecalloc() -> sudo_erecalloc()
2d61d38c2	c4c253847	Fri Jun 27 10:48:31 2014 -0600	Add sudo_ prefix to alloc.c functions and rename alloc.h -> sudo_alloc.h
c4c253847	8e088e65c	Fri Jun 27 10:39:49 2014 -0600	Remove extra sudo_ prefix from vfatalxnodebug and vfatalx_nodebug.
87c2fe5a3	4d37a4a16	Thu Jun 26 15:51:08 2014 -0600	Prefix all libc replacements with sudo_ and #define the real name to the sudo_ version.  That way we don\'t pollute the libc namespace.
fdda9b109	b5b75b2d8	Thu Jun 26 15:50:26 2014 -0600	Fix sssd compiler warnings and fix the sha2 digest support.
b5b75b2d8	7e24b8e65	Tue Jun 17 08:51:41 2014 -0600	Don\'t call gss_krb5_ccache_name() with a NULL pointer when restoring the old credential cache file name.  This can happen if there was no old name returned by gss_krb5_ccache_name().  Fixes a crash on kerberized LDAP on some platforms.
b121da2e2	d628e17ea	Tue May 27 10:51:31 2014 -0600	In handler_user_only() only forward the signal if it was not generated by the command.  This should fix a problem with programs that catch SIGTSTP, perform cleanup, and then re-send the signal to their process group (of which sudo is the leader).
e2efec5b3	45ff42eb9	Fri May 9 10:03:17 2014 -0600	lockf() is broken on the Hurd -- use flock instead Bug #647
45ff42eb9	9cdf7797c	Fri May 9 09:29:42 2014 -0600	Don\'t try to install the temporary sudoers file if we didn\'t edit it. By default, visudo does not edit files in a #includedir. Fixes a NULL pointer defef on GNU hurd; Bug #647
7f0b9eca0	4e333c516	Fri May 2 14:58:01 2014 -0600	Add debugging info for when we delete I/O events that still have buffered data in them.
4e333c516	a53946b02	Fri May 2 14:57:36 2014 -0600	Fix non-blocking mode.  We only want to exit the event loop when poll() or select() returns 0 and there are no active events.  This fixes a problem on some systems where the last buffer was not being written when the command exited.
a297a19fb	ffbe7d1da	Thu May 1 10:04:09 2014 -0600	Fix library order when linking binaries.
e61af9e6d	d3b432671	Mon Apr 28 08:36:22 2014 -0600	Fix fd leak on Linux when determing boot time.  This is usually masked by the closefrom() call in sudo.  From Jamie Anderson. Bug #645
7d91691e1	278a8ba39	Tue Apr 15 07:16:57 2014 -0600	Use PAM_REINITIALIZE_CRED instead of PAM_ESTABLISH_CRED when changing the user.  This is the correct flag to use with a program that changes the uid like su or sudo and fixes a role problem on Solaris.  From Gary Winiger; Bug #642
278a8ba39	a78da3748	Tue Apr 15 07:11:29 2014 -0600	pam_setcred should default to true; from Gary Winiger Bug #642
218aa1e59	27aff732f	Wed Apr 9 16:31:13 2014 -0600	Move the sha2 code into libreplace and add configure checks for SHA224Update in libc and libmd.  Solaris uses "void *" where we use "unsigned char *" so we need a check for that too.  Solaris sha2.h defines SHA224, SHA256, SHA384, and SHA512 so rename those tokens. Adapted from changes from Vladimir Marek in bug #641.
27aff732f	ecae6b4f9	Wed Apr 9 10:22:09 2014 -0600	Fix matching of uids and gids broken in sudo 1.8.9.
ecae6b4f9	b1cdb3708	Wed Apr 9 10:22:07 2014 -0600	Fix -P option in usage()
6a295400b	a1240a541	Tue Apr 1 16:42:13 2014 -0600	Make "internal error, %s overflow" arguments consistent, using __func__ where possible (when debugging is allowed).
2dfc10830	1017ad4e2	Wed Mar 26 11:09:57 2014 -0600	Fix warning on systems where mode_t is not unsigned int (Solaris).
6a7ebd280	a5aeaf20d	Tue Mar 25 16:16:19 2014 -0600	Fix aliasing warning in old-style interface probe code.
a5aeaf20d	250e8e750	Tue Mar 25 16:16:11 2014 -0600	Fix some sign comparision warnings.
3cdb944de	122257e09	Wed Mar 19 16:55:37 2014 -0600	Fix expansion of %p in the prompt for "sudo -l" when rootpw, runaspw or targetpw is set.  Bug #639
60cf68ad1	01cf646a7	Sat Mar 15 09:15:36 2014 -0600	Fix typos in description of the -x option.  Bug #637
403a48da4	35c41deb4	Thu Mar 13 13:38:42 2014 -0600	Fix typo/thinko that prevented "Defaults !tty_tickets" from working.
35c41deb4	967fda0fb	Thu Mar 13 08:21:04 2014 -0600	Fix "sudo -l command" output when the matching command is negated. Bug #636
ee135ea26	7dec05d7d	Tue Mar 11 08:52:52 2014 -0600	Fix diff of toke and err output files in "make check"
8461dc6e2	ed87af2ae	Thu Mar 6 15:21:49 2014 -0700	Fix compiler warning in debug code.
23e7f606a	0030bfe7d	Wed Mar 5 05:57:41 2014 -0700	Document negation fix in JSON output.
0030bfe7d	c934882c3	Tue Mar 4 16:18:35 2014 -0700	Fix handling of \'!\' operator when converting sudoers.  We now add a "negated" boolean flag to objects that have the \'!\' operator.
d75e5f6fe	d8f94bdfd	Thu Feb 27 16:40:28 2014 -0700	Fix typo in setreuid() PERM_ROOT error message.
f2f96d849	b41f5c2d3	Wed Feb 26 10:29:52 2014 -0700	Fix conversion of timestamp_timeout from double to struct timeval. Also quiet a printf format warning on 32-bit systems.
6bffa9a4a	53d9429b8	Mon Feb 17 10:27:47 2014 -0700	Mention init.d scripts on AIX and HP-UX Mention sudoers group mismatch fix
cb3cea3fa	0bf299c69	Sun Feb 16 14:49:15 2014 -0700	Fix INIT_DIR for real this time.
0bf299c69	96d87d55d	Sun Feb 16 11:00:41 2014 -0700	Use correct init.d dir on HP-UX. Fix pp warnings from rc.d and init.d dirs.
0a6ec9615	198e73b5c	Wed Feb 12 15:00:04 2014 -0700	Fix indentation of Defaults entries.  The initial indent should be outside the loop iterating over the entries.
02d86aafe	151f001d8	Tue Feb 11 07:43:13 2014 -0700	When emulating DSO_NEXT with shl_get() we need to skip the program\'s handle.  This used to be documented as being index -2 but now it seems to be index 0.  As this is not guaranteed we need to look up the real handle value for PROG_HANDLE and skip it when interating through all the DSOs.  Fixes infinite recursion on HP-UX in the getenv() replacement.
4e733589e	135c85e15	Wed Feb 5 12:57:47 2014 -0700	Mention the fix for ^Z at the password prompt when sudo was started in the background.
31858894c	c8984598e	Tue Feb 4 06:22:19 2014 -0700	When the closefrom limit is greater than any of the preserved fds, the pfds list will be non-empty but lastfd will be -1 triggering an ecalloc(0) assertion.  Instead, test for lastfd being -1 and make sure we always update it, even if dup() fails. Also restore initial value of lowfd after we are done relocating. Fixes bug #633
719e58740	4831eeaac	Sun Feb 2 08:34:53 2014 -0700	Fix clock_gettime() detection when it lives in librt. Some systems have inet_aton() in libresolv (older Solaris).
fb29e91ef	a2dc10ece	Sat Feb 1 05:47:16 2014 -0700	Fix use of timestampowner in the new time stamp world order.  Parent directories for timestampdir and lecture_dir are now created with the execute bit set so that we can traverse them as non-root.
32b4713d6	d7257a63e	Fri Jan 31 15:28:41 2014 -0700	sprinkle some debug printfs and add function header comments
b15b03560	f04f6eeb4	Fri Jan 31 10:12:21 2014 -0700	fix typo
63e7aa994	f4e037a0d	Thu Jan 30 16:15:03 2014 -0700	Fix checking of lecture status.
5a636f2ea	aaecd326e	Thu Jan 30 13:06:29 2014 -0700	Zero out errstr when there is no error; fixes bug #632
7e008eb67	f6542e90f	Fri Jan 24 16:08:28 2014 -0700	Fix typo, ULONG_MAX vs. ULLONG_MAX
f6542e90f	7e88cc27b	Fri Jan 24 09:43:10 2014 -0700	Fix typo in the AIX case.
8ca711ee1	640a5ddb4	Wed Jan 15 06:00:59 2014 -0700	When relocating fds, update the debug fd if it is set so we are guaranteed to get debugging output.
640a5ddb4	77b126acc	Tue Jan 14 20:34:20 2014 -0700	If the event loop exits due to an error and we are not logging I/O, kill the command if still running.  Fixes a bug where sudo could exit while the command was still running.
77b126acc	26cff8bcb	Tue Jan 14 20:20:26 2014 -0700	When relocating preserved fds, start with the highest ones first to avoid moving fds around more than we have to.  Now uses a bitmap to keep track of which fds are being preserved.  Fixes a bug where the debugging fd could be relocated to the same fd as the error backchannel temporarily, resulting in debugging output being printed to the backchannel if util@debug was enabled.
d7277fc96	6a76d1a1c	Tue Jan 14 10:54:56 2014 -0700	If not logging I/O we may get EOF when the command is executed and the other end of the backchannel is closed.  Just remove the backchannel event in this case or we will continue to receive the event.  Bug #631
d99b4f090	50c7e759d	Mon Jan 13 11:11:26 2014 -0700	Fix strtonum() usage when parsing /proc/self/stat on Linux. Bug #630
57113a536	12fc51060	Wed Jan 8 16:48:27 2014 -0700	Handle in_res being NULL for sudo_debug_printf() in sudo_sss_filter_result().
d94a35709	2c2ab9c32	Wed Jan 8 14:34:15 2014 -0700	Sudo 1.8.9 also fixes bug #617
2c2ab9c32	a3d88b9db	Tue Jan 7 11:06:24 2014 -0700	The fix for the hang was already in the 1.8.9 tarballs.
f57beb1af	1bd694362	Tue Jan 7 10:35:56 2014 -0700	Go back to making the bit fields in struct cmndtag explicitly signed. This fixes a problem on gcc 4.8 (at least) which appears to be treating the value as unsigned by default.
1bd694362	5a6d211d6	Tue Jan 7 09:30:28 2014 -0700	Use debug_return_int() instead of bare return for debugging support.
5a6d211d6	d3fd43fd2	Mon Jan 6 11:20:38 2014 -0700	Fix infinite loop that could be triggered by sudo_ev_loopbreak() and sudo_ev_loopcontinue().
38bf95a76	ed029f9a6	Fri Jan 3 14:34:14 2014 -0700	Fix restoration of the close-on-exec flag when moving a relocated fd back into its original position.
a6e1766dd	91db1efe9	Sat Dec 28 07:59:45 2013 -0700	Fix typo; we want setlocale(LC_ALL, "") since we are setting the locale for the first time.
76544011e	1adeda54e	Tue Dec 24 14:50:28 2013 -0700	Fix install-plugin when sudoers is compiled statically.
7dabe334b	b7c647a4f	Mon Dec 9 14:06:46 2013 -0700	Fix a warning on Solaris, we need to use debug_return_const_ptr.
2508da6f6	1739350e2	Thu Dec 5 14:34:56 2013 -0700	Better match debugging. Sprinkle const in match functions.
9e964a8c0	302d3273a	Tue Dec 3 15:47:45 2013 -0700	sudo_sss_filter_user_netgroup(): fix comment typos, break out of loop early if we match ALL or netgroup.
f477b343f	ede55a2f7	Tue Dec 3 15:15:12 2013 -0700	Avoid passing NULL domainname to sudo_debug_printf().
ede55a2f7	5b491573e	Tue Dec 3 14:42:33 2013 -0700	Document sssd debug subsystem.
5b491573e	878ddb178	Tue Dec 3 14:40:58 2013 -0700	Document "event" debug subsystem.
f56eca805	543d3b701	Tue Dec 3 14:19:37 2013 -0700	Add user netgroup filtering for SSSD.  Previously, rules for a netgroup were applied to all even when they did not belong to the specified netgroup.  RedHat Bugzilla 880150.
543d3b701	dc69e5af5	Tue Dec 3 14:10:11 2013 -0700	Fix several issues found by the clang static analyzer; Daniel Kopecek
b082a614f	0d81263e2	Mon Dec 2 11:14:25 2013 -0700	On Solaris, disabling the proc_exec privilege appears to interfere with DAC file permissions.  Adding DAC override permissions to the inheritable set works around this for commands run as root without giving extra permissions to other users.  Bug #626
4247c1741	94ad47ff9	Tue Nov 26 07:15:55 2013 -0700	Do not add LIBDL to SUDO_LIBS or SUDOERS_LIBS in configure, do it in Makefile.in so we can make it last.  Fixes a linking problem on Ubuntu precise.
94ad47ff9	58a0540b9	Mon Nov 25 09:54:04 2013 -0700	Do not rely on NULL being defined for getaddrinfo() test. Fixes the check on HP-UX 11.23.
ba40be9dd	192cbbb49	Wed Nov 20 07:22:10 2013 -0700	Define RTLD_GLOBAL for older systems without it.  Bug #621
0a47860ef	054a94e6c	Tue Nov 19 09:48:01 2013 -0700	Include unistd.h in sig2str.c for Tru64 as it defines SIGRTMIN and SIGRTMAX in terms of sysconf(), which is prototyped in unistd.h. Bug #621; from Daniel Richard G.
054a94e6c	0a7ebf8b2	Tue Nov 19 09:45:13 2013 -0700	Add definition of U_ for --disable-nsl Don\'t define warning_gettext if --disable-nsl Bug #621; from Daniel Richard G.
a1b1c80b2	3dab6bd8e	Mon Nov 18 12:00:44 2013 -0700	Fix some syntax errors and change how lists are handled.
3dab6bd8e	96eb2c4f8	Mon Nov 18 09:10:09 2013 -0700	Allow sudo to compile without variadic macro support in cpp. Debugging support will be limited (no file info from warnings.) From Daniel Richard G.; Bug #621
96eb2c4f8	99b7351de	Mon Nov 18 08:59:57 2013 -0700	Add warning_gettext() wrapper function that changes to the user locale, then calls gettext(). Add U_ macro that calls warning_gettext() instead of gettext(). Rename warning2()/error2() back to warning_nodebug()/error_nodebug().
99b7351de	6c71ad5c1	Sun Nov 17 16:15:36 2013 -0700	Fix some #if vs. #ifdef and remove an extraneous semicolon. Bug #624; from Daniel Richard G.
6c71ad5c1	bf65cc041	Sun Nov 17 16:11:39 2013 -0700	Add debug_return_const_str and debug_return_const_ptr for returning a const string or pointer.  Using const for the normal versions produces warnings with the Tru64 compiler.
bf65cc041	7017c904c	Sun Nov 17 14:16:13 2013 -0700	Fixes for building under Tru64; from Daniel Richard G. Bug #624
7017c904c	942f732a5	Sat Nov 16 09:21:43 2013 -0700	log_{fatal,warning} now logs to the debug file itself. log_{fatal,warning} now calls warningx2() after setting the locale itself instead of using the wrapper macros. This removes the only use of warningx(ngettext(...)).
e684f6a09	6d8b078e2	Fri Nov 15 15:16:47 2013 -0700	Fix more instances of #include directives where the \'#\' was not in column 1.  From Daniel Richard G. (bug #622)
97b60e3eb	bb45f8e84	Wed Nov 13 14:45:47 2013 -0700	From Daniel Richard G. (bug #622)     Add an autogen.sh script that rebuilds the autoconf world.     Move old aclocal.m4 contents to m4/sudo.m4.     New (generayed) aclocal.m4 contains the m4_include directives.     Some tests had #include directives where the \'#\' was not in column 1.     Updated obsolete macro usage via autoupdate.
69f7ed79c	a3aa40b0f	Tue Nov 12 09:50:36 2013 -0700	Add regress test for bug #623
a3aa40b0f	9d9d8e852	Tue Nov 12 09:36:39 2013 -0700	Cope with a comment on the last line of the file with no newline. Bug #623
237ae0b77	31e83c3e7	Mon Nov 11 16:00:07 2013 -0700	In v{warning,fatal}x?() make a new copy of ap for the debug functions. It is not legal to use ap twice without reinitializing it. Noticed by Daniel Richard G.
906eba927	a69ed4a2d	Mon Nov 11 12:47:29 2013 -0700	Fix pasto
a69ed4a2d	e8dac0e4a	Thu Nov 7 14:46:28 2013 -0700	Fix typo.
8e503a229	3b65249bd	Mon Nov 4 06:26:37 2013 -0700	Fix warnings from -Wold-style-definition
b616a0431	60d58f3a6	Mon Nov 4 06:06:38 2013 -0700	Extra debugging for ready fds.
60d58f3a6	0eb38a228	Mon Nov 4 06:06:01 2013 -0700	When deleting an event, check ev->events to determine whether to remove from readfds or writefds instead of blinding removing from both.  Also fix highfd adjustment.
1202e54cd	9f761dc44	Wed Oct 30 14:27:50 2013 -0600	Fix sign comparison warning.
9f761dc44	fd88ed42c	Wed Oct 30 10:21:02 2013 -0600	Fix potential NULL dereference in non-interactive mode.
1bc2901a2	b8f5d3edf	Mon Oct 28 16:40:04 2013 -0600	Fix sudo_ev_scan_impl() return value in event_poll.c. Make sure we clear active flag from unprocessed events if sudo_ev_loopbreak() or sudo_ev_loopcontinue() are used. Remove bogus optimization when the timeout is zero or negative; it could prevent an I/O event from being triggered.
548efb83d	8dfe0b605	Wed Oct 23 16:18:28 2013 -0600	Fix sign compare warning.
081742958	07a804caf	Wed Oct 23 15:19:41 2013 -0600	More sign compare fixes.  On Solaris id_t is signed so use uid_t in the set_perms.c ID macro instead.
29361ec00	d825a5894	Tue Oct 22 16:52:23 2013 -0600	sudo_ldap_parse_uri() should join multiple URIs in the string list together but it was clearing the host entry each time through the loop.  Fixes a bug with multiple URI entries in ldap.conf where only the last one was being honored.
798e82bd6	b2cba8368	Tue Oct 22 10:43:15 2013 -0600	Fix newly introduced use after frees found by llvm checker.
fe0e953e9	2c8d5add8	Mon Oct 21 16:00:29 2013 -0600	Fix AND operator broken by changes to fix OR.
2c8d5add8	04588f613	Sat Oct 19 16:59:08 2013 -0600	Fix OR operator.
04588f613	69ab48f16	Fri Oct 18 16:28:49 2013 -0600	Fix memory leak of I/O buffer events in safe_close().
69ab48f16	6a5d6f9e9	Wed Oct 16 16:44:21 2013 -0600	Don\'t allow the debug subsystem to be initialized twice. Otherwise we can exhuast our stack when built in static mode.
a6b4f4110	020fb0094	Sun Oct 6 14:22:14 2013 -0600	Fix removal of trailing newlines in a debug message.
020fb0094	e223df690	Fri Oct 4 16:22:25 2013 -0600	When checking for unused Runas_Aliases, count those used as part of a Runas Group too.  Fixes a false positive warning.
48d7c407e	fc332461e	Sun Sep 29 15:09:43 2013 -0600	Fix braino.
9a657e884	d197e42d4	Wed Sep 18 11:48:26 2013 -0600	Change "next" back to 2.  In the context of "next Friday" we really do want the friday of the upcoming (not current) week.  Unfortunately, this means that things like "next week" and "next year" will match one more than we really want.  Fixing this will require some fairly major changes to the grammar.
c91c5343e	5d56fd5f8	Wed Sep 11 11:20:05 2013 -0600	Do not fail if ttyname() cannot determine the tty but sudo can. Should fix problems with running "make check" under pbuilder.
bd5286905	6b0a909d9	Tue Sep 3 14:50:28 2013 -0600	Be specific that we are talking about the Unix epoch; bug #615
6b0a909d9	6b57ef4f6	Tue Sep 3 14:47:34 2013 -0600	Do not use "setup" as a verb; bug #614
6b57ef4f6	13fd13e17	Tue Sep 3 11:24:31 2013 -0600	Fix logic goof when checking open() status.
b2d0bdee2	422115d72	Tue Sep 3 09:39:35 2013 -0600	Work around a bug in sudo 1.8.7 timing files where the indexes are off by two.
596d94dc6	de566ac2c	Mon Aug 26 14:47:45 2013 -0600	New bugs fixed for 1.8.8.
de566ac2c	316fe3612	Mon Aug 26 14:40:25 2013 -0600	Fix setting of quiet flag when -q / --quiet is specified. Do not print "sudoers: parsed OK" in quiet mode.
3389108f1	95d41437d	Mon Aug 26 07:04:19 2013 -0600	Don\'t allow root to change its SELinux role without a password. Bug #611
b0f5c498f	925984d88	Tue Aug 20 15:14:17 2013 -0600	Fix installation of sudo_noexec on Mac OS X. Use library symbol interposition on Mac OS X 10.4 and higher so we don\'t need to set DYLD_FORCE_FLAT_NAMESPACE=1.
925984d88	dbdd328f4	Sat Aug 17 07:08:20 2013 -0400	Fix error display from ldap_ssl_client_init().  There are two error codes.  The return value can be decoded via ldap_err2string() but the ssl reason code cannot (you have to look it up in a table online).
dbdd328f4	6484574f9	Mon Aug 19 13:19:35 2013 -0600	Fix typo in tls_key example for Tivoli
6484574f9	e507c05bb	Mon Aug 19 10:40:05 2013 -0600	Don\'t escape \'$\' when running "sudo -i command".  Bug #564
e507c05bb	e54f11ae4	Mon Aug 19 09:19:52 2013 -0600	Fix typo in comment.
e54f11ae4	bd589f234	Mon Aug 19 09:19:24 2013 -0600	Fix comment.
bec394dc1	a44d82763	Thu Aug 15 14:09:53 2013 -0600	Add support to the debug subsystem for zero-length strings.  This can happen for things like warning(NULL) or fatal(NULL) where we just want to log the errno string.
2f251caf4	251c79a77	Thu Aug 15 10:39:40 2013 -0600	Fix compilation on Solaris 11.
c376c7161	299a881fe	Thu Aug 15 09:56:17 2013 -0600	Move the -C (user_closefrom) check until after set_cmnd() so that closefrom_override can be used in a command-specific Defaults line. Fixes bug #610 from Mengtao Sun.
79104ce75	8b1d64553	Wed Aug 14 13:41:47 2013 -0600	Fix parsing of "-h host" when used in conjunction with the -l flag.
91e66c481	04b290e38	Tue Aug 13 14:53:55 2013 -0600	Fix setting of mailer argv[0] to basename of mailerpath. No need to strdup() mailerpath as it is not modified.
9b2fb418c	8b4fbc5cc	Mon Aug 12 09:14:38 2013 -0600	Don\'t allow max_groups to be set to zero, it just complicates things needlessly.  Fixes an assertion in visudo when there is a group-based Defaults entry.
c3fb47a88	5dc56ea81	Wed Aug 7 13:13:56 2013 -0600	Add atoid() function to convert a string to an id_t (uid, gid or pid).  We have to be careful to choose() either strtol() or strtoul() depending on whether the string appears to be signed or unsigned. Always using strtoul() is unsafe on 64-bit platforms since the uid might be represented as a negative number and (unsigned long)-1 on a 64-bit system is 0xffffffffffffffff not 0xffffffff. Fixes a problem with uids larger than 0x7fffffff on 32-bit platforms.
5dc56ea81	972ee9a0f	Wed Aug 7 11:23:19 2013 -0600	Add atoid() function to convert a string to an id_t (uid, gid or pid).  We have to be careful to choose() either strtol() or strtoul() depending on whether the string appears to be signed or unsigned. Always using strtoul() is unsafe on 64-bit platforms since the uid might be represented as a negative number and (unsigned long)-1 on a 64-bit system is 0xffffffffffffffff not 0xffffffff. Fixes a problem with uids larger than 0x7fffffff on 32-bit platforms.
62da46a9c	c0c782ae1	Wed Jul 31 15:20:14 2013 -0600	Add some warnings and debugging to sasl ccname handling.
c0c782ae1	09e752274	Wed Jul 31 15:03:46 2013 -0600	Fix write loop invariant in sudo_krb5_copy_cc_file()
09e752274	3582ad340	Tue Jul 30 15:37:04 2013 -0600	Strip off leading FILE: or WRFILE: prefix before trying to copy the user\'s credential cache.
3582ad340	b1c8f0575	Mon Jul 29 15:34:49 2013 -0600	Instead of setting RLIMIT_NPROC to unlimited when sudo initializes, just save RLIMIT_NPROC in exec_setup() before the final setuid() and restore it immediately after.  We don\'t need to modify RLIMIT_NPROC for simple euid changes, just for changing the real (and saved) uids before we exec.  This also means we no longer need to worry about _SC_CHILD_MAX returning -1.  Bug #565
6e56e6d8c	fbfd0ad63	Thu Jul 18 16:51:56 2013 -0600	Add support for long options and fix inclusion of sudo_usage.h with modern gcc broken in 8597:1fcb7ba13018.
ba615bd58	b4e1f7c44	Tue Jul 16 16:18:14 2013 -0600	fix "the the"
a72d04c39	4d6cb6eff	Thu Jul 11 16:31:36 2013 -0400	Fix typo
4d6cb6eff	bf9d823c2	Tue Jul 9 10:35:26 2013 -0600	Fix pasto; sudo_sss_extract_digest() not sudo_ldap_extract_digest(). From Dan Harnett.
bf9d823c2	0799e9679	Tue Jun 18 06:39:02 2013 -0400	Fix formatting typo; from Eric S. Raymond
0799e9679	e8046e4be	Mon Jun 17 16:48:32 2013 -0400	Use -gxcoff on aix so dbx can be used to debug sudo.
e8046e4be	8b44c5d42	Wed Jun 12 09:15:11 2013 -0400	Fix typo; bug 605
67d8af4be	521e17b13	Tue May 28 14:40:45 2013 -0400	Restrict default creation of PIE binaries (-fPIE and -pie) to Linux. OpenBSD also supports PIE but enables it by default so we don\'t need to do anything.  This fixes problems on systems with a version of GNU ld that accepts -pie but where the run-time linker doesn\'t actually support PIE.  Also verify that a trivial PIE binary works unless PIE is explicitly enabled.
5549e44cd	2dd71e838	Thu May 16 10:18:13 2013 -0400	Handle d_type == DT_UNKNOWN when resolving the device to a name and sprinkle some more debugging.
cf5f505fb	368a6558c	Mon Apr 29 14:00:50 2013 -0400	Fix c-format for fatal/fatalx
67dad9a83	a40de4135	Thu Apr 25 10:22:11 2013 -0400	sudoers_debug is now deprecated in favor of the sudo debugging framework.
a40de4135	8248fb329	Thu Apr 25 10:12:42 2013 -0400	Replace DPRINTF with DPRINTF1 and DPRINTF2 macros that use SUDO_DEBUG_DIAG and SUDO_DEBUG_INFO respectively for logging to the debug file with the ldap subsystem. The sudoers_debug setting in ldap.conf is still honored for now but will be removed in a future release.
50bdd5f13	7ab68a35d	Wed Apr 24 11:55:21 2013 -0400	Clear up an llvm checker warning which appears to be a false positive and fix an old XXX while I\'m at it.
ad019da9e	d6282d154	Wed Apr 24 11:08:38 2013 -0400	Mention .sl vs. .so extension handling on HP-UX Mention group membership changes Fix typos
40772f5aa	71f9fe33d	Thu Apr 18 15:05:23 2013 -0400	Fix pasto in debug_decl
6c9c2b242	5d7579816	Wed Apr 17 21:16:30 2013 -0400	Fix logic bug when checking tty via ttyname().
5d7579816	e8cd84c35	Wed Apr 17 16:23:49 2013 -0400	Fix check for _BIG_ENDIAN and _LITTLE_ENDIAN (Solaris) and __BIG_ENDIAN__ and __LITTLE_ENDIAN__ (HP-UX)
6f718ee3c	e9726e597	Thu Apr 11 13:10:40 2013 -0400	Check for crypt() returning NULL.  Traditionally, crypt() never returned NULL but newer versions of eglibc have a crypt() that does.  Bug #598
54f092c3e	e3b61c11f	Wed Apr 10 12:11:12 2013 -0400	Break out of the loop if sudo_ttyname_scan() returns non-NULL. Fixes a problem finding the tty name when it is not in /dev/pts.
5555b86d7	9914cd8a7	Tue Apr 9 14:17:59 2013 -0400	Log timestampfile to debug file.
baa9041fe	e003c793b	Wed Apr 3 09:54:11 2013 -0400	Cosmetic fixes in the comments.
e003c793b	9438c8ab3	Tue Apr 2 16:56:59 2013 -0400	Use AC_LINK_IFELSE instead of AC_TRY_LINK Fix printing of status message for visibility checks when the test fails.
7364f0ce9	b9bb50ff5	Tue Apr 2 12:25:54 2013 -0400	Do exec_prefix expansion when enable_shared even if noexec is not enabled.
cd980f0b4	f7b62e8dc	Mon Apr 1 16:35:35 2013 -0400	Fix compilation when getdomainame() is not present.
3a83dbafb	159664ad7	Mon Apr 1 14:58:31 2013 -0400	Fix getgrouplist() check.
b7e351683	155669cfe	Thu Mar 28 14:23:31 2013 -0400	Fix compilation in SUDOERS_NO_SEQ case
254125769	7eb2394b4	Thu Mar 28 13:21:43 2013 -0400	Fix SUDOERS_NO_SEQ
c66cf7c87	ddc1d36a0	Wed Mar 27 11:29:58 2013 -0400	cosmetic fixes
ddc1d36a0	64e558bcf	Wed Mar 27 03:41:00 2013 -0400	RHEL (and perhaps other Linux distros) use the string "(none)" instead of an empty string when there is no actual NIS-style domain name.  Bug #596
64e558bcf	b729284df	Wed Mar 27 03:39:18 2013 -0400	Fix return values when NAME_MATCH is defined.
cee83cbf2	608394793	Tue Mar 26 13:26:59 2013 -0400	Remove unused macros, fix a debug_decl
d710f1b41	adee3cded	Tue Mar 26 10:27:06 2013 -0400	Whitespace fixes
b4ca9535b	17c5f8b15	Thu Mar 21 16:35:18 2013 -0400	Fix a typo in a comment and make sure we don\'t mistakenly include _PATH_SUDO_ASKPASS and _PATH_SUDO_SESH in config.h.in
c078614b4	3c139fa3c	Tue Mar 19 14:08:11 2013 -0400	Fix regress tests on non-OpenBSD platforms.
b0ab02854	ae7679a31	Mon Mar 18 16:10:08 2013 -0400	Fix exit values in check target so we don\'t have to ignore errors.
6bd884860	ce502e2ae	Mon Mar 18 15:29:40 2013 -0400	Fix path to sudo.conf manuals; remove non-existant test2.err.ok
ce502e2ae	1a51a993d	Mon Mar 18 15:26:08 2013 -0400	Fix compilation in dynamic mode.
eb2259bc1	7f32d1ca4	Thu Mar 14 19:59:07 2013 -0400	Move exec_cmnd to exec.c to fix a compilation issue with sesh.c
d07d453ab	1e0a7d511	Thu Mar 7 11:54:17 2013 -0500	Define _REENTRANT for HP-UX when we add -lpthread to SUDO_LIBS. Fixes a problem with errno sometimes not being set on error on HP-UX.
1e0a7d511	9722784e1	Thu Mar 7 10:06:01 2013 -0500	Fix debug logging from the plugin when there is no error number. This was broken in the big debugging reorg for 1.8.7.
c47f5f7ab	19f37400d	Tue Mar 5 10:16:50 2013 -0500	Fix potential double free in an error path.
9a4bd3cce	af2d4dbfb	Thu Feb 28 08:38:06 2013 -0500	Fix PAM compilation: def_pam_session, not just pam_session.
af2d4dbfb	1c30fbb71	Thu Feb 28 06:03:36 2013 -0500	Don\'t remove the -S option description when trimming out selinux. Bug #592
0eef336ed	59692ad28	Sun Feb 24 13:04:58 2013 -0500	Fix debug_decl for sudo_auth_begin_session and sudo_auth_end_session.
2228763ff	af4d3489f	Thu Feb 21 15:59:21 2013 -0500	Fix typos in selinux/solaris privs specific code.
a17fb1de7	299298ae4	Wed Feb 20 15:48:12 2013 -0500	Fix atobool() usage.
2d6095420	11e04d30d	Wed Feb 6 16:38:31 2013 -0500	Fix memory leak in error path; found by llvm checker
5debfeeaf	f6e61640d	Tue Feb 5 16:10:16 2013 -0500	Fix typos
f6e61640d	c5816ca6a	Tue Feb 5 16:09:26 2013 -0500	Fix some typos.
0bd79612b	380fa828d	Tue Feb 5 10:56:58 2013 -0500	Use PLUGINDIR in the manuals and fix a typo in the sample sudo.conf.
c2e678d73	f2beaaa89	Thu Jan 24 11:57:38 2013 -0500	Add regress test for bug 361
6fe6ccb04	ef8e14124	Wed Jan 23 07:52:09 2013 -0500	Fix potential stack overflow due to infinite recursion in alias cycle detection.  From Daniel Kopecek.
e1859cac1	6bc3d4aed	Tue Jan 22 15:48:16 2013 -0500	Fix typo that breaks the build on HP-UX.
a06a14838	872e16883	Fri Jan 18 14:58:12 2013 -0500	Use _getgroupsbymember() on Solaris to get the groups list.  Fixes performance problems with the getgroupslist() compat on Solaris systems with network-based group databases.
d129290ec	948253a15	Fri Dec 28 11:01:36 2012 -0500	Print SIGCONT_FG and SIGCONT_BG properly in debug output.
9a1889a61	b7ae7977a	Fri Nov 30 11:39:27 2012 -0500	Move debug_decl() in log_failure() to be after the variable declarations for C89.
02ad501ec	d3ab8b080	Wed Nov 28 16:48:04 2012 -0500	Fix return in sudoers_policy_open that should be debug_return.
94e2b1fbd	1660c2692	Mon Nov 26 09:57:35 2012 -0500	Add missing command_info argument in I/O plugin open() prototype. Bug #579
4bde57b8b	7b3d26868	Sun Nov 25 09:34:10 2012 -0500	Rename warning2()/error2() -> warning_nodebug()/error_nodebug().
0178d5ae0	edf088182	Mon Nov 12 17:12:34 2012 -0500	Set group on sudo_debug when creating it to gid 0 so systems without BSD group semantics don\'t get the invoking user\'s group.
336021a9c	5957c88f4	Mon Nov 12 05:36:43 2012 -0500	Fix compilation on systems w/o setlocale()
e88c8941d	cac7ca6a6	Thu Nov 8 16:40:03 2012 -0500	Fix cut and pasto
f8660f998	56857f7f0	Thu Nov 8 15:37:42 2012 -0500	Add variants of warn/error and sudo_debug_printf that take a va_list instead of a variable number of args.
941d759c5	e6207003b	Tue Nov 6 11:08:53 2012 -0500	Add preinstall target that runs SUDO_PREINSTALL_CMD.  Used to fixup the rpath in HP-UX SOM shared libraries for the LDAP libs.
592f6fefb	616d713e9	Tue Sep 25 13:49:51 2012 -0400	Start commands in the background when I/O logging is enabled.  We can\'t do this on Mac OS X due to a kernel bug in tc[gs]etattr(2) which returns EINTR on signal instead of restarting automatically.
0e94e8ca9	6a25affb4	Mon Sep 24 15:06:14 2012 -0400	Fix running commands that need the terminal in the background when I/O logging is enabled.  E.g. "sudo vi &".  When the command is foregrounded, it will now resume properly.
.  This got expanded at some point.  Bug #573
7f36643a6	1d90c0ad7	Mon Sep 17 17:03:17 2012 -0400	Rename yyerror() to sudoerserror() to match yacc prefix changes. Not really needed due to the #defines that yacc makes but it is less confusing this way as the lexer calls sudoerserror().
f808fead0	37d70a999	Mon Sep 17 13:20:30 2012 -0400	Fall back on lstat(2) if d_type in struct dirent is DT_UNKNOWN. Not all file systems support d_type.  Bug #572
faf112c53	3c34c0a4b	Sun Sep 16 15:18:58 2012 -0400	Replace the guts of sudo_setenv_nodebug() with our old setenv.c which supports non-standard BSD and glibc semantics. sudo_setenv() now simply calls sudo_setenv2().
bdf93e8d3	5276ab3a5	Sat Sep 15 13:41:24 2012 -0400	Enable non-Unix group support for LDAP sudoers.  We now check for non-Unix groups and netgroups with the same query in the second pass.  Bug #571
5276ab3a5	0c9083b14	Fri Sep 14 16:19:25 2012 -0400	Set yacc prefix to "sudoers" to avoid conflicts other yacc parsers.
6beab1914	d2a46c0f8	Tue Sep 11 10:22:37 2012 -0400	Fix duplicate detection in sudo_putenv(), do not prune out the variable we just set when overwriting an existing instance. Fixes bug #570
d2a46c0f8	3af7a0daf	Tue Sep 11 10:21:32 2012 -0400	Add some debuggging
29907e357	537dc94b9	Mon Aug 27 10:29:59 2012 -0400	Shells typically change their process group when they start up so that they can implement job control.  Most well-behaved shells change the pgrp back to its original value before suspending so we must not try to restore in that case, lest we race with the child upon resume, potentially stopping sudo with SIGTTOU while the command continues to run.  Some shells, such as pdksh, just suspend the shell by sending SIGSTOP to themselves without restoring the pgrp. In this case we need to change the pgrp back for them. Should fix bug #568
537dc94b9	ac4b21b3e	Sun Aug 26 20:12:51 2012 -0400	Use strsigname() to print signal names in the debug output. If the system has no strsigname(), use our own.
793426106	81d42ae4e	Wed Aug 22 15:50:58 2012 -0400	Fix NULL deref when an entry has no Runas_Entry
2b5d43b8a	2d3a0d14d	Wed Aug 22 10:20:27 2012 -0400	Add missing debug_return
e01886ed2	7aeadbd5b	Tue Aug 14 14:16:49 2012 -0400	Fix some typos. Describe error messages not related to policy permissions.
f32aaed29	e4e815dd8	Mon Aug 13 14:39:40 2012 -0400	Can\'t call debug code in the process_hooks_xxx functions() since ctime() may look up the timezone via the TZ environment variable.
afaf5e07f	d89b1a6be	Fri Aug 10 12:07:52 2012 -0400	Mention HP-UX reboot fix.
0655deab5	3ba8da4ab	Tue Aug 7 14:47:58 2012 -0400	Fix a comment, update a variable name in a prototype; all cosmetic.
7d255e42c	487c8abb0	Tue Aug 7 11:01:28 2012 -0400	Fix some warnings from clang checker-267
487c8abb0	dc08cf3c9	Tue Aug 7 10:27:55 2012 -0400	Fix memory leak found by clang checker-267
dc08cf3c9	d10fb81fe	Mon Aug 6 14:38:35 2012 -0400	If we receive a signal from the command we executed, do not forward it back to the command.  This fixes a problem with BSD-derived versions of the reboot command which send SIGTERM to all other processes, including the sudo process.  Sudo would then deliver SIGTERM to reboot which would die before calling the reboot() system call, effectively leaving the system in single user mode.
d10fb81fe	61dfad9c5	Fri Aug 3 09:27:39 2012 -0400	Remove section about Solaris 10 on other systems. Add missing sudoers.man.in bit to fixman.sh.
80597710c	57699c553	Thu Aug 2 15:37:48 2012 -0400	Fix printing of parse error message to stderr.
acba09fbb	b1d1d8989	Wed Aug 1 15:28:02 2012 -0400	Fix HP-UX, just use ".TH name section" like the vendor manuals.
b1d1d8989	602510f1b	Wed Aug 1 14:57:14 2012 -0400	Fix compilation on Solaris
9c321baa7	f205243bd	Tue Jul 31 11:11:25 2012 -0400	SuSE Enterprise Linux uses RLIMIT_NPROC and _SC_CHILD_MAX interchangably. This causes problems when setting RLIMIT_NPROC to RLIM_INFINITY due to a bug in bash where bash tries to honor the value of _SC_CHILD_MAX but treats a value of -1 as an error, and uses a default value of 32 instead.
a9623c29c	82c808c7c	Mon Jul 30 11:01:32 2012 -0400	Fix SELinux build
383e0c860	2c7df2925	Fri Jul 27 16:22:09 2012 -0400	Fix printing of the permission denied message to standard error when a user is not allowed to run a command.  This got broken by the recent logging changes.
ab64e36e5	6ce246f0b	Fri Jul 27 14:25:48 2012 -0400	Fix errors introduced when sudoNotBefore, sudoNotAfter and sudoOrder were added.  From David Hicks.
ecb74d3e2	12bad90ba	Thu Jul 26 14:05:55 2012 -0400	Fix building docs in a build dir.
05e7cac89	909f3da4d	Thu Jul 19 17:13:19 2012 -0400	Fix groff warnings.
909f3da4d	42e6496ed	Thu Jul 19 16:21:07 2012 -0400	Fix dependencies for .man.in files.
c5b374fac	f31f58a96	Wed Jul 18 09:16:09 2012 -0400	More minor costmetic fixes.
f31f58a96	f7dc1d849	Thu Jul 12 15:16:04 2012 -0400	Minor cosmetic fixes.
e9f5a3839	386ba7b06	Wed Jun 27 13:41:58 2012 -0400	Use MAX_UID_T_LEN + 1 for uid/gid buffers, not MAX_UID_T_LEN to prevent potential truncation.  Bug #562.
e571d6ff6	6103bbc67	Thu Jun 21 13:41:39 2012 -0400	Add Homepage and Bugs to debian control file.
6103bbc67	9497df293	Wed Jun 20 14:18:14 2012 -0400	fix typo when setting aix_freeware
9497df293	bcfeddc99	Wed Jun 20 13:38:17 2012 -0400	Don\'t run regress tests or sudoers sanity check (using the newly-built visudo) when cross compiling.  Bug #560
5ac272c03	45fea137f	Mon Jun 18 14:03:11 2012 -0400	Fix gcc 2.x variant macro support.
45fea137f	fdcc8e1fc	Mon Jun 18 13:47:01 2012 -0400	Fix compilation on gcc 2.95 and other compilers that only allow variable declarations at the beginning of a block.
642b7e887	f5948149e	Fri Jun 8 13:28:47 2012 -0400	Add "%:" prefix when talking about QAS non-Unix group support.
f5948149e	db9f50f13	Fri Jun 8 13:27:16 2012 -0400	Fix packaging of symbolic links on HP-UX when the link source already exists in the filesystem.
db9f50f13	94049aa53	Fri Jun 8 13:26:16 2012 -0400	Only specify prefix if we are overriding the default value. Fixes the man dir (/usr/local/man vs. /usr/local/share/man).
94049aa53	afbf68d6a	Fri Jun 8 09:37:43 2012 -0400	Fix setting of sudoedit_man variable.
0a66c2439	dab474b93	Mon Jun 4 13:22:47 2012 -0400	Fix extended description in .deb files.
b5ee0ab91	8b38f4584	Thu May 31 14:02:26 2012 -0400	Debian fixes:  * fix modes to be more in line with what Debian expects  * add section  * install LICENSE as copyright and ChangeLog as changelog  * create stub changelog.debian
8b38f4584	7391c7562	Thu May 31 14:00:38 2012 -0400	Fix find command to properly skip files in the DEBIAN dir when building md5sums.
e54a00726	ca89eb59e	Tue May 22 15:45:50 2012 -0400	Fix test for -z relro
0d82c4c7e	d29aede20	Mon May 21 13:59:02 2012 -0400	If sudoers_mode is group-readable but the actual sudoers file is not, open the file as uid 0, not uid 1.  This fixes a problem when sudoers has a more restrictive mode than what sudo expects to find. In older versions, sudo would silently chmod the file to add the group-readable bit.
8a7ac4459	2b7659f70	Thu May 17 15:42:57 2012 -0400	Fix #includedir; from Mike Frysinger
025a30902	071256a83	Tue May 15 12:15:30 2012 -0400	Fix capitalization
0d6958077	4e0ffceac	Thu May 10 11:06:46 2012 -0400	Fix an alignment problem on NetBSD systems with a 64-bit time_t and strict alignment.  Based on a patch from Martin Husemann.
aa7ac09fa	340ae1323	Wed May 9 09:46:38 2012 -0400	Implement RTLD_NEXT and fix RTLD_DEFAULT for HP-UX.
e828a1d7a	d9c13139d	Tue May 1 13:47:14 2012 -0400	Add mode for docdir and use \'-\' (default) for localedir mode.  Fixes a problem on Linux when building in a directory with the setgid bit set.
30bddced2	4b8982ebd	Tue Apr 24 15:57:16 2012 -0400	Fix version check on AIX
28268ed99	989361c27	Tue Apr 24 10:34:02 2012 -0400	Fix printing of invalid uri
0fbd5e1bc	f6c7ae251	Mon Apr 23 20:04:26 2012 -0400	Fix the setutxent and endutxent compatibility defines (this time correctly) when only setutent and endutent are available.
ce9863358	9f461efd5	Mon Apr 23 14:56:31 2012 -0400	Add missing initialization of a sigaction structure when I/O logging. Fixes a potential problem when suspending the command.
9f461efd5	3491dd818	Mon Apr 23 13:08:57 2012 -0400	Split global and per-connection LDAP options into separate arrays. Set global LDAP options before calling ldap_initialize() or ldap_init(). After we have an LDAP handle, set the per-connection options. Fixes a problem with OpenLDAP using the nss crypto backend; bug #342
cc07164d9	c19ec8f9f	Fri Apr 20 15:36:23 2012 -0400	Sync with upstream for Mac OS X (and other) fixes.
f3ab15b11	15a974936	Thu Apr 19 11:49:18 2012 -0400	typo fix in comment
dffaeb9cb	dfc90ff0b	Thu Apr 12 15:17:00 2012 -0400	Fix duplicate free introduced in last rev
53357633f	df067cac4	Mon Apr 9 15:39:01 2012 -0400	Fix restoration of AIX permissions.
ce8fd0ea3	c8ce3a0a8	Fri Apr 6 16:34:43 2012 -0400	Fix printing of TSID in "sudoreplay -l"
c8ce3a0a8	bb898cd5d	Fri Apr 6 15:20:16 2012 -0400	Log the process id in the debug file output.  Since we don\'t want to keep calling getpid(), stash the value at init time and when we fork().
bb898cd5d	b4acbc9fe	Fri Apr 6 12:45:30 2012 -0400	Ignore SIGTTIN and SIGTTOU in main sudo process when I/O logging. It is better to receive EIO from read()/write() than to be suspended when we don\'t expect it.  Fixes a problem when our terminal is revoked which can happen when, e.g. our sshd is killed unceremoniously. Also, only change the value of "alive" from true to false, never from false to true.  It is possible for us to receive notification of the child having stopped after it is already dead.  This does not mean it has risen from the grave.
b4acbc9fe	087059b29	Fri Apr 6 12:40:13 2012 -0400	Distinguish between signals we received from the parent vs. those delivered explicitly to the monitor process in debugging info.
abdff2570	2311fed45	Thu Apr 5 13:04:00 2012 -0400	Always pass __func__, __FILE__ and __LINE__ in sudo_debug_printf() and use a new flag, SUDO_DEBUG_FILENO to specify when to use it. This allows consumers of sudo_debug_printf() to log that data without having to specify it manually.
2c84bd4d0	2fe41248a	Thu Apr 5 12:37:15 2012 -0400	Log warning() at SUDO_DEBUG_WARN not SUDO_DEBUG_ERROR. Log the function, file and line number in the debug log for warning() and error().
2fe41248a	a94855f56	Wed Apr 4 16:59:31 2012 -0400	Add SUDO_DEBUG_ERRNO flag to debug functions so we can log errno. Use this flag when wrapping error() and warning() so the debug output includes the error string.
5eb61122a	2a6842e4b	Fri Mar 30 07:55:49 2012 -0400	Fix compat setutxent and endutxent macros for systems with setutent() but not setutxent().  From Gustavo Zacarias
aecb5206e	8393ec050	Thu Mar 29 10:33:40 2012 -0400	Fix compiler warnings on some platforms and provide a better method of defeating gcc\'s warn_unused_result attribute.
8393ec050	af0f5cb62	Thu Mar 29 10:32:29 2012 -0400	Fix building the builtin zlib from a build dir. When a zlib dir was specified, prepend its include path instead of appending so we get the right zlib headers.
0a230feae	739ea68d0	Wed Mar 28 15:27:27 2012 -0400	Fix compilation if RTLD_NEXT is not defined.
b78ca957a	e3e2397cb	Wed Mar 28 13:39:37 2012 -0400	Fix signedness of didvar in env_update_didvar()
2f30694b8	12422f928	Tue Mar 27 13:57:03 2012 -0400	If we are not running with an effective uid of 0, try to give the user enough information to debug the problem.
8b3d118f6	238186abc	Tue Mar 27 12:24:39 2012 -0400	Fix matching of "Path askpass" and "Path noexec"
44ce5720d	413c2accd	Mon Mar 26 10:59:14 2012 -0400	Remove the NO_EXIT flag to log_error() and add a log_fatal() function that exits and is marked no_return.  Fixes false positives from static analyzers and is easier for humans to read too.
d539c606e	19fc56462	Mon Mar 12 19:34:19 2012 -0400	Fix bogus int -> bool conversion; tags can have a value of -1.
fa99904b2	749784ea5	Mon Mar 12 15:04:03 2012 -0400	Fix application of debian-specific sudoers mods when building packages as non-root.
dc727ff6d	4bd136e11	Mon Mar 12 13:52:51 2012 -0400	Fix compilation when seteuid() is not available.
9c2dd5eec	b49bb17c3	Fri Mar 9 17:28:59 2012 -0500	Fix compilation if no seteuid/setreuid/setresuid available.
b49bb17c3	f745a041e	Fri Mar 9 17:07:41 2012 -0500	Better error messages, and added debugging throughout. Fixed seteuid() version of set_perms()/restore_perms(). Fixed logic bug in AIX version of restore_perms(). Added checks to avoid changing uid/gid when we don\'t have to. Never set gid/uid state to -1, use the old value instead.
f745a041e	4d1752d4d	Fri Mar 9 12:45:24 2012 -0500	Fix format string warning on Solaris with gcc 3.4.3.
d4259ef2c	20a7633a3	Thu Mar 8 13:19:39 2012 -0500	Fix editor goof.
966fa83a9	5fe6e4993	Tue Feb 28 10:33:16 2012 -0500	Prefer KERN_PROC2 over KERN_PROC.  Fixes compilation on some versions of OpenBSD versions that have KERN_PROC2 but not KERN_PROC.
5fe6e4993	6a37b4bf7	Mon Feb 27 16:39:27 2012 -0500	Add Eric Lakin for patch in bug #538
6a37b4bf7	cc97c2e75	Mon Feb 27 14:46:11 2012 -0500	Fix typo in safe_close() made while converting to debug framework that prevented it from actually closing anything.
cc97c2e75	28db1fbbe	Mon Feb 27 14:42:22 2012 -0500	Add some more debugging.
28db1fbbe	5c970b217	Mon Feb 27 13:28:15 2012 -0500	We need sysconfdir in compat/Makfile to get the proper sudo.conf path.  Add standard prefix and foodir expansion in all Makefiles to avoid this problem in the future.
6fb0090db	f6fdc909b	Tue Feb 21 05:15:48 2012 -0500	Fix the description of noexec.
86f809ab4	dfbd6e429	Fri Feb 10 11:34:08 2012 -0500	Sync with upstream for Mac OS X fixes.
dfbd6e429	5c941edc9	Fri Feb 10 11:31:54 2012 -0500	Got back to using "install-sh -M" for files installed as non-readable by owner.  This fixes "make install" as non-root for package building.
cd0e10e1b	d35f50bd6	Tue Feb 7 00:18:08 2012 -0500	Fix noexec for Mac OS X.
d35f50bd6	e066ff5ca	Mon Feb 6 15:57:26 2012 -0500	Move _PATH_SUDO_CONF override to common to match sudo_debug.c
e066ff5ca	8dd16b63d	Mon Feb 6 15:46:17 2012 -0500	More complete fix for LDR_PRELOAD on AIX.  The addition of set_perm(PERM_ROOT) before calling the nss open functions (needed to avoid a GNU TLS bug) also broke LDR_PRELOAD.  Setting the effective and then real uid to 0 for PERM_ROOT works around the issue.
656807823	8c1d8a7b1	Mon Feb 6 13:29:19 2012 -0500	For PERM_ROOT when using setreuid(), only set the euid to 0 prior to the call to setuid(0) if the current euid is non-zero.  This effectively restores the state of things prior to rev 7bfeb629fccb. Fixes a problem on AIX where LDR_PRELOAD was not being honored for the command being executed.
e16ae617e	c32bd3db5	Sun Feb 5 10:17:26 2012 -0500	g/c now-unused debug subsystems
c32bd3db5	c970d464c	Sun Feb 5 10:17:09 2012 -0500	Enumerate the debug subsystems used by sudo and sudoers.
c91f5ee68	2a2d2c4cd	Fri Feb 3 12:30:07 2012 -0500	Make sure we don\'t try to fall back to using the conversation function for debugging in the main sudo process if we are unable to open the debug file.
3da971ba3	f5f9aadcc	Thu Feb 2 11:28:33 2012 -0500	Better debug subsystem usage
491b4495f	c894f802d	Tue Jan 31 16:24:57 2012 -0500	Fix the sudoers permission check when the expected sudoers mode is owner-writable.
ca4a338c4	7908621ba	Mon Jan 30 13:49:24 2012 -0500	Fix potential off-by-one when making a copy of the environment for LD_PRELOAD insertion.  Fixes bug #534
d11e7febb	e852bf437	Wed Jan 25 14:58:02 2012 -0500	Refactor disable_execute() and my_execve() into exec_common.c for use by sesh.c.  This fixes NOEXEC when SELinux is used.  Instead of disabling exec in exec_setup(), disable it immediately before executing the command.  Adapted from a diff by Arno Schuring.
a5dfea7cd	7747b481d	Thu Jan 19 11:03:22 2012 -0500	For "sudo -g" prepend the specified group ID to the beginning of the groups list.  This matches BSD convention where the effective gid is the first entry in the group list.  This is required on newer FreeBSD where the effective gid is not tracked separately and thus setgroups() changes the egid if this convention is not followed. Fixes bug #532
7747b481d	2fd77381a	Tue Jan 17 13:07:35 2012 -0500	Fix sh warning; use "test" instead of "["
2fd77381a	97cecaf6e	Tue Jan 17 10:27:33 2012 -0500	When not logging I/O, use a signal handler that only forwards SIGINT, SIGQUIT and SIGHUP when they are user-generated signals.  Fixes a race in the non-I/O logging path where the command may receive two keyboard-generated signals; one from the kernel and one from the sudo process.
40badb50e	0df60d8ec	Mon Jan 16 10:40:11 2012 -0500	Only run compat regress tests on compat objects we actually build. Fixes "make check" in the compat dir for systems that don\'t implement character classes in fnmatch() or glob().  Bug #531
4baffc780	4d8a8e015	Fri Jan 13 09:49:20 2012 -0500	Include parent directories in case they don\'t already exist.  This fixes a directory permissions problem with the AIX package when the /usr/local directories don\'t already exist.
f05de3f3f	f7b04c32a	Wed Jan 11 15:38:18 2012 -0500	The device name returned by devname() does not include the /dev/ prefix so we need to add it ourselves.
f7b04c32a	fa15fc765	Wed Jan 11 14:09:16 2012 -0500	Add debug warning if KERN_PROC sysctl fails or devname() can\'t resolve the tty device to a name.
d5571aa1e	373043b4d	Mon Jan 9 12:36:43 2012 -0500	Need to include gettext.h and sudo_debug.h; from John Hein
373043b4d	5dd3f0ec5	Mon Jan 9 11:00:59 2012 -0500	Initialize the debug framework from the I/O plugin too.
5dd3f0ec5	efbf020d4	Sun Jan 8 12:11:14 2012 -0500	Enable debugging via sudo.conf.
13561805d	c1a9cc9ab	Fri Jan 6 20:10:41 2012 -0500	Add debug support.
ae43a19ad	38526ca14	Fri Jan 6 13:13:04 2012 -0500	Enable debugging via sudo.conf.
38526ca14	baa9273dd	Fri Jan 6 10:58:13 2012 -0500	Enable debugging via sudo.conf.
45e1623b5	c4ba51161	Fri Jan 6 09:44:41 2012 -0500	Document Debug setting in sudo.conf and debug_flags in plugin.
c4ba51161	241b1db87	Thu Jan 5 15:54:00 2012 -0500	Do not include GLOB_MARK in the flags we pass to glob(3).  Fixes a bug where a pattern like "/usr/*" include /usr/bin/ in the results, which would be incorrectly be interpreted as if the sudoers file had specified a directory.  From Vitezslav Cizek.
72a4e0943	9c27e91b5	Thu Jan 5 11:48:24 2012 -0500	Remove -D debug_level option.
5bc075640	7799d01cf	Tue Jan 3 10:06:07 2012 -0500	When not logging I/O, put command in its own pgrp and make that the controlling pgrp if the command is in the foreground.  Fixes a race in the non-I/O logging path where the command may receive two keyboard-generated signals; one from the kernel and one from the sudo process.
089ee4222	fa1f781a0	Tue Dec 20 13:39:19 2011 -0500	Fix warnings related to sudo.conf accessors.
1f97735fb	a24d86b32	Sun Dec 18 14:20:56 2011 -0500	Fix typo in visiblepw description; from Joel Pickett
6bcf470fe	edd32aa8d	Thu Dec 8 11:15:53 2011 -0500	Catch common signals in the monitor process so they get passed to the command.  Fixes a problem when the entire login session is killed when ssh is disconnected or the terminal window is closed. Previously, the monitor would exit and plugin\'s close method would not be called.
9f0abb469	38a4990e4	Mon Dec 5 10:43:44 2011 -0500	Add support for setenv entries in login.conf.  We can\'t use LOGIN_SETENV since the plugin sets up the envp the command is executed with. Also regen the Makefile.in files while here.  Fixes bug #527
199eeb38d	01147eda3	Fri Dec 2 14:29:54 2011 -0500	Fetch the login class for the user we authenticate specifically when using BSD authentication.  That user may have a different login class than what we will use to run the command.  When setting the login class for the command, use the target user\'s struct passwd, not the invoking user\'s.  Fixes bug 526
01147eda3	b58c1ff6e	Fri Dec 2 13:43:02 2011 -0500	Replace @DEV@ prefix with DEVEL variable so we can do "make DEVEL=1"
b58c1ff6e	21a2f9582	Fri Dec 2 11:35:22 2011 -0500	Fix "make check" fallout from the sudo_conv changes in sudo_debug.
21a1460d4	f7925b588	Wed Nov 30 15:33:26 2011 -0500	Fix mode on sudoers as needed when the -f option is not specified.
ab887a6fb	13514ec03	Wed Nov 30 14:56:41 2011 -0500	No longer pass debug_file to plugin, plugins must now use CONV_DEBUG_MSG
a64f1eaea	3b2998d55	Tue Nov 29 19:51:24 2011 -0500	Do not close error pipe or debug fd via closefrom() as we need them to report an exec error should one occur.
dd2fcf16d	6dbf8cc23	Tue Nov 29 14:41:00 2011 -0500	Fix typo, return_debug vs. debug_return
012440794	c189fa5f5	Thu Nov 17 16:45:52 2011 -0500	Fix install-plugin when shared objects are unsupported or disabled.
f689afb5e	19c98b62b	Sun Nov 13 21:24:54 2011 -0500	Fix non-dynamic (no dlopen) sudo build.
65b781a2e	f3ae31185	Sun Nov 13 13:55:19 2011 -0500	Use SUDO_CONV_DEBUG_MSG in the plugin instead of writing directly to the debug file.
6fd3e0385	c86561e50	Sun Nov 13 11:46:39 2011 -0500	Prefix authentication functions with a "sudo_" prefix to avoid namespace problems.
ab437ae6c	09beba825	Sat Nov 12 12:41:44 2011 -0500	Add lexer tracing as debug@parser
98790cd0c	0bf68d210	Tue Nov 8 14:10:34 2011 -0500	Add devdir before srcdir in include path and fix up dependecies accordingly.
e58b23274	5d2c01e3d	Tue Nov 8 08:24:45 2011 -0500	Change Debug sudo.conf setting to take a program name as the first argument.  In the future, this will allow visudo and sudoreplay to use their own Debug entries.
5d2c01e3d	6fa91f569	Tue Nov 8 08:22:48 2011 -0500	fix sudo_debug_printf priority
6fa91f569	3ee9cef0d	Tue Nov 8 08:22:07 2011 -0500	add missing debug_return_int
ab803d88b	922add780	Thu Nov 3 09:31:20 2011 -0400	Fix crash when "sudo -g group -i" is run.  Fixes bug 521
922add780	c55b5c9e1	Wed Oct 26 10:42:30 2011 -0400	Make alias_remove_recursive() return TRUE/FALSE as its callers expect and remove two unused arguments.  Fixes bug 519.
c55b5c9e1	300265019	Wed Oct 26 10:20:32 2011 -0400	Add regress test for bugzilla 519
9b2c88981	ab75dd2e3	Tue Oct 25 10:08:26 2011 -0400	We need to init the auth system regardless of whether we need a password since we will be closing the PAM session in the monitor process.  Fixes a crash in the monitor on Solaris; bugzilla #518
839919566	9923464d9	Sat Oct 22 14:40:21 2011 -0400	Add debug_decl/debug_return (almost) everywhere. Remove old sudo_debug() and convert users to sudo_debug_printf().
9923464d9	749a7695d	Sat Oct 22 14:28:33 2011 -0400	Wrap error/errorx and warning/warningx functions with debug statements. Disable wrapping for standalone sudoers programs as well as memory allocation functions (to avoid infinite recursion).
53e3ad11b	697caf8df	Sat Oct 22 14:00:52 2011 -0400	New debug framework for sudo and plugins using /etc/sudo.conf that also supports function call tracing.
ce8b4e53a	3f526029a	Mon Oct 10 15:52:47 2011 -0400	Add sudoedit fix
b7a610770	a6602fa0e	Mon Oct 10 13:10:24 2011 -0400	Ignore set_logname (which is now the default) for sudoedit since we want the LOGNAME, USER and USERNAME environment variables to refer to the calling user since that is who the editor runs as. This allows the editor to find the user\'s startup files. Fixes bugzilla #515
c5f8dc95c	7304bc744	Tue Sep 27 11:13:44 2011 -0400	Fix a PAM_USER mismatch in session open/close.  We update PAM_USER to the target user immediately before setting resource limits, which is after the monitor process has forked (so it has the old value). Also, if the user did not authenticate, there is no pamh in the monitor so we need to init pam here too.  This means we end up calling pam_start() twice, which should be fixed, but at least the session is always properly closed now.
de33689ae	4724e313e	Wed Sep 21 10:15:13 2011 -0400	Make "verbose" static; fixes a namespace clash with pam_ssh_agent_auth (and it doesn\'t need to be extern these days).
e5e1bb24f	62991b0cf	Fri Sep 16 14:05:44 2011 -0400	Only iolog_file (not iolog_dir) supports mktemp-style suffixes.
647e087cd	fd2d709bd	Fri Sep 16 13:05:21 2011 -0400	Fix some square brackets in case statements that needed to be doubled up.  While here, use $OSMAJOR when it makes sense.
fd2d709bd	cab1968da	Fri Sep 16 09:05:37 2011 -0400	Fix a crash in make_grlist_item() on 64-bit machines with strict alignment.
526a61004	e3cda8020	Fri Aug 26 16:01:39 2011 -0400	Fix netmask matching.
335901388	e4956d22e	Tue Aug 23 15:24:55 2011 -0400	Fix building on RHEL 3
bfc84b01f	367b65900	Thu Aug 18 13:41:40 2011 -0400	Fix expansion of strftime() escapes in log_dir and add a regress test that exhibited the problem.
367b65900	a6224a734	Thu Aug 18 12:09:34 2011 -0400	Fix "make check" return value.
27257d9cf	366cb1927	Wed Aug 17 11:38:53 2011 -0400	Fix logic inversion in pot file up to date check.
7f4a0d095	027cd522c	Fri Aug 12 11:02:53 2011 -0400	Fix loop that calls authenticate(). If there was an error message from authenticate(), display it.
6b1e75252	179b34d9e	Thu Aug 11 13:25:08 2011 -0400	Fix typo; OPT should be OTP
4f9a93f65	6365c779c	Thu Jul 28 10:59:37 2011 -0400	Fix some potential problems found by the clang static analyzer, none serious.
cb63967bf	1f9fb7609	Fri Jul 22 15:33:33 2011 -0400	Fix setgroups() fallback code on EINVAL.
1f9fb7609	043b976c6	Fri Jul 22 15:13:35 2011 -0400	Fix two PERM_INITIAL cases that were still using user_gids.
9e7c364ed	6d8788a6c	Tue Jul 19 12:31:53 2011 -0400	Fix typo
d090d6786	d7c079886	Wed Jul 13 11:41:26 2011 -0400	Fix typo in summary
f90731596	ee1b41f84	Mon Jul 11 15:22:25 2011 -0400	Split out log file word wrap code into its own file and add unit tests.  Fixes an off-by one in the word wrap when the log line length matches loglinelen.
76f427e8d	ae3405254	Tue Jul 5 12:20:10 2011 -0400	Fix build error when --without-noexec configure option is used.
47d908aba	9fd93f433	Thu Jun 9 08:54:46 2011 -0400	Fix typo
4f22a3980	878c77000	Mon Jun 6 10:53:58 2011 -0400	Load plugins with RTLD_GLOBAL instead of RTLD_LOCAL.  This fixes problems with pam modules not having access to symbols provided by libpam on some platforms.  Affects FreeBSD and SLES 10 at least.
f77403d06	977dfd316	Fri Jun 3 10:09:10 2011 -0400	The group named by exempt_group should not have a % prefix.
977dfd316	3c9e5f28f	Wed Jun 1 12:26:13 2011 -0400	Fix typo; "Defaults group_plugin" not "Defaults sudo_plugin"
3c9e5f28f	7199afec8	Tue May 31 12:49:22 2011 -0400	Fix compressed io log corruption in background mode by using _exit() instead of exit() to avoid flushing buffers twice.
336ab7077	79098fd96	Thu May 26 11:46:11 2011 -0400	More dependency fixes.
79098fd96	6c13614a5	Thu May 26 11:41:13 2011 -0400	Fix a few dependencies.
682333ae2	9089c7ddf	Wed May 25 11:31:11 2011 -0400	Increment alias_seqno before calls to alias_remove_recursive() to avoid false positives with the alias loop detection.  Fixes spurious warnings about unused aliases when they are nested.
9b3653fca	f8df14034	Sun May 22 10:10:43 2011 -0400	Fix install-nls target with HP-UX sh when gettext is not present.
645b5c1c7	f4a4cbeab	Thu May 19 16:21:59 2011 -0400	Fix C format warnings.
d2384297a	3164f5814	Thu May 19 16:06:53 2011 -0400	Set --msgid-bugs-address to the bugzilla url
917c8d48a	c3a259f5e	Tue May 17 18:37:18 2011 -0400	We don\'t want to translate debugging messages.
19a81af6b	4810662e9	Tue May 17 15:55:23 2011 -0400	Fix caching of libc gettext check.
d006b00a4	15bc74bd6	Mon May 16 16:44:11 2011 -0400	Fix gettext marker.
a1f6db3a0	4dd3440cb	Tue May 3 13:45:56 2011 -0400	Resolve namespace collisions on HP-UX ia64 and possibly others by adding a rpl_ prefix to our fnmatch and glob replacements and #defining rpl_foo to foo in the header files.
189817a31	8a76ddfef	Fri Apr 29 11:22:49 2011 -0400	Fix regexp for matching a CIDR-style IPv4 netmask.  From Marc Espie.
435d8413b	7dfb27fb3	Tue Apr 26 09:51:34 2011 -0400	Fix SIA support; we no longer have access to the real argc and argv so allocate space for a fake one and use the argv passed to the plugin with "sudo" for argv[0].
55c3dfe39	cf5e8d9b7	Tue Apr 12 11:52:41 2011 -0400	Fix ARCH setting in cross-compile Solaris packages.
cf5e8d9b7	b00cf92ef	Tue Apr 12 11:50:20 2011 -0400	Fix aix version setting.
2af217409	365bd63e6	Mon Apr 11 11:41:38 2011 -0400	Correct sizeof() to fix test failure.
365bd63e6	1e72fa912	Mon Apr 11 08:27:59 2011 -0400	"install" target should depend on "install-dirs". Fixes "make -j" problem and closes bz #487.  From Chris Coleman.
f52a6ccae	f949dbcc5	Wed Apr 6 12:02:49 2011 -0400	Fix and document --with-plugindir; partially from Diego Elio Petteno
f949dbcc5	698c5002d	Wed Apr 6 10:57:39 2011 -0400	Fix fnmatch and glob tests to not use hard-coded flag values in the input file.  Link test programs with libreplace so we get our replacement verions as needed.
dcc4ec843	3a54719a6	Wed Apr 6 09:33:07 2011 -0400	Fix warnings when -without-skey, --without-opie, --without-kerb4, --without-kerb5 or --without-SecurID were specified.
e55bbb183	3ffb64986	Tue Apr 5 09:13:18 2011 -0400	Fix typo; from Petr Uzel
987e1dbe6	c82e29f27	Thu Mar 31 13:57:05 2011 -0400	Fix setting of user_args
aed50b4d7	03f949cf1	Sun Mar 27 09:27:43 2011 -0400	Fix a potential crash when a non-regular file is present in an includedir.  Fixes bz #452
cf8caed3b	71fa43ec4	Wed Mar 23 16:00:30 2011 -0400	Fix printing "User_Alias FOO = ALL"
48d67f0df	97b8dc7fe	Tue Mar 22 10:03:10 2011 -0400	fix typo
97b8dc7fe	85e86d6ea	Tue Mar 22 09:40:24 2011 -0400	Fix placement of equal size (\'=\') in user specification summary.
1c0917aa3	88e35a193	Thu Mar 17 15:48:00 2011 -0400	Expand quoted name checks to cover recent fixes.
88e35a193	95bf62441	Thu Mar 17 15:06:55 2011 -0400	Fix parsing of double-quoted names in Defaultd and Aliases which was broken in 601d97ea8792.
240642399	9e65afc15	Wed Mar 16 12:02:04 2011 -0400	Save the controlling tty process group before suspending so we can restore it when we resume.  Fixes job control problems on Linux caused by the previous attemp to fix resuming a shell when I/O logging not enabled.
9e65afc15	2041d39db	Wed Mar 16 10:26:10 2011 -0400	Fix printing of the remainder after a newline.  Fixes "sudo -l" output corruption that could occur in some cases.
cf7ec7a3c	07968755a	Tue Mar 15 15:52:18 2011 -0400	Fix typo; tupple vs. tuple
07968755a	5e6bc4017	Tue Mar 15 15:51:44 2011 -0400	For legacy utmp, strip the /dev/ prefix before trying to determine slot since the ttys file does not include the /dev/ prefix.
6bea3f524	7debf4474	Fri Mar 11 10:48:12 2011 -0500	Fix running commands as non-root on systems where setreuid() changes the saved uid based on the effective uid we are changing to.
206f5ff31	32cfe08a1	Tue Mar 8 16:09:48 2011 -0500	Fix default setting of osversion variable.
d6252de20	47968912a	Tue Mar 8 09:38:21 2011 -0500	Fix return value of "sudo -l command" when command is not allowed, broken in [c7097ea22111].  The default return value is now TRUE and a bad: label is used when permission is denied.  Also fixed missing permissions restoration on certain errors.  On error()/errorx(), the password and group files are now closed before returning.
47968912a	7e1098734	Mon Mar 7 16:55:08 2011 -0500	Fix passing of login class back to sudo front end.
b54425e04	e65bc35c6	Mon Mar 7 10:08:21 2011 -0500	Fix expr usage w/ GNU expr
e65bc35c6	a0ba30869	Sun Mar 6 15:52:40 2011 -0500	Fix exit value for validate and list mode.
a0ba30869	6968367cb	Sun Mar 6 15:38:02 2011 -0500	Fix non-interactive mode with sudoers plugin.
06a39eefb	95512ae05	Fri Mar 4 08:22:35 2011 -0500	Fix bug in skey/opie check that could cause a shell warning.
8ee8a0d87	ca86faac9	Thu Mar 3 09:38:15 2011 -0500	Fix exit value of "sudo -l command" in sudoers module.
4688f1ce6	a64bd36b3	Wed Feb 23 15:39:24 2011 -0500	fix test description
435e44808	39d9feb43	Sat Feb 19 08:29:21 2011 -0500	add localstatedir; closes bug 471
39d9feb43	6e312fee0	Sat Feb 19 08:23:46 2011 -0500	The howmany macro lives in sys/sysmacros.h on SVR5 systems Closes Bug 470
a099aa7f2	554833c58	Sat Feb 19 08:13:17 2011 -0500	SVR5 systems return non-zero for success on socketpair(), check for -1 instead.  Closes Bug 469
2603e2ce8	21d8f01fa	Mon Feb 7 10:39:58 2011 -0500	Fix typo
cd6abe1d3	e78e91282	Fri Feb 4 14:44:47 2011 -0500	fix --with-iologdir=no
e78e91282	7f277d155	Fri Feb 4 14:33:54 2011 -0500	fix typo that broke --with-iologdir
29f9e23c8	8a64a8c79	Wed Feb 2 14:19:23 2011 -0500	In non-pty mode before continuing the child, make it the foreground pgrp if possible.  Fixes resuming a shell.
6fd9d853a	342e351d5	Tue Feb 1 14:31:04 2011 -0500	Be clear about what versions of sudo support new LDAP attributes. Fix up some formatting of attribute names.  Minor other tweaks.
342e351d5	4ce8e4b3f	Mon Jan 31 15:13:51 2011 -0500	match quoted strings the same way whether in a Defaults line or as a user/group/netgroup name.  Fixes escaped double quotes in quoted user/group/netgroup names.
39b9b97db	fc3848166	Thu Jan 27 10:03:59 2011 -0500	Fix indentation
96767abfe	215500bb5	Thu Jan 20 16:19:42 2011 -0500	When listing, use separate lbufs for the defaults and the privileges and only print something if the number of privileges is non-zero.  Fixes extraneous Defaults output for "sudo -U unauthorized_user -l".
79dff677d	6565899ba	Wed Jan 19 17:38:38 2011 -0500	fix copyright year
0726c8fe2	3792df2bd	Thu Jan 13 13:10:15 2011 -0500	fix typo
5b0a50d51	e7a4529cf	Tue Jan 11 10:44:36 2011 -0500	Mention "sudo -g group" password check fix.
e7a4529cf	2d74e9567	Tue Jan 11 10:42:01 2011 -0500	Fix "sudo -g" support in the sudoers module.
b92b745ea	33201c04e	Tue Jan 4 12:44:39 2011 -0500	Fix NULL dereference with "sudo -g group" when the sudoers rule has no runas user or group listed.  Fixes RedHat bug Bug 667103.
b8499baaa	5cf56a77e	Mon Dec 27 14:07:49 2010 -0500	Fix building of mkstemps/mkdtemp replacements.
36d8fbb90	4c1aecd48	Mon Dec 27 13:49:06 2010 -0500	Fix typo
524021a37	5d59c10b9	Mon Dec 27 11:24:47 2010 -0500	Add missing sigsetjmp() call in I/O plugin open function. Fixes a crash when the I/O plugin calls error(), errorx() or log_error().
6505d10cc	ad41fb497	Tue Dec 21 12:22:07 2010 -0500	Clear OPOST from c_oflag like we used to.  Fixes screen-based editors such as vi.
23df0b6fa	feb02ed40	Tue Nov 30 13:40:25 2010 -0500	Fix typo and editing goof.
d39747e6a	d869ca1f9	Tue Nov 23 07:26:21 2010 -0500	In exec_setup() call setuid(0) to make certain the subsequent uid and gid changes will succeed.  Fixes a problem on Ubuntu.
bb4a8a4dc	70cf50fd2	Mon Nov 22 15:45:10 2010 -0500	fix typo; from Michael T Hunter
5bd089776	494bd14de	Sat Nov 20 16:23:39 2010 -0500	Fix SUDO_MAILDIR usage of AC_LANG_PROGRAM
93d2420de	e4abd86c6	Tue Oct 12 10:47:16 2010 -0400	Fix complilation on systems with set_auth_parameters() Sprinkle volatile to quiet warnings from gcc 2.8.0
070446bc3	298d0cbe2	Mon Oct 11 21:10:34 2010 -0400	Fix remaining syntax errors.
06b0aa118	de6853848	Mon Oct 11 15:43:59 2010 -0400	Fix pasto; AF_INET not AF_INET6
443d18b11	6a5205414	Mon Oct 11 09:21:56 2010 -0400	Fix dlopen() detection for systems where dlopen() is in a separate library.
86d3e4bf0	dc327471b	Mon Oct 11 09:11:46 2010 -0400	Quiet a compiler warning and fix sudo_preload_table external definition.
dc327471b	751f597b2	Mon Oct 11 09:11:20 2010 -0400	Fix multiple inclusion guard in dlfcn.h and fix dlerror() prototype.
e2f253e51	1a4990f57	Thu Oct 7 14:11:10 2010 -0400	Fix TCGETWINSZ compat.
e59fa31ba	a627c60de	Fri Oct 1 12:20:32 2010 -0400	Fix typo and regenerate
607eab115	fdf877d53	Mon Sep 13 16:34:38 2010 -0400	Use sed instead of expr to split a flag from its argument. Fixes a problem with expr interpreting its arguments as a flag when they start with a dash.
2cef2bb5b	88f9fea40	Tue Aug 24 08:42:47 2010 -0400	When not logging I/O install a handler for SIGCONT and deliver it to the command upon resume.  Fixes bugzilla #431
9706b4c50	f454727bb	Tue Aug 17 09:51:12 2010 -0400	Fix typo that prevented compilation on Irix; Friedrich Haubensak
9f2740135	640f79e13	Fri Aug 6 13:53:17 2010 -0400	Fix mismerge
7b011cf15	ec5722101	Wed Aug 4 08:42:05 2010 -0400	fix typo
65eec19bd	4e74b389c	Tue Aug 3 15:15:45 2010 -0400	Instead of caching struct passwd and struct group in the red-black tree, store a struct cache_item which includes both the key and datum.  This allows us to user the actual name that was looked up as the key instead of the contents of struct passwd or struct group. This matters because the name in the database may not match what we looked up, due either to case folding or truncation (historically at 8 characters).  Also mark the disabled calls to sudo_freepwcache() and sudo_freegrcache() as broken since we use cached data for things like set_perms() and the logging functions.  Fixing this would require making a copy of the structs for user and runas or adding a reference count (better).
4e74b389c	420db2371	Tue Aug 3 15:10:56 2010 -0400	Fix path to mkinstalldirs
a6265c54c	0fbe7a674	Tue Jul 27 18:10:34 2010 -0400	Fix handling of the ldap flavor Remove destdir unless --debug was specified Make distclean before running configure if there is a Makefile present
551791a51	d02489ff4	Mon Jul 26 11:15:50 2010 -0400	Add simple arg parsing for mkpkg so we can set debug, flavor or platform.
092a6935e	49d82a04e	Fri Jul 23 11:23:53 2010 -0400	Install binary files with -b~ to make a backup. Fixes "text file busy" error on HP-UX during install.
481a389e6	b0e282b50	Thu Jul 22 13:47:32 2010 -0400	Install sudoers as /etc/sudoers on RPM and debian systems where the package manager will not replace a user-modified configuration file. This fixes upgrades from the vendor sudo packages.
b0e282b50	5183d6e59	Thu Jul 22 13:42:59 2010 -0400	RPM: use %config(noreplace) instead of %config for volatile This results in the new file being installed with a .rpmnew suffix instead of the file being replaced and the old one renamed with a .rpmsave suffix.
9006c79ba	f3b397be0	Tue Jul 20 12:44:52 2010 -0400	Mention that AIX authdb support has been fixed.
10e6e572e	2eb1879fd	Mon Jul 19 12:54:30 2010 -0400	Fix check for dup2() return value.
a3c3602c1	a7fbdbe69	Sat Jul 17 13:27:38 2010 -0400	fix typo
006427345	3907d4363	Fri Jul 16 14:05:03 2010 -0400	Restore RLIMIT_NPROC after the uid switch if it appears that runas_setup() did not do it for us.  Fixes a bash script problem on SuSE with RLIMIT_NPROC set to RLIM_INFINITY.
338331186	d6dfa43d2	Thu Jul 15 15:23:12 2010 -0400	Fix typo that prevented debian from matching
d6dfa43d2	8a837375d	Thu Jul 15 15:19:37 2010 -0400	Add missing prefix setting for debian
8a837375d	af0bac430	Thu Jul 15 15:12:34 2010 -0400	Use tab indents to reduce the chance of problem with <<- Fix the debian %set section, pp does not set pp_deb_distro Uncomment %sudo line in sudoers for debian Uncomment some env_keep lines for RHEL, SLES and debian to more     closely match the vendor sudoers files. Add /etc/pam.d to %files Remove the /etc/sudo-ldap.conf symlink on debian for ldap flavor
669ca7899	482f9cfc8	Wed Jul 14 14:23:43 2010 -0400	Fix ChangeLog creation from build dir
efbc7f1d5	594fb3c55	Tue Jul 13 08:56:31 2010 -0400	Only set PAM_RHOST for Solaris, where it is needed to avoid a bug. On Linux it causes a DNS lookup via libaudit.
684d1fd9f	ea4298bb5	Fri Jul 9 10:22:20 2010 -0400	Fix mkstemps() prototype
390696777	47c28e7ec	Tue Jul 6 13:24:00 2010 -0400	Fix typo.
17dbb33e5	7e91ebff1	Fri Jul 2 16:03:21 2010 -0400	Use RTLD_LAZY instead of RTLD_NOW; was using RTLD_NOW as a debugging aid.
7e91ebff1	2822c6c8c	Fri Jul 2 15:56:04 2010 -0400	Fix style nit in function declarations
30fe4a067	fd40be626	Tue Jun 29 13:08:05 2010 -0400	Set usrinfo for AIX Set adminstrative domain for the process when looking up user\'s     password or group info and when preparing for execve(). Include strings.h even if string.h exists since they may define     different things.  Fixes warnings on AIX and others.
6363305b3	2cd108304	Wed Jun 16 12:19:23 2010 -0400	Add back .man suffix
4fb8a83e6	f64bb67c6	Tue Jun 15 15:11:10 2010 -0400	Fix -A flag when askpass is specified in sudo.conf or if sudo doesn\'t need to read a password.
a7a4ec6fb	b09a643ff	Mon Jun 14 12:19:29 2010 -0400	Fix commented DEVDOCS when not in devel mode.
93d48cfc6	ec77318e3	Mon Jun 14 10:20:41 2010 -0400	Updates from Alain Roy to provide better examples for importing the schema and to fix problems caused by Windows validating attributes which have not yet been added before committing the changes.
27a94faf7	f67ac02af	Thu Jun 10 17:52:51 2010 -0400	A comment character may not be part of a command line argument unless it is quoted with a backslash.  Fixes parsing of:     testuser ALL=NOPASSWD: /usr/bin/wl #comment foo bar closes bz #441
e146aaaa2	879d01796	Thu Jun 10 15:02:32 2010 -0400	Fix visiblepw sudoers option; the plugin API portion still needs documenting
afb3f9dbf	3e9ecaf1e	Wed Jun 9 10:52:02 2010 -0400	Fix uninitialized variable in TGP_ECHO case and print a newline if the user interrupted password input.
bcaf51ce6	9b4203606	Tue Jun 8 17:10:27 2010 -0400	Fix setting selinux type on command line.
8fa9464d0	b97d47424	Fri Jun 4 09:09:39 2010 -0400	Update copyright year and fix whitespace
b97d47424	fe5723222	Fri Jun 4 09:09:19 2010 -0400	Fix typo
fd1765b56	7ce0dfc61	Thu Jun 3 07:40:15 2010 -0400	Fix dummy version of get_boottime()
2b8fc46e2	41436a786	Wed Jun 2 11:10:04 2010 -0400	Fix symbol name conflict with sudo_printf.
41436a786	78e7c649f	Wed Jun 2 10:33:02 2010 -0400	Fix OpenPAM detection for newer versions.
572c88541	c24e6277f	Wed Jun 2 10:30:34 2010 -0400	HP-UX ld uses +b instead or -R or -rpath Fix typo in libvas check Add missing template for ENV_DEBUG Adapted from Quest sudo
c24e6277f	1afba5165	Wed Jun 2 10:27:57 2010 -0400	Fix typos; from Quest Sudo
1eafb30a4	2ee752410	Tue Jun 1 10:58:11 2010 -0400	Fix a bug where we could treat EAGAIN as a permanent error. Also set cstat if perform_io() returns an error.
be3b7d615	942552798	Tue Jun 1 09:44:54 2010 -0400	Fix typo in ternary operator usage.
942552798	4230d8562	Sun May 30 11:16:31 2010 -0400	Add --enable-warnings and fix typo in SUDO_IO_LOGDIR
1ffb76178	e952c8c7f	Fri May 28 13:24:07 2010 -0400	Fix EAGAIN handling when writing to stdout.
303d85606	c31ed2cd2	Fri May 28 10:41:58 2010 -0400	Minor Makefile cleanup: fix a typo, change the removal order in the clean targets, and remove a superfluous include path for the sudoers plugin.
4248a11ef	f8f82ffa8	Thu May 27 16:32:41 2010 -0400	rename script.c exec.c and fix up the MANIFEST file
acc60712e	efa908448	Wed May 26 15:43:46 2010 -0400	Fix generation of mksiglist.h
222a4f7c8	755752c6b	Fri May 21 21:05:44 2010 -0400	Fix typo
815e40128	8ae8e8442	Fri May 21 18:41:18 2010 -0400	Fix libtool target (space vs. tabs)
16c2769ed	529bfcf67	Fri May 21 14:50:26 2010 -0400	Close the I/O pipes aftering dup2()ing them to std{in,out,err}. Fixes extra fds being present in the command when it is part of a pipeline.
9360e67a3	882fe3ac4	Thu May 20 17:01:53 2010 -0400	Add debugging info when calling plugin close function
d2b8bad2a	0eec7335a	Wed May 19 11:40:46 2010 -0400	Fix compilation for non PAM/BSD auth/AIX auth
3efb055c8	d7f238ffa	Fri May 14 18:31:21 2010 -0400	Rely more on VPATH; fixes a dependency issue with the parser.
d7f238ffa	553361aca	Fri May 14 16:49:22 2010 -0400	Fix typo introduced in last commit
e336dac87	9a6cbe03b	Fri May 14 16:35:03 2010 -0400	Attempt to fix building on systems that only have setuid.
39652bf75	c8a62b1ec	Thu May 13 20:10:21 2010 -0400	Fix compilation on HP-UX
8ea8de47f	06e650a45	Tue May 11 13:33:42 2010 -0400	Fix pasto in mulitple signal fix and use _NSIG not NSIG since that is what our compat checks set.
b89980ac6	e324082d5	Tue May 11 13:08:41 2010 -0400	Fix timestamp removal with -k/-K
cafc6a4f6	02f8c187a	Tue May 11 08:59:59 2010 -0400	Fix SIGPIPE handling.  Now that we use may use pipes for stdin/stdout we need to pass any SIGPIPE we receive to the running command.
b4d16ae1a	782f49400	Wed May 5 09:47:12 2010 -0400	Add support for logging stdin when it is not a tty. There is still a bug where "cat | sudo cat" has problems because both cat and sudo are trying to read from the tty.
dc72c27b1	9166c156e	Mon May 3 18:02:19 2010 -0400	Use print_error() when displaying ldap config info in debugging mode.
8cfde4f9d	23f9bb59e	Fri Apr 30 13:53:33 2010 -0400	Hack around VPATH semantic differences by symlinking files we need from ../../src into the current directory and build those.  A better fix would be to either make a .a or .la file with those files in it or simply use a single, flat, Makefile instead of per-subdirs Makefiles.
5e9ec6a36	f42cf76d8	Fri Apr 30 12:18:06 2010 -0400	Fix building with non-BSD versions of make such as GNU make. Requires VPATH support, which should be in any non-neolithic make.
8b832576e	d26d942c2	Fri Apr 30 10:50:56 2010 -0400	Fix mismerge; alias_remove_recursive() now returns int
d26d942c2	8fc1ebd4f	Thu Apr 29 18:51:04 2010 -0400	Fix a crash when checking a sudoers file that has aliases that reference themselves.  Based on a diff from David Wood.
af092dc40	17220f44d	Sat Apr 24 19:22:52 2010 -0400	Fix typo in last commit (ifndef vs ifdef) Make sure we pass ctime() a pointer to time_t as tv_sec in struct timeval may be long.
ab00ce995	b4a26b769	Tue Apr 20 16:57:07 2010 -0400	fix ctim_get and mtim_get macros
9f0b8f7aa	399aa0d5c	Thu Apr 15 06:29:31 2010 -0400	Fix typo
399aa0d5c	bc813db52	Thu Apr 15 06:14:41 2010 -0400	Fix use after free in error message when a duplicate alias exists.
fa2f5f53d	7ce802792	Mon Apr 12 11:29:40 2010 -0400	Fix typo
0d2524e68	744eae82e	Sun Apr 11 16:38:42 2010 -0400	Fix set/restore perms for systems w/o setresuid
7ebcbf102	b457f1371	Thu Apr 8 20:08:30 2010 -0400	Add dev targets for *.man.in and *.cat that don\'t specfify the $(srcdir) prefix.
5b3d15093	a3f427838	Thu Apr 8 07:40:04 2010 -0400	Better signal handling. Instead of using a single variable to store the received signal, use an array so we can\'t lose a signal when multiple are sent. Fix process termination by SIGALRM in non-I/O logger mode. Fix relaying terminal signals to the child in non-I/O logger mode.
a3f427838	29f22dba2	Thu Apr 8 06:12:47 2010 -0400	Fix a race between when we get the child pid in the parent and when the child process exits.  The problem exhibited as a hang after a short-lived process, e.g. "sudo id" when no IO logger was enabled.
6a5ea5be0	5770391ec	Tue Apr 6 04:53:42 2010 -0400	Fix up some AC_DEFINE descriptions and regen config.h.in
2634cf08c	81819d0c0	Mon Apr 5 16:27:30 2010 -0400	Avoid installing signal handlers that are io-logger specific.  Fixes job control when no io logger is enabled.
43b6359df	fb55653a4	Sun Apr 4 14:01:21 2010 -0400	Fix out-of-tree builds
7539f636b	ee52f3c39	Fri Apr 2 09:49:21 2010 -0400	Fix LIBOBJDIR vs. srcdir wrt the siglist bits
ca2eee07b	c3e87c2db	Wed Mar 31 20:30:34 2010 -0400	Fix a sizeof(ptr) vs. sizeof(*ptr)
eae881b5a	0ea0d60cb	Tue Mar 23 05:21:38 2010 -0400	Fix off by one error when allocating user_groups.
e12858ee9	fc63d106f	Mon Mar 22 19:39:02 2010 -0400	Fix typo in preserve groups case
43ea59f64	8df6ba9fe	Mon Mar 22 18:08:17 2010 -0400	Fix iteration over runas_groups list.
c2905815e	09900584f	Mon Mar 22 09:50:06 2010 -0400	Fix installation of sudoers.ldap in "make install" when --with-ldap was specified without a directory.  From Prof. Dr. Andreas Mueller
7af5cdfaf	8db39a858	Mon Mar 22 08:26:05 2010 -0400	Fix setting of groups list
6b180d24d	2e27226a0	Sun Mar 21 08:54:06 2010 -0400	Fix the -s and -i flags and add support for the "implied_shell" option.  If the user does not specify a command, sudo will now pass in the path to the user\'s shell and set impied_shell=true.  The plugin can them either check the command normally or return -2 to cause sudo to print a usage message and exit.
8c9db4ef6	5fb6784ab	Fri Mar 19 08:17:58 2010 -0400	Better prefix determination now that we can\'t rely on len==0 to tell the beginning on an entry.
0dbf4362d	71baab8ac	Fri Mar 19 07:32:14 2010 -0400	Fix --with-ldap
5be1b8016	ba9d2f5bb	Thu Mar 18 12:02:05 2010 -0400	Hard-code sudoers.so instead of using SUDOERS_PLUGIN since libtool appears to always install a shared object with the .so suffix.
fc598f8e1	6b4d97ebc	Sat Mar 13 09:30:22 2010 -0500	Add strdup and strndup and fix strsignal
93ae94f9d	1dcebf901	Fri Mar 12 12:40:00 2010 -0500	Fix botched ANSI C coversion of globexp2()
7d0630823	731a6e850	Mon Mar 8 14:27:30 2010 -0500	Use parent process group id instead of parent process id when checking foreground status and suspending parent.  Fixes an issue when running commands under /usr/bin/time and others.
c8c4d6a13	8ca261fc7	Sun Mar 7 07:45:17 2010 -0500	Use parent process group id instead of parent process id when checking foreground status and suspending parent.  Fixes an issue when running commands under /usr/bin/time and others.
b814a0d74	4e938c007	Sat Mar 6 16:29:59 2010 -0500	Add support to -u and -g flags Check fmt_string retval Add timeout for debugging purposes
4e938c007	d73f580f5	Sat Mar 6 14:34:23 2010 -0500	Wire up SIGALRM handler Set close on exec flag for child side of the socketpair Fix signal handling when not doing I/O logging
a1b7526e3	c857c74e3	Fri Mar 5 14:38:42 2010 -0500	Fix a mismatch between sudo_settings and settings_pairs that causes some settings to get the wrong values.
6470a057e	cf07bde70	Thu Mar 4 12:06:42 2010 -0500	Fix strlcpy() return value check.
07bf968c4	9eb3e63c5	Wed Feb 24 07:48:53 2010 -0500	Document -D level command line flag which maps to the debug_level setting.
9eb3e63c5	fac0743e8	Wed Feb 24 06:35:45 2010 -0500	Document debug_level in plugin doc.  Still need to document the -D flag in sudo itself.
fadb324f1	51131cdb8	Sun Feb 21 16:12:01 2010 -0500	Fix up compat dependencies. Fix distclean target in doc/Makefile.in
51131cdb8	781a054ab	Sun Feb 21 15:32:59 2010 -0500	Fix typo
ad4a07a44	d73e870e6	Sun Feb 21 10:36:50 2010 -0500	Handle SIGSTOP in addition to SIGTSTP.  Fixes a problem with suspending a shell with the "suspend" builtint.
32ea572f2	c2aaf8fbf	Sun Feb 21 10:26:30 2010 -0500	No longer need to check for explicit death of the child (process #2) since if it dies we will get EPIPE from the socketpair. Fix a sizeof() that was causing a spurious error. Convert SCRIPT_DEBUG to sudo_debug.
c2aaf8fbf	afcac0824	Sun Feb 21 10:24:27 2010 -0500	Make sudo_debug do a single vfprintf() which will result in a single write call on most systems.  Avoids problems with interleaved debug printf from different processes.  Also remove an extraneous error case since recv() can\'t return a short read and add some more XXX.
afcac0824	121c54705	Sat Feb 20 15:13:11 2010 -0500	Fix uninitialized variable.
121c54705	abb431b36	Sat Feb 20 14:47:43 2010 -0500	Fix sudo install target
abb431b36	b4e0f503e	Sat Feb 20 13:25:10 2010 -0500	Wire up debug_level
b4e0f503e	3327db217	Sat Feb 20 13:24:50 2010 -0500	Fix dependencies
3327db217	6dccb419f	Sat Feb 20 13:20:57 2010 -0500	Fix setting of plugin dir
60adef2e3	6b02fe5ea 01240ab71	Sat Feb 13 07:31:38 2010 -0500	Fix size arg when realloc()ing include stack.  From Daniel Kopecek
7f59ba20b	280a51cda d4d13c1ca	Sat Feb 13 07:30:31 2010 -0500	Fix use after free when sending error messages.  From Timo Juhani Lindfors
01240ab71	fd37f5c59	Tue Feb 9 08:28:03 2010 -0500	Fix size arg when realloc()ing include stack.  From Daniel Kopecek
d4d13c1ca	c0f149b53	Sat Feb 6 12:43:26 2010 -0500	Fix use after free when sending error messages.  From Timo Juhani Lindfors
73dccdf93	2bc6801ca	Thu Dec 17 15:02:06 2009 +0000	Fix printing of entries with multiple host entries on a single line.
0d054f897	ab72e242b	Sat Dec 12 16:27:02 2009 +0000	Fix pasto and add default return value.
f325cfac8	2a9810bfd	Wed Dec 9 16:05:02 2009 +0000	fix typo in last commit
aa03d9cac	803dd9a7c	Sun Dec 6 17:10:36 2009 +0000	Fix a bug due to order of operators.
803dd9a7c	a86896a1c	Mon Nov 23 15:56:14 2009 +0000	cmnd_matches() already deals with negation so _cmndlist_matches() does not need to do so itself.  Fixes a bug with negated entries in a Cmnd_List.
22e333fc5	41c3dc733	Sat Nov 21 00:11:50 2009 +0000	Avoid a parse error when #includedir doesn\'t find any files. Closes bug #375
871b3fb12	d0fdeb12a	Wed Nov 4 14:42:04 2009 +0000	Fix a few typos in the descriptions; from Jeff Makey Only do the check for krb5_get_init_creds_opt_free() taking two arguments if we find krb5_get_init_creds_opt_alloc().  Otherwise we will get a false positive when using our own krb5_get_init_creds_opt_free which takes only a single argument.
c77ef16fc	61b57817a	Sat Oct 24 18:43:16 2009 +0000	Fix handling of SIGTTOU/SIGTTIN in program being run.  We now only give the command the controlling tty if the main sudo process is the foreground process.
50f5d5516	470d3a192	Sat Oct 24 13:16:40 2009 +0000	fix non-zlib case
3ece4c837	52f3374ce	Thu Oct 15 13:46:11 2009 +0000	Call tcgetpgrp() in the parent, not the child and have the child spin until it is granted.  Fixes a race on darwin.
0d04ffc40	d72afb29a	Wed Oct 14 13:01:04 2009 +0000	Associate the grandchild\'s pgrp with the tty instead of the child\'s and just get suspend notifications via SIGCHLD instead of directly. This fixes a hang with programs that try to set terminal attributes and is more consistent with how the shell handles things.
bc1769df2	88b93973f	Sun Oct 11 22:02:02 2009 +0000	fix typo
03e3ca08d	9afe6a842	Sun Oct 11 13:25:23 2009 +0000	Handle SIGTTOU and remove some debugging.
378d15f8f	5636a93f5	Wed Sep 30 13:50:58 2009 +0000	Always update the stashed mtime of the temp file instead of using what we have for the original because the time resolution of the filesystem the temporary is on may not match that of the filesystem that holds the original. Should fix bz #371 found by Philippe Levan.
e6331c077	8e4379b26	Wed Sep 30 02:00:16 2009 +0000	Fix log_output(); just pass in a string and a length.
c6a8c71d2	d111b0d9b	Sat Sep 26 20:25:58 2009 +0000	Fix default case of transcript_enabled being unset.
f68a24fb3	3223231b1	Sat Sep 19 11:43:24 2009 +0000	Fix final flush.
680351cb9	3cc02be8a	Fri Sep 18 13:18:30 2009 +0000	Fix nanosleep emulation
3cc02be8a	b9f4db895	Fri Sep 18 13:18:03 2009 +0000	Fix comment after #endif
fb0fb0380	40114c9ba	Fri Sep 18 01:21:12 2009 +0000	Fix getline return value check.
f2b3a0e6c	a418f7811	Wed Sep 16 12:01:32 2009 +0000	Fix reading long liensin sudo_getln()
8589fccae	8c7750931	Mon Sep 14 13:19:47 2009 +0000	Fix warning and add generated getdate.c
bd9854db5	0040571c9	Mon Sep 7 14:21:09 2009 +0000	Fix cut at documenting transcript support.
c57b8bb7b	ad9ab8dab	Thu Sep 3 10:36:02 2009 +0000	Move the code to dup2 the script fds to low numbered descriptors into script_duplow() and fix the fd sorting.
051eab750	7a00c5257	Sun Aug 16 15:16:04 2009 +0000	fix pasto
946ea4c97	0ab5c31ee	Sat Aug 8 20:00:17 2009 +0000	Fix wait() usage and use correct wait status.
40a21a6c7	834e817fa	Sat Aug 8 12:55:43 2009 +0000	Fix detection of the child process exiting.  Since the child is in its own session we should only ever get SIGCHLD for that process but better safe than sorry.
334c19a40	477f895ec	Wed Aug 5 23:59:21 2009 +0000	Fix a bug introduced with def_closefrom.  The value of def_closefrom already includes the +1.
b8ca82fee	51e292a47	Sat Jul 18 13:55:37 2009 +0000	Fix expansion of %h in #include names.  Fixes bugzilla 363
4341ce6cd	896508077	Sun May 24 12:33:00 2009 +0000	Minor fixes for Minix-3
3332ee984	9251cf24a	Sun May 10 01:00:23 2009 +0000	Fix -g mode, broken by rev 1.503 which had the side effect of setting the runas user to root unilaterally.
db9860aa3	78c347990	Mon Apr 20 17:53:02 2009 +0000	Fix up some pod2html issues.
8eae33753	d9708f9c2	Fri Apr 10 20:59:42 2009 +0000	Fix a warning when --without-ldap is specified.
7bf7af941	065662998	Sat Mar 28 13:09:51 2009 +0000	Make alias_remove return the alias struct instead of freeing it directly. Fixes a use after free in alias_remove_recursive, the only consumer.
28ce9e96e	cd900bdc2	Sat Mar 14 01:04:58 2009 +0000	Only check for ldap_sasl_interactive_bind_s if we can find sasl.h. Fixes compilation with ldapux.
cd900bdc2	55ddfd48a	Thu Mar 12 00:03:04 2009 +0000	fix char subscript
2012ce9ea	fc0ca59db	Wed Mar 11 23:01:10 2009 +0000	fix K&R compilation
91f04dc3b	9e85f3754	Sun Mar 8 20:57:01 2009 +0000	Add --enable-env-debug flag to enable environment sanity checks.
0fee90c19	a7a53b5f4	Mon Mar 2 19:19:35 2009 +0000	Really fix UNSETENV_VOID
a7a53b5f4	e43e319ae	Mon Mar 2 19:18:35 2009 +0000	Fix unsetenv when UNSETENV_VOID
e43e319ae	4210f536c	Mon Mar 2 13:00:37 2009 +0000	Fix SUDO_FUNC_PUTENV_CONST
536ba5e23	0c0560975	Wed Feb 25 12:21:11 2009 +0000	Make sure def_prompt is always defined.  This is a workaround for pam configs that prompt for a password in the session but don\'t have an auth line.  A better fix is to expand the sudo prompt earlier and set def_prompt to that when initializing.
2e8d722ae	710e72ecb	Wed Feb 25 10:47:12 2009 +0000	Fix term_restore
710e72ecb	15975b83c	Wed Feb 25 01:23:07 2009 +0000	Fix "sudo -k" with no other args
c5513388e	f96b0a743	Mon Feb 23 14:15:29 2009 +0000	Parallel make fix.  From Diego E. \'Flameeyes\'
6d88a04a0	da769cd42	Tue Feb 3 15:10:43 2009 +0000	Fix up F<> brokenness for visudo.man.in and sudoers.ldap.man.in.
761066ab0	a93344d2b	Tue Dec 9 20:55:50 2008 +0000	K&R compilation fixes
42771539e	de66ff1af	Mon Nov 24 15:08:16 2008 +0000	fix typos; Markus Lude
1c79dd537	c3d3db62f	Mon Nov 24 00:41:36 2008 +0000	Fix matching of a line that only consists of a comment char
1939859a2	4ed783719	Wed Nov 19 17:01:20 2008 +0000	malloc debugging
68baa6346	d27ceff8e	Tue Nov 18 15:57:09 2008 +0000	fix compilation on non-C99; from Theo
d27ceff8e	ea81e0446	Tue Nov 18 15:50:53 2008 +0000	fix check_aliases
54a07b5e8	ff175f7f0	Fri Nov 7 22:42:11 2008 +0000	Fix "sudo -v" when NOPASSWD is set.
c60c4c71c	51fae2c9c	Thu Nov 6 00:40:01 2008 +0000	fix fallback value for RLIM_SAVED_MAX
55ed6f2c1	22103775c	Fri Oct 3 20:02:00 2008 +0000	fix typo in non-C89 function declaration
ad4dd3b22	0372d7dc2	Fri Oct 3 13:19:31 2008 +0000	Fix AIX limit setting.  getuserattr() returns values in disk blocks rather than bytes.  The default hard stack size in newer AIX is RLIM_SAVED_MAX. From Dale King.
d0a44e437	a5245c235	Thu Sep 11 11:06:37 2008 +0000	Fix a dereference (read) of a freed pointer.  Reported by Patrick Williams.
ed3cc2b33	8f38cfbe9	Sat Jul 12 12:53:05 2008 +0000	regen with yacc skeleton bug fixed
e439faeeb	0cf7172b1	Wed Jul 2 10:27:57 2008 +0000	Flesh out the fake passwd entry used for running commands as a uid not listed in the passwd database.  Fixes an issue with some PAM modules.
3bf94ded8	bd8e38a0c	Thu Jun 26 11:49:16 2008 +0000	Better fix for line continuation inside double quotes.  Now accepts whitespace between the backslash and the newline like the main lexer.
bd8e38a0c	ca6eddf0d	Wed Jun 25 18:31:19 2008 +0000	Fix line continuation in strings.  It was only being honored if preceded by whitespace.
5756ddfbe	c372928c3	Sat Jun 21 00:34:47 2008 +0000	Change how the mailer is waited for.  Instead of having a SIGCHLD handler, use the double fork trick to orphan the child that opens the pipe to sendmail.  Fixes a problem running su on some Linux distros.
c372928c3	e37c901cd	Fri Jun 20 21:16:09 2008 +0000	Fix configure test for dirfd() on Linux where DIR is opaque.
06a4e1402	e2cbaa50a	Fri Jun 6 13:36:58 2008 +0000	Fix typos in -i usage
f0db3ecfb	fbc4aea0e	Thu May 8 21:54:09 2008 +0000	remove an XXX that was fixed
88b932722	5c58a7e96	Thu May 8 16:49:12 2008 +0000	Initialize tags to UNSPEC instead of def_* in "sudo -l" mode. This fixes a problem where the tag value printed was influenced by defaults set in the first pass through the parser.
25aa1b5bf	3fa2f3292	Wed Apr 23 12:30:07 2008 +0000	Fix typo/think in sudo_ldap_read_secret() when storing the secret.
a890d723d	f0a6827fe	Thu Apr 10 18:54:50 2008 +0000	Fix another memory leak in init_parser().
cb8bc538d	7fe25e284	Mon Apr 7 18:39:05 2008 +0000	fix "sudo -s" broken by mode/flags breakout
0715e45e7	82ba4c72e	Tue Apr 1 23:18:21 2008 +0000	fix cut and pasto
59c1ac153	d2a05f214	Thu Mar 6 18:18:17 2008 +0000	attempt to fix compilation errors on AIX
d2a05f214	094c79a20	Thu Mar 6 18:08:13 2008 +0000	fix typo in last commit
5d86a9d6f	cbf038c61	Mon Mar 3 19:30:50 2008 +0000	fix definition of TGP_ASKPASS
506285209	dd2c345be	Fri Feb 15 20:23:54 2008 +0000	Treat k*bsd*-gnu like Linux, not BSD. Fixes compilation problems on Debian GNU/kFreeBSD.
4f5d9371a	ebae55854	Sun Feb 10 23:06:19 2008 +0000	Add debugging so we can tell if the krb5 ccache is accessible
32d57a928	961a79b74	Sun Jan 20 01:34:44 2008 +0000	Fix cut & pasto introduced when adding sudoers.ldap man page.
09c1189d1	0f6101bb2	Fri Jan 18 21:47:05 2008 +0000	Fix a typo/thinko in one of the calls to sudo_ldap_check_user_netgroup(). From Marco van Wieringen.
6131e9f36	2ff13a240	Mon Jan 14 11:40:08 2008 +0000	fix typo
dde5143f0	9a07c1a7f	Sun Jan 13 19:57:34 2008 +0000	Fix check that determines whether -llber is required.
7a110f08c	1df9ca2dc	Wed Jan 9 19:58:39 2008 +0000	The U suffix on constants is an ANSI feature
27efa3d25	32e4a98a6	Thu Jan 3 16:05:04 2008 +0000	fix typo in mtim_getnsec
5a6ad03e5	aa562c8f6	Tue Jan 1 22:06:33 2008 +0000	Remove some already fixed XXXs
6f2cd1b18	d2de8d5fe	Tue Jan 1 18:22:03 2008 +0000	Rename read_nss -> sudo_read_nss Add --with-nsswitch to allow users to specify nsswitch.conf path or disable it. If --with-nsswitch=no but --with-ldap, order is LDAP, then sudoers. Fix --with-ldap-conf-file and --with-ldap-secret-file
36b221af2	b28913068	Mon Dec 31 21:23:46 2007 +0000	fix double free introduced in rev 1.218
ae2ae3452	7f323157a	Mon Dec 31 12:39:52 2007 +0000	Use nsswitch to hide some sudoers vs. ldap implementation details and reduce the number of #ifdef LDAP TODO: fix display routines and error handling
56729b9a6	f60e1d3cb	Wed Dec 19 19:28:57 2007 +0000	Use ldapssl_init() for ldaps support instead of trying to do it manually with ldap_init() + ldapssl_install_routines(). Use tls_cert and tls_key for cert7.db and key3.db respectively. Don\'t print debugging info for options that are not set. Add warning if start_tls specified when not supported.
f60e1d3cb	9ed999b7a	Wed Dec 19 19:25:10 2007 +0000	fix compilation on solaris
dbe2b9e4f	3be9fcbed	Tue Dec 18 14:54:45 2007 +0000	fix LDAP_OPT_NETWORK_TIMEOUT setting
3be9fcbed	72e1a2b54	Tue Dec 18 01:10:10 2007 +0000	fix compilation on Solaris
72e1a2b54	6aa830875	Mon Dec 17 15:14:46 2007 +0000	fix typo
6acbe1728	400309aa9	Thu Dec 13 21:41:58 2007 +0000	fix LDAP_OPT_X_CONNECT_TIMEOUT compat define
a85dd4b86	9c5696978	Tue Nov 27 17:13:03 2007 +0000	Fix typos; Martynas Venckus
bfd781ff6	c9f393e4d	Wed Nov 21 20:02:39 2007 +0000	fix setting of mandir
c22d29597	0d22c2f98	Thu Oct 25 13:23:39 2007 +0000	fix typo
c50e7d4c0	8ef458b59	Sun Oct 21 13:29:18 2007 +0000	Fix block to add -lutil for FreeBSD and NetBSD when logincap is in use.
5a04b3ff9	f95160542	Tue Oct 9 00:04:48 2007 +0000	Add --disable-pam-session configure option to disable calling pam_{open,close}_session.  May work around bugs in some PAM implementations.
bb07eea18	57ee080a0	Thu Sep 13 22:42:15 2007 +0000	Set PAM_RHOST to work around a bug in Solaris 7 and lower that results in a segv.
32403a2d8	2bff032c9	Mon Sep 3 20:28:15 2007 +0000	Fix sudoedit of a non-existent file.  From Tilo Stritzky.
237922518	16871871d	Sun Sep 2 20:35:52 2007 +0000	Fix up use of with_passwd
07ebde409	d56d0b115	Fri Aug 31 21:21:01 2007 +0000	Fix cmp command when regenerating parser. Make gram.o the first dependency for all programs so gram.h will be generated before anything that needs it.
a05abf5c8	0e30ec199	Thu Aug 30 17:12:00 2007 +0000	Fix pasto, append "!" not negated (which is an int) for sudo -l output.
3fd33970c	f9dd821b5	Sat Aug 25 02:36:09 2007 +0000	Fix thinko introduced when merging IPV6 support.
5f11011f0	b63a4c9db	Fri Aug 24 13:50:16 2007 +0000	Merge in a patch from the libtool cvs that fixes a problem with the latest autoconf.  From Stepan Kasal.
d28030c9f	ccd780f99	Sat Aug 18 12:22:16 2007 +0000	Fix line wrapping in usage() and use the actual tty width instead of assuming 80.
994036cf0	5ab2e0767	Wed Aug 15 17:49:52 2007 +0000	Fix some spacing in "sudo -l" and add a comment about some bogosity in the line wrapping.
f90beb2b2	cb68709a7	Sun Aug 12 22:55:37 2007 +0000	fix sudo_noexec extension which got broken in the libtool update
4fea71625	17c8249fe	Thu Aug 2 02:08:39 2007 +0000	Fix off by one in group matching.
17c8249fe	4da496423	Tue Jul 31 18:04:32 2007 +0000	Fix typo: PYTHONINSPEC should be PYTHONINSPECT.  From David Krause.
e81f9efd1	a08b9a107	Mon Jul 30 13:29:06 2007 +0000	Fix link tests such that new gcc doesn\'t optimize away the test.
b166928ba	24ada438f	Sun Jul 22 12:13:07 2007 +0000	Some versions of pam_lastlog have a bug that will cause a crash if PAM_TTY is not set so if there is no tty, set PAM_TTY to the empty string.
8cb8c55f9	5fdb0649b	Sun Jul 15 16:47:53 2007 +0000	Fix use_sasl vs. rootuse_sasl logic.
3d321157a	3c6c4677b	Sun Jul 1 20:55:14 2007 +0000	fix typo in Solaris project support
879c46e4d	459c4bcd3	Sat Jun 23 23:58:54 2007 +0000	Add support for setting environment variables on the command line. This is only allowed if the setenv sudoers options is enabled or if the command is prefixed with the SETENV tag.
459b9cb1d	e0ae6e100	Tue Jun 19 21:27:14 2007 +0000	fix typo
d1702ca4c	5c59e9046	Tue Jun 19 21:21:38 2007 +0000	Fix preservation of LDFLAGS in the LDAP case.
363a2f259	f670ef29b	Tue Jun 19 16:53:09 2007 +0000	Fix preserving of variables in env_keep.
7b73bcbb8	8ae409b8f	Sun Jun 10 22:00:57 2007 +0000	Fix Changelog generation and update.
4d04baaee	7323cbb50	Sat Jun 9 11:17:34 2007 +0000	Fix closefrom() substitution in the Makefile
8d9732115	bd221e2eb	Thu Jun 7 11:22:22 2007 +0000	If we cannot get a valid service key using the default keytab it is a fatal error.  Fixes a bug where sudo could be tricked into allowing access when it should not by a fake KDC. From Thor Lancelot Simon.
7a96eb86e	832f4c376	Tue Feb 6 18:25:35 2007 +0000	Fix typos; from Jason McIntyre.
832f4c376	51d61f148	Tue Feb 6 18:23:45 2007 +0000	Restore signal mask before calling reapchild().  Fixes a possible race condition that could prevent sudo from properly waiting for the child.
be3a220f7	bbe7ab84b	Sun Jul 30 19:53:52 2006 +0000	Fix typo, -lldap vs. -ldap; from Tim Knox.
bbe7ab84b	c28a289f1	Fri Jul 28 17:12:49 2006 +0000	Fix typo; Matt Ackeret
b6e3fb008	7c588a014	Wed Dec 28 18:52:45 2005 +0000	fix typo
b2a32d13c	0b3b32ab9	Fri Nov 11 22:23:08 2005 +0000	Move sudo_end{gr,pw}ent() until just before the exec since they free up our cached copy of the passwd structs, including sudo_user and sudo_runas.  Fixes a use-after-free bug.
69c627658	50004e00b	Fri Nov 11 22:17:59 2005 +0000	Enable malloc debugging on OpenBSD when SUDO_DEVEL is set.
50004e00b	3c6d0cc87	Fri Nov 11 16:22:58 2005 +0000	Fix fd leak when lecture file option is enabled.  From Jerry Brown
2c3be532a	f75830227	Mon Aug 15 00:32:08 2005 +0000	Fix typo; Toby Peterson
26523a7ce	4e86b1d74	Thu Jul 28 01:14:14 2005 +0000	Fix securid5 authentication, was not checking for ACM_OK.  Also add default cases for the two switch()es.  Problem noted by ccon at worldbank
73730b872	380d3c8c7	Sun Jun 26 23:44:30 2005 +0000	Fix up some comments Add missing fclose() for the rootbinddn case
485fa9b66	c09bfd638	Sat Jun 25 20:39:56 2005 +0000	set need_lib_prefix=no for all cases; this is safe for LD_PRELOAD
d281ff77e	94ab74182	Sat Jun 25 18:29:17 2005 +0000	Fix call to pam_end() when pam_open_session() fails.
f1a095308	56d72a3b8	Sat Apr 23 19:10:16 2005 +0000	Fix printing of += and -= defaults.
fe9b65308	f261a99f2	Sat Apr 16 07:14:34 2005 +0000	Add some memsets for paranoia Fix namespace collsion w/ error Check rval of decode_args() and update_env() Remove improper setting of validated variable
132a79945	06a11acf1	Sun Apr 10 19:29:45 2005 +0000	Fix a warning on systems without strlcpy().
bb63e0168	0ea568c7d	Sat Mar 12 17:27:27 2005 +0000	Missed piece from rev. 1.6, fix sudo_getpwnam() too.
444b6fbf8	9805bdd7f	Wed Feb 23 03:14:03 2005 +0000	fix rules to build toke.o and gram.o in devel mode
2791a1807	c2f6b93ad	Sun Feb 20 17:57:48 2005 +0000	Fix disabling set_logname and make env_keep override set_logname.
e2a517d88	b7068a413	Sat Feb 12 23:51:43 2005 +0000	fix devel builds
b7068a413	cc84c41fb	Sat Feb 12 23:48:46 2005 +0000	Fix some printf format mismatches on error.
cc84c41fb	889a0334e	Sat Feb 12 23:46:13 2005 +0000	Fix some printf format mismatches on error.
f7adbaddc	543fe6e7d	Sat Feb 5 02:49:53 2005 +0000	Fix typo (missing comma) that caused an incorrect number of args to be passed to log_error().
c2dad169f	f751d934d	Fri Jan 21 15:34:07 2005 +0000	Fix error message when mixing invalid auth types
2fd0f3d4c	ba001795e	Wed Jan 5 22:29:06 2005 +0000	Fix dummied out toke.c and gram.c dependencies.
f93cd1e97	07d74adfb	Fri Dec 10 02:07:27 2004 +0000	Fix last commit.
33db4b2ed	94f606fbf	Thu Nov 25 17:09:31 2004 +0000	Add check for 2-argument form of timespecsub (FreeBSD and BSD/OS) and fix a typo in the gettimeofday check.
bb60da6bb	faa9a8972	Fri Nov 19 18:30:43 2004 +0000	Back out part of rev 1.263; fix -I order
8680307db	9846e562a	Tue Nov 16 04:32:29 2004 +0000	fix typo
f3d8a1160	5744a0bfd	Tue Oct 26 22:28:11 2004 +0000	new parser fixes most of the outstanding bugs
66992e10e	2c91a5814	Mon Oct 25 17:38:24 2004 +0000	If LDAP_OPT_SUCCESS is not defined, use LDAP_SUCCESS instead. Fixes a compilation problem with Solaris 9\'s native LDAP.
2c91a5814	d9e4426cb	Sat Oct 23 17:32:20 2004 +0000	Call sudo_goodpath() *after* changing the cwd to match the traced process. Fixes relative paths.
d56b543a1	1b06f3e81	Thu Oct 7 18:57:41 2004 +0000	Remove warning about wildcards.  Now that we use glob() the bug is fixed.
1b06f3e81	082b0f8b3	Thu Oct 7 18:52:51 2004 +0000	Use glob(3) instead of fnmatch(3) for matching pathnames and stat each result that matches the basename of the user\'s command.  This makes "cd /usr/bin ; sudo ./blah" work when sudoers allows /usr/bin/blah. Fixes bug #143.
50ed391d1	1ef398856	Thu Oct 7 16:50:34 2004 +0000	4.4BSD glob(3) with fixes from OpenBSD and some unneeded extensions removed.
1ef398856	163994c11	Thu Oct 7 16:50:34 2004 +0000	4.4BSD glob(3) with fixes from OpenBSD and some unneeded extensions removed.
7e36fc441	d7e43093e	Mon Oct 4 20:15:29 2004 +0000	Fix bug introduced in unput() removal; want yyless(0) not yyless(1)
5eb4895b5	e173a07c8	Fri Oct 1 19:06:44 2004 +0000	Fix some XXX
649e2dac1	4e5c53e13	Sat Sep 25 20:15:44 2004 +0000	Remove bogus call to update_child() and some cosmetic fixes
dc3bbe24c	c93248273	Fri Sep 10 16:31:15 2004 +0000	Fix Solatis futimes macro
2102b561b	c6d8ea8af	Mon Sep 6 19:05:32 2004 +0000	Openldap ~/.ldaprc fix
b7ea12521	2d3b307b9	Fri Aug 27 02:08:10 2004 +0000	cleanup debug message
1e46c4d26	a6ea92617	Sat Aug 21 18:25:46 2004 +0000	Fix some thinkos in --with-editor and --with-env-editor descriptions. Noticed by Norihiko Murase.
98fb55387	5f3d569e3	Mon Aug 2 18:40:39 2004 +0000	Fix a bug introduced in rev. 1.149.  When checking for pseudo-commands check for a \'/\' anywhere in cmnd, not just the first character.
921f74613	a6fe34784	Thu Jul 8 01:04:50 2004 +0000	Better debugging of ALL command
318cd646f	4e73e5c38	Sun Jun 6 20:22:20 2004 +0000	Fix a >=0 that should be <0 that was improperly converted when UNSPEC was added.
a5c99554d	2aa69afaa	Sun Jun 6 19:39:56 2004 +0000	Fix pastos introduced in SETNMATCH addition.
115869110	23da57f9f	Thu Jun 3 00:30:44 2004 +0000	Solaris native LDAP build fix
286f74780	f8176ceda	Sat May 29 18:54:53 2004 +0000	Fix some typos, word choice and formatting issues.
5150db1db	406db89f1	Thu May 27 19:55:06 2004 +0000	In sudoers_lookup() return VALIDATE_NOT_OK if the runas user was explicitly denied and the command matched.  This fixes a long-standing bug and makes:     foo machine = (ALL) /usr/bin/blah     foo machine = (!bar) /usr/bin/blah
c7d5a998d	b96c5e559	Mon May 17 22:19:56 2004 +0000	Fix some minor typos and formatting goofs
52d63d6d7	93bf2196c	Sun May 16 20:20:41 2004 +0000	Fix some line wrap and update (c) year
fe449ba2b	a30d516f6	Wed Apr 7 02:03:16 2004 +0000	Fix install-dirs
cbfbde616	dee266e4d	Sat Feb 14 15:13:57 2004 +0000	Un-Fix last license munge
5ccddf817	24155a405	Thu Jan 22 02:57:01 2004 +0000	Fix suspending the editor in -e mode.  Because we do a fork() first we need to be notified when the child has been stopped and then send that same signal to ourself so the shell can do its job control thing.
63e1f3dd9	2d21140a3	Thu Jan 22 00:08:58 2004 +0000	fix typo
03f5f4087	e404f54c2	Sat Jan 17 18:49:59 2004 +0000	Fix a bug when set_runaspw() is used as a callback.  We don\'t want to reset the contents of runas_pw if the user specified a user via the -u flag.
f192682f6	dd4acb880	Fri Jan 9 05:32:55 2004 +0000	Update to libtool 1.5 with local changes:  o no ldconfig in the finish step  o assume no libprefix or version is needed
dd4acb880	63e8d52f5	Fri Jan 9 05:15:38 2004 +0000	Fix compilation under K&R
bac45090a	a39a63f4f	Tue Jan 6 06:42:14 2004 +0000	Regen w/ updated byacc from OpenBSD; fixes a gcc 3.2 issue with generated code.
a39a63f4f	0f6749fa2	Tue Jan 6 06:42:14 2004 +0000	Regen w/ updated byacc from OpenBSD; fixes a gcc 3.2 issue with generated code.
e34adcc2c	3062ac665	Tue Dec 30 22:33:50 2003 +0000	regen after pasto fix
ccef4e334	0ce9403a4	Tue Dec 16 18:51:45 2003 +0000	fix pasto in VISUAL description
d619fd43a	8cd9f4f1e	Sun Jun 29 01:31:55 2003 +0000	Fix a core dump on Solaris by preserving the pam_handle_t we used during authentication for pam_prep_user().  If we didn\'t authenticate (ie: ticket still valid), we call pam_init() from pam_prep_user(). This is something of a hack; it may be better to change the auth API and add an auth_final() function that acts like pam_prep_user().
27ad285a0	7e53863e5	Mon Jun 9 20:07:56 2003 +0000	Also exit waitpid() loop when pid == 0.  Fixes a problem where the sudo process would spin eating up CPU until sendmail finished when it has to send mail.
684f62dd0	c917da1cc	Tue May 6 04:31:24 2003 +0000	Fix an off by one error when reallocating the environment; Kevin Pye
c917da1cc	04b402662	Wed Apr 30 18:04:58 2003 +0000	Fix User_Spec definition; SEKINE Tatsuo
58887b76b	ce070cdc6	Wed Apr 2 18:57:34 2003 +0000	Correct number of args to krb5_principal_get_realm() and fix an unclosed comment that hid the bug.
632dbebef	f761cef5c	Tue Apr 1 15:02:49 2003 +0000	fix strlcpy() rval check (innocuous)
8cc257b59	cf8618c7a	Fri Mar 21 20:10:22 2003 +0000	Add -lskey or -lopie directly to SUDO_LIBS instead of having AC_CHECK_LIB() add them to LIBS.  Fixes visudo linkage.
0343559c5	a7d746af2	Thu Mar 20 04:33:21 2003 +0000	fix kerberos lib check when a path is specified
a7d746af2	2897c23e9	Thu Mar 20 02:04:32 2003 +0000	Fix boolean thinko in SIGCHLD reaper and call reapchild after sending mail instead of doing a conditional sudo_waitpid.
bb2c3323d	8d8b59796	Sat Mar 15 20:10:42 2003 +0000	make the malloc(0) error specific to each function to aid tracking down bugs.
80013dd91	4b7b3c7f5	Sat Mar 15 19:10:38 2003 +0000	Make this compile w/ Heimdal and fix some gcc warnings.
7e05ae7a3	18f3cfdf6	Sat Mar 15 17:51:45 2003 +0000	fix indentation
2aec2bd72	f4b5af8da	Sat Mar 15 00:48:34 2003 +0000	Fix typo; check pw_uid, not pw_gid after setusercontext() failure.
50b049dcc	debf9f09c	Fri Mar 14 02:38:06 2003 +0000	put -ldl after -lpam, not before; fixes static linking on Linux
debf9f09c	af7c4632f	Fri Mar 14 02:17:38 2003 +0000	Avoid malloc(0) and fix the loop invariant for the getifaddrs() case.
450a56193	fc387e982	Mon Mar 10 00:34:09 2003 +0000	fix a typo; David Krause
fc387e982	466216fe8	Fri Mar 7 15:46:18 2003 +0000	fix typo
5478ef4e2	f1b032925	Mon Jan 20 21:07:51 2003 +0000	fix typo I introduced in last merge
8b3c38d20	cce84a181	Tue Jan 7 00:02:33 2003 +0000	Better fix for sudoers files w/o a newline before EOF.  It looks like the issue is that yyrestart() does not reset the start condition to INITIAL which is an issue since we parse sudoers multiple times.
cce84a181	35cf881d7	Mon Jan 6 23:47:04 2003 +0000	Work around what appears to be a flex bug when dealing with files that lack a final newline before EOF.  This adds a rule to match EOF in the non-initial states which resets the state to INITIAL and throws an error.
e27e963f2	1996179bf	Sun Dec 15 16:24:24 2002 +0000	Fix pasto/thinko in setresgid()/setregid() usage. Want to set effective gid, not real gid, when reading sudoers.
c8fa23112	b49046433	Fri Dec 13 17:48:11 2002 +0000	Fix IRIX fallout from name changes in man dir/sect Makefile variables. Patch from erici AT motown DOT cc DOT utexas DOT edu
897b55137	f7e953201	Tue Nov 26 17:09:59 2002 +0000	fix typo in comment; Pedro Bastos
fd140ff5d	b152da4cd	Fri Nov 22 19:11:47 2002 +0000	minor sign fixes pointed out by gcc -Wsign-compare
faabf3bac	4f2d87e28	Fri Nov 22 18:33:47 2002 +0000	Before exec, restore state of signal handlers to be the same as when we were initialy invoked instead of just reseting to SIG_DFL. Fixes a problem when using sudo with nohup.  Based on a patch from Paul Markham.
3437e96a3	9c2e0aeda	Mon May 20 20:51:23 2002 +0000	Fix rcsid
9c2e0aeda	f3ddf66e0	Mon May 20 20:50:41 2002 +0000	Fix SecurID API test
80f50dbc4	ac8ca82f0	Sun May 5 20:25:10 2002 +0000	Don\'t set sysconfdir to \'/etc\' if the user has specified a --prefix.
ac8ca82f0	0f60107a1	Sun May 5 20:14:59 2002 +0000	Some fixes for autoconf 2.53 from Robert Uhl  o don\'t AC_SUBST LIBOBJS  o force a 4th arg for AC_CHECK_HEADER() to workaround a bug
e0a5ce978	cc8a177c9	Fri Apr 26 19:12:34 2002 +0000	Fix two typo/pastos; from jrj@purdue.edu
7cc2f3b3e	99cc62452	Sat Mar 16 00:44:48 2002 +0000	Remove Chris Jepeway\'s email address so people don\'t bug him ;-)
eb97ce45e	8b7187483	Tue Jan 15 20:39:59 2002 +0000	Only OR in MODE_RESET_HOME if MODE_RUN is set. Fixes a problem where "sudo -l" would not work if always_set_home was set.
96fc0545c	43a65bb5c	Sat Jan 12 19:00:15 2002 +0000	Fix mansect substitution
2fe1bcd3d	0244c4ee6	Thu Jan 10 18:00:58 2002 +0000	Fix case where neither whoami nor id are found
705c4c751	8aa5f6850	Mon Dec 31 05:53:23 2001 +0000	Fix off by one error in number of bytes allocated via malloc (does not affected any released version of sudo).
087f5a7d5	fdae7ed9d	Tue Dec 18 17:42:37 2001 +0000	Fix setting of $USER and $LOGNAME in the non-reset_env case. Also allow HOME, SHELL, LOGNAME, and USER to be specified in keep_env
16912179e	df7144394	Sat Dec 15 16:51:11 2001 +0000	Fix listpw and verifypw sections, they were not being formatted properly.
d24eac7fd	b4b65750e	Sat Dec 15 16:38:21 2001 +0000	fix typos
b083b9f92	79df2fa42	Sat Dec 15 02:27:17 2001 +0000	Fix CIDR handling here too.
947573dbe	afe8333fc	Sat Dec 15 01:00:38 2001 +0000	Fix check for sigaction_t
3d723eda8	82a1cba52	Fri Dec 14 23:33:38 2001 +0000	Fix compilation on K&C
b3a5ef5b7	3b925f81a	Fri Dec 14 22:15:56 2001 +0000	fix typo
4572e8046	bcdcc32a7	Thu Dec 13 01:07:25 2001 +0000	Fix CIDR -> in_addr_t conversion.
76ff0218c	d38e57ef4	Tue Dec 11 01:27:42 2001 +0000	Fix generation of entries with NULL descriptions.
78d67cfb5	eac21ad7b	Tue Nov 13 00:32:11 2001 +0000	Document new behavior of negative values of timestamp_timeout Fix a typo
2d5486db9	1d232a6aa	Fri Nov 2 22:25:21 2001 +0000	fix breakage in last commit
dea43637e	d50e2bb38	Fri Nov 2 20:59:22 2001 +0000	fix I_TS_TIMEOUT vs. I_TIMESTAMP_TIMEOUT pasto in previous commit
27a4c619b	717eb3fdf	Fri Nov 2 20:51:18 2001 +0000	fix warning when no args
51dd80bd7	12a978331	Tue Sep 18 01:32:35 2001 +0000	fix typos and grammar; pjanzen@foatdi.harvard.edu
9dd02e2fb	c70104020	Fri Apr 13 01:41:57 2001 +0000	Fix a non-exploitable buffer overflow in the word splitting code.  This should really be rewritten.
a6b005f25	6fcf09f56	Wed Apr 4 17:17:04 2001 +0000	Fix a pasto in flock-style unlocking and include <sys/file.h> for flock on older systems; twetzel@gwdg.de
6fcf09f56	a788475e5	Wed Apr 4 17:14:52 2001 +0000	regen to get NeXT lockf/flock fix
a64a6abd3	132f59534	Fri Mar 2 14:09:55 2001 +0000	Fix negation of paths in a boolean context.  Problem found by apt@UH.EDU
f0a75258b	16e6a3b84	Sun Jan 7 18:55:32 2001 +0000	Regenerate with a fix to flex.skl that preserves errno from clobbering by isatty().
4ca4d6515	5481e2289	Sat Dec 30 21:58:11 2000 +0000	fix typo in last commit
1875e4747	572b4cf39	Sat Dec 30 21:22:08 2000 +0000	Make env_keep override badenv_table as documented Fix traversal of badenv_table (broken in last commit)
211d8c7de	6448c3523	Tue Dec 19 03:35:07 2000 +0000	Grammatical fixes from Paul Janzen
f31d6ce25	84baa9127	Sun Oct 29 22:31:42 2000 +0000	Remove debugging code that should not have been committed, oops.
e23d30b91	2ad0d64a1	Fri Oct 27 22:41:48 2000 +0000	Fix a coredump in the logging functions if gethostname(2) fails by deferring the call to log_error() until things are better setup.
2ad0d64a1	dea1ce4d3	Fri Oct 27 22:35:42 2000 +0000	Fix errant \';\' (typo) that broken MSG_ONLY
e7ee4f988	2365c52b2	Thu Oct 19 14:09:07 2000 +0000	Fix typo; from sato@complex.eng.hokudai.ac.jp
44b9e4d4b	ded7261fa	Mon Oct 9 01:46:55 2000 +0000	Fix a typo and give a URL for the sudo history.
ded7261fa	9745a3194	Sun Oct 8 16:25:58 2000 +0000	fix typos; pepper@reppep.com
61048797f	7a2dfb77f	Sun Jun 4 23:51:05 2000 +0000	Add a missing check for UserEditor == NULL Add missing \'+\' before line number when invoking editor to fix a syntax error
165bd7faf	30daa8325	Tue May 9 15:42:38 2000 +0000	Fix root, runas, and target authentication for non-passwd file auth methods.
30daa8325	2d50daad2	Sat Apr 22 18:15:15 2000 +0000	Use B<-Z> not C<-Z> for command line flags in all places.  This is more consistent and works around a bug in Pod::Man.
2d50daad2	576ea0ed1	Sat Apr 22 17:59:26 2000 +0000	Fix an occurence of \'semicolon\' that should be \'colon\'
576ea0ed1	455f27816	Wed Apr 19 19:30:28 2000 +0000	Fix --with-badpri help line
455f27816	978e3f8bc	Mon Apr 17 18:01:14 2000 +0000	Bracket calls to syslog with an openlog() and closelog() since some authentication methods (like PAM) may do their own logging via syslog.  Since we don\'t use syslog much (usually just once per session) this doesn\'t really incur a performance penalty. It also Fixes a SEGV with pam_kafs.
978e3f8bc	aef6d6ddb	Sat Apr 15 20:32:59 2000 +0000	Fix -H flag.  runas_homedir is only valid after set_perms(PERM_RUNAS, mode)
d168a21ce	4d4ed8c16	Thu Mar 23 00:35:59 2000 +0000	Add FreeBSD login.conf support (untested on BSD/OS) based on a patch from Michael D. Marchionna. configure now does substitution on the man pages, allowing us to fix up the paths and set the section correctly.  Based on an idea from Michael D. Marchionna.
4d4ed8c16	78b6514e5	Thu Mar 23 00:27:41 2000 +0000	Better fix for handling HP-UX aging info.
a6ad7f071	568483159	Mon Mar 13 16:05:05 2000 +0000	Get rid of grandchild hack, it was causing problems and there is really no need for it.  This fixes a bug where we spin eating up CPU when the user runs a long-running process like a shell.
4ea67119e	8a7226ad7	Mon Mar 6 19:42:21 2000 +0000	HAVE_SECUREWARE -> HAVE_GETPRPWNAM; fixes secureware support
f1c2ba6aa	54fbe0854	Sun Feb 27 03:54:20 2000 +0000	fix usage string
de44c711b	09b23e7b4	Sun Feb 27 03:11:23 2000 +0000	Fixed a bug that caused an infinite loop when the password timeout was disabled.
82b60ddc2	26b93e27f	Sun Feb 13 18:38:14 2000 +0000	Fix thinko, some && should have been || in the last commit
30c5e442f	a4f529eae	Fri Jan 28 01:41:33 2000 +0000	fix a yacc (skeleton.c) warning
1db208b99	5d05fbe95	Wed Jan 26 21:21:00 2000 +0000	Fix some while lies
15a1669d5	6e5f1c729	Mon Jan 24 02:59:12 2000 +0000	Better detection of PAM errors and fix custom prompts with PAM. Based on patches from "Cloyce D. Spradling" <cloyce@headgear.org>
d9790399b	90371b1c0	Wed Jan 19 19:07:24 2000 +0000	Fix sudoers locking in visudo.  We now lock the sudoers file itself, not the temp file (since locking the temp file can foul up editors).  The previous locking scheme didn\'t work because the fd was closed too early.
f63b8d321	e4f3853d7	Wed Jan 19 02:23:48 2000 +0000	Add a test for the -Aa flag w/ HP-UX\'s cc.  Fixes compilation with the unbundled HP-UX cc.
20e44882b	0ab8ad3c6	Mon Jan 17 23:45:28 2000 +0000	aix fix
a597c4ad5	26f5aa6f2	Mon Jan 17 03:57:26 2000 +0000	o Fix some typos/omissions o Add section on verifypw and listpw o Define how NOPASSWD interacts with the -v and -l flags
34d793254	12f521609	Sun Dec 5 19:06:09 1999 +0000	fix parsing of runas lists: o oprunasuser and runaslist now return a value o in a runasspec, if a runaslist does not return TRUE, set runas_matches to   FALSE.  Normally, a runaslist only returns FALSE for explicitly denied   users. o since runaslist does not modify the stack there is no need for a push/pop   in runasalias.
449f67f77	a6a2b564d	Thu Dec 2 20:31:25 1999 +0000	o Kill shell_noargs option, it cannot work since the command needs to   be set before sudoers is parsed. o Fix the "set_home" sudoers option (only worked at compile time). o Fix "fqdn" sudoers option.  We now set host/shost via set_fqdn which   gets called when the "fqdn" option is set in sudoers. o Move the openlog() to store_syslogfac() so this gets overridden   correctly from the sudoers file.
df7c6e0bf	96ffd91ec	Mon Nov 29 01:57:05 1999 +0000	fix some syntactic goofs
4fd3e643b	1fe397ae5	Tue Nov 23 18:07:16 1999 +0000	fix typo
dab213c3e	1f0fa1814	Tue Nov 23 18:06:45 1999 +0000	fix a warning on redhat and spew an error if pam_authenticate() returns an error other than AUTH_SUCCESS or PAM_PERM_DENIED
3e6f6697c	1976aec18	Tue Nov 16 06:16:39 1999 +0000	fix typos
d00a8de2f	3299d72a5	Tue Nov 16 05:42:28 1999 +0000	get rid of references to sudo-bugs.  Now mention the web site or the sudo@ alias
9e834851b	d44b9e29f	Fri Nov 5 22:11:55 1999 +0000	Fix printing of type T_MODE in dump_defaults()
a7cc50dab	3f1581ae6	Mon Nov 1 04:14:09 1999 +0000	Fix compilation problem when --with-logging=file was specified.  This means that syslog is now required to build sudo but that should not be a problem.  If it is it can be fixed trivially with a configure check for syslog() or syslog.h.
deb02f9b3	deab20a57	Sun Oct 10 17:56:02 1999 +0000	o Add T_PATH flag to allow simple sanity checks for default values that   are supposed to be pathnames. o Fix a duplicate free when visudo finds an error.
7b5e21697	0da16dc26	Tue Sep 14 16:58:56 1999 +0000	fix copyright date
86c1328f6	df15b27a0	Sat Aug 28 08:22:27 1999 +0000	fix definition of OCTECT
79faf00e5	54a43740e	Fri Aug 27 15:53:29 1999 +0000	fix --enable-noargs-shell
1a5da52c7	f4f46ff02	Tue Aug 24 16:43:37 1999 +0000	Use the : operator some more and fix a typo
8b3c8d5c7	db4cac174	Sun Aug 22 17:10:20 1999 +0000	fix comment
1afa5be40	b7a10e740	Tue Aug 17 15:26:17 1999 +0000	Just have sudo-bugs contact info in one place
d7ebfe06d	2386dc1b4	Thu Aug 12 16:24:10 1999 +0000	o Digital UNIX needs to check for *snprintf() before -ldb is added to LIBS since -ldb includes a bogus snprintf(). o Add forward refs for struct mbuf and struct rtentry for Digital UNIX. o Reorder some functions in snprintf.c to fix -Wall o Add missing includes to fix more -Wall
7bb2d52e9	609851d85	Mon Aug 9 14:08:03 1999 +0000	fix check for crypt() in libufc
76148d531	68a2b1678	Sat Aug 7 09:59:43 1999 +0000	o Move lock_file() and touch() into fileops.c so visudo can use them o Visudo now locks the sudoers temp file instead of bailing when the temp file already exists.  This fixes the problem of stale temp files but it does *require* that you not try to put the temp file in a world-writable directory.  This shoud not be an issue as the temp file should live in the same dir as sudoers. o Visudo now only installs the temp file as sudoers if it changed.
16ab37701	0d5a675f5	Wed Aug 4 17:28:47 1999 +0000	o Add \'!\' correctly when expanding Aliases. o Add shortcut macros for append() to make things more readable. o The separator in append() is now a string instead of a char. o In append(), only prepend the separator if the last char is not a \'!\'.   This is a hack but it greatly simplifies \'!\' handling. o In -l mode, Runas lists and NOPASSWD/PASSWD tags are now inherited   across entries in a list (matches current behavior). o Fix formatting in -l mode such that items in a list are separated by   a space.  Greatlt improves readability. o Space for name field in struct aliasinfo is now allocated dyanically   instead of using a (big) buffer. o In add_alias(), only search the list once (lsearch instead of lfind + lsearch)
716e0b543	d1a6fa810	Wed Aug 4 09:35:56 1999 +0000	o Simpler \'!\' support now that the lexer deals with multiple !\'s for us. o In the case of opFOO, have FOO give a boolean return value and set   foo_matches in opFOO, not FOO. o Treat \'ALL\' as a string since it gets fill()\'d in parse.lex--fixes a   small memory leak.  In the long run it may be better to just fix parse.lex   and make ALL back into a token.  However, having it be a string is useful   since it can be easily passed back to the parent rule if we so desire.
3fc0ab768	896c2748e	Sun Aug 1 17:04:05 1999 +0000	correct fix
0368b9e61	234f718e4	Wed Jul 28 09:17:14 1999 +0000	Fix getprpwnam() checking on SCO.  Need to link with "-lprot -lx" when linking test program, not just -lprot.  Also add check for getspnam(). The SCO docs indicate that /etc/shadow can be used but this may be a lie.
d1c145f41	c9e9f07ac	Sun Jul 11 10:43:42 1999 +0000	Fix an uninitialized variable and some cleanup.  Now works (tested)
63209c134	5ab9fa82e	Thu Jul 8 10:46:28 1999 +0000	only save an entry if user_matches && host_matches, even if the stack is empty (fix for previous commit)
fb54a0311	feb78be26	Thu Jul 8 10:35:28 1999 +0000	1) Always save an entry on the stack if it is empty.  This fixes the -l and -v flags that were broken by earlier parser changes.
1eab167a3	c4cb29099	Thu Jun 3 16:34:10 1999 +0000	Fix open(2) return value checking, was NULL for fopen, should be -1 for open
850a52aa6	6b91a87a9	Fri May 14 16:30:14 1999 +0000	 o Replace _PASSWD_LEN braindeath with our own SUDO_MAX_PASS.    It turns out the old DES crypt does the right thing with passwords    longert than 8 characters.  o Fix common typo (necesary -> necessary)  o Update TODO list
16fdb0a5c	06e586ee7	Sat Apr 10 17:03:32 1999 +0000	fix comment
499e86923	9284e417c	Tue Apr 6 05:00:29 1999 +0000	Add VALIDATE_NOT_OK_NOPASS for when user is not allowed to run a command but the NOPASSWD flag was set. Make runasspec, runaslist, runasuser, and nopasswd typeless in parse.yacc Add support for \'!\' in the runas list Fix double printing of \'%\' and \'+\' for groups and netgroups respectively Add *_matched macros (no need for local stack variable).  Should only be used directly after a pop (since top must be >= 2).
49c5a12d8	b3f330600	Tue Mar 30 17:17:54 1999 +0000	Fix another parser bug.  For a sudoers entry like this:     millert	ALL=/bin/ls,(daemon) !/bin/ls sudo would not allow millert to run ls as root.
75fb22990	79c46d1c8	Mon Mar 29 04:31:16 1999 +0000	Fix off by one error introduced in *alloc changes
e4b42c5ea	b789f9e93	Mon Mar 29 00:23:49 1999 +0000	Still not right, this fixes it for real
b789f9e93	217710df3	Mon Mar 29 00:08:02 1999 +0000	Fix for previous commit
217710df3	bd76c1333	Mon Mar 29 00:05:15 1999 +0000	Fix a parser bug that was exposed when mixing different runas specs and ! commands.  For example:     millert        ALL=(daemon) /usr/bin/whoami,!/bin/ls would allow millert to run whoami as root as well as daemon when it should just allow daemon.  The problem was that comma-separated commands in a list shared the same entry on the matching stack.  Now they get their own entry iff there is a full match.  It may be better to just make the runas spec persistent across all commands in a list like the user and host entries of the matching stack.  However, since that is a fairly major change it should gets its own minor rev increase.
bd76c1333	37873b23d	Sun Mar 28 18:50:25 1999 +0000	Simplify PAM code and fix a PAM-related warning on Linux
736359cce	ddb4cacb4	Sun Mar 7 23:34:31 1999 +0000	Fix a bug wrt quoting characters in command args.  Stop processing an arg when you hit a backslash so the quoted-character detection can catch it.
89bdafdc3	8aa6c700b	Mon Feb 22 20:01:47 1999 +0000	back out last configure.in change now that I\'ve hacked autoconf to fix the real problem and add a missing newline
d3730e35f	27a065f26	Mon Feb 22 15:58:11 1999 +0000	When falling back to checking for socket() when linking with "-lsocket -lnsl" check for main() instead since autoconf has already cached the results of checking for socket() in -lsocket.  This is really an autoconf bug as it should use the extra libs as part of the cache variable name.
a650f840c	aeffa02a1	Sun Feb 21 20:18:29 1999 +0000	fix occurrence of $with_timeout that should be $with_password_timeout; Michael.Neef@neuroinformatik.ruhr-uni-bochum.de
aeffa02a1	f9b80fcad	Wed Feb 17 16:40:55 1999 +0000	fix grammar; espie@openbsd.org
463396270	fe4f974b3	Fri Jan 22 18:13:16 1999 +0000	fix and correctly document --with-umask; problem noted by adap@adap.org
fe4f974b3	94026c212	Wed Jan 20 01:38:25 1999 +0000	only use /usr/{man,catman}/local to store man pages if suer didn\'t override prefix or mandir
94026c212	f0f0bcc2f	Wed Jan 20 01:24:41 1999 +0000	fix typo, make --with-SecurID take an arg
55a5687a3	0ca93567b	Tue Jan 19 01:00:20 1999 +0000	better fix for the problem of unresolved symbols in -lnsl or -lsocket
c2621fd7e	3983a7a65	Sun Jan 17 22:27:01 1999 +0000	kill rcs goop in update_version and fix now that version is a const
9daf68bb7	d61383848	Fri Dec 11 17:16:26 1998 +0000	fix tty tickets in remove_timestamp (didn\'t use \':\')
91af18b71	ef4b73161	Thu Nov 5 03:24:40 1998 +0000	fix bugs with prompt expansion
5bdc7d308	1f94c6b38	Sat Oct 24 23:07:02 1998 +0000	fix while loop in sia_attempt_auth() that checks the password.  Only the first iteration was working.
ce733cd8f	23ede59ea	Thu Oct 22 00:35:32 1998 +0000	fix two pastos
23ede59ea	a91e6bc12	Thu Oct 22 00:30:26 1998 +0000	fix typo
8f69024cc	80c1c8dcb	Sun Sep 20 23:14:47 1998 +0000	fix version string
7266c9f0e	8d906459d	Sat Sep 19 00:20:07 1998 +0000	fix typo in sysv4 matching case /.
3dd98aef6	e46758789	Tue Sep 15 02:25:48 1998 +0000	fix version string
9f3d9e122	d4272a1b2	Sun Sep 13 19:50:28 1998 +0000	Better description of new vs. old sudoers modes fix some typos better description of /usr/ucb/cc gotchas on slowaris
68d062c37	eacb84a5f	Sat Sep 12 15:10:07 1998 +0000	mention TROUBLESHOOTING more fix some typos
60c2ab2b5	218e76a05	Fri Sep 11 23:23:33 1998 +0000	fix HAVE_PAM
0643cd950	00861546a	Mon Sep 7 02:59:36 1998 +0000	fix version ,
00861546a	f56bd7754	Mon Sep 7 02:59:06 1998 +0000	fix version
f56bd7754	39a719159	Mon Sep 7 02:57:35 1998 +0000	fix version
1d26f2699	2b2b9eb8e	Tue Jul 28 16:44:23 1998 +0000	fix OTP_ONLY for opie
ae7a8f497	5723320dc	Sat May 2 18:16:03 1998 +0000	fix some fprintf args, ariel@oz.engr.sgi.com (Ariel Faigon)
36ef6aa48	1014adbe0	Mon Apr 6 03:34:36 1998 +0000	fix version
bcae83c5b	cf7b77a03	Tue Mar 31 04:54:50 1998 +0000	support *-ccur-sysv4 and fix two typos
822e075e1	c866646cd	Wed Feb 18 23:19:03 1998 +0000	fix spacing for --with-authenticate help
14292f47c	797a152c6	Wed Feb 18 21:23:57 1998 +0000	fix off by one error in push macro
cd226d56c	3b9b17cd5	Tue Feb 17 06:11:28 1998 +0000	include alloca.h if using bison and not gcc and it exists. fixes an alloca problem on hpux 10.x
6ffcfb752	a58e3f4b1	Wed Feb 11 21:26:59 1998 +0000	mention glibc 2.07 is fixed wrt lsearch()\\.
9cc65287f	b4c1c9190	Fri Feb 6 19:05:19 1998 +0000	remove bogus flush of stderr spew prompt before turning off echo.  Seems to fix a weird problem where if sudo complained about a bogus stamp file the user would sometimes not have a chance to enter a password
b4c1c9190	25ed56fba	Fri Feb 6 19:05:08 1998 +0000	fix bogus flush of stderr
0e8cf35a7	7baad7a52	Fri Jan 23 03:53:52 1998 +0000	fix select usage for high fd\'s (dynamically allocate readfds)
ab0c4bd97	8dfd58be3	Wed Jan 21 06:19:22 1998 +0000	fixed up update_version rule
859e6d86e	7b3bc67b0	Fri Jan 16 16:43:23 1998 +0000	mention that newer glibc is fixed
6a2b6895f	46a2f512f	Tue Jan 13 15:19:08 1998 +0000	fix that bug for real
a703659c3	994d39953	Tue Jan 13 04:59:54 1998 +0000	remove author\'s email addr.  people should mail sudo-bugs
994d39953	166789a1d	Tue Jan 13 04:49:20 1998 +0000	fix version
ab9b35245	07e09b16f	Tue Jan 13 04:10:08 1998 +0000	commands can start with ./* not just /* -- fixes a serious security hole.
687434bc9	82654611c	Sun Nov 23 18:29:24 1997 +0000	fix usage of (username) in conjunction with , and !
ad6df9f51	ce0fc8333	Fri Oct 10 04:54:00 1997 +0000	fdesc bug is fixed in Open/Net BSD
8b28002ef	abeaf9523	Wed May 21 15:57:26 1997 +0000	fix an occurence of setresuid -> setreuid (typo)
f842ab526	b0192afc3	Thu Jan 16 00:05:23 1997 +0000	fixed descriptin
33f9387f3	e5b84ec22	Thu Nov 14 03:50:55 1996 +0000	added Runas_Alias example and fixed syntax errors
fcb212ea8	df20cedfc	Tue Nov 12 16:59:02 1996 +0000	fixed more_aliases
8336c86cb	b317dc70a	Mon Nov 11 15:49:11 1996 +0000	fix Runas_Alias stuff Alias\'s in runas list now get expanded (but it is gross)
28258dfcc	d189849b4	Fri Aug 30 00:40:30 1996 +0000	fixed typo
375014458	35825133a	Sat Aug 17 23:43:41 1996 +0000	fixed up some wording
be3b37d15	f0d121ea2	Sat Aug 17 23:07:29 1996 +0000	fixed some XXX
df08f782b	5436bf7c8	Sat Aug 17 22:27:58 1996 +0000	fixed a bug ,
0de439852	76d219d87	Sat Aug 17 17:20:19 1996 +0000	fixed a bug
50c058e5f	0f643f7a4	Thu Aug 15 19:48:31 1996 +0000	fixed some bugs
740d2166e	8c35fa2ec	Thu Aug 15 19:46:45 1996 +0000	fixed thinko
8c35fa2ec	4fb2f4ca9	Thu Aug 15 19:46:04 1996 +0000	fix comment
73ef23903	bdfd25e87	Tue Jul 30 17:45:44 1996 +0000	fixed DUNIX check for shadow pw
bdfd25e87	9e058b7c2	Tue Jul 30 17:41:59 1996 +0000	now only turn off echo if it is already on.  this fixes a race when you use sudo in a pipelin
945d9795e	efb526bb2	Mon Jul 22 19:50:59 1996 +0000	fixed dummy command_matches()
efb526bb2	7fb14dd3f	Mon Jul 22 19:50:42 1996 +0000	fixed prototype
967ae180e	015c90151	Sun Jul 14 01:30:03 1996 +0000	fixed typo
50f80d4b0	cde762379	Sat Jul 13 22:24:38 1996 +0000	fixed 2 syntax errors
ed9227dfd	e79f19be3	Fri Jul 12 00:59:06 1996 +0000	fixed a typo/thinko that broke BSD\'s with sa_len
5a616c40c	54d39940b	Mon Jul 8 18:16:45 1996 +0000	fixed -u user support
bae4e50e0	d0d972fa0	Mon Jul 8 17:30:39 1996 +0000	fixed no_passwd vs. runas_matched
633b6d2c3	7a5a50b75	Mon Jul 8 02:30:25 1996 +0000	fixed backwards compatibility with sudo 1.4 sudoers mode for root readable/writable filesystems
4d9f668bb	ea3da1971	Tue Jun 25 23:31:43 1996 +0000	fixed entry for SUDO_MODE
ea3da1971	d60779d01	Tue Jun 25 22:02:42 1996 +0000	Fixed NFS-mounted sudoers file under solaris both uid *and* gid were being set to -2.  Now beat NFS to the punch and set uid to "nobody" ourselves, preserving group 0 to read sudoers.
c7d5c3edf	a01ddb350	Tue Jun 25 22:00:58 1996 +0000	fixed a typo
2f49ee316	b57aab8cd	Thu Jun 20 04:27:49 1996 +0000	fixed an occurence of \'==\' -> \'=\'
2f7e9de28	399cddc8e	Thu Jun 20 04:20:13 1996 +0000	fixed 2 compiler warnings
b512f62ba	a35441d43	Wed Jun 19 17:53:14 1996 +0000	fixed a typo
a35441d43	8b66b6116	Mon Jun 17 16:19:04 1996 +0000	fixed a formatting thingie
8b66b6116	a23fb9c4f	Mon Jun 17 16:16:11 1996 +0000	fixed -u support with multiple user lists on a line
319a9ffe5	99e16a5a2	Sun Jun 9 03:15:12 1996 +0000	fixed usage()
e4743a46c	f3cdb9aa3	Fri Jun 7 18:33:18 1996 +0000	fixed LONG_SKEY_PROMPT stuff
f3cdb9aa3	1a6b10fe8	Thu Jun 6 19:35:57 1996 +0000	fixed a comment
e04a2ef6c	10a84d536	Thu Jun 6 19:02:51 1996 +0000	fixed decls of lsearch()
afbddeebe	2ed1645b9	Tue May 28 04:01:49 1996 +0000	rmeoved debugging statements
5a32554c0	9ec0715a3	Tue May 28 00:02:30 1996 +0000	fixed off by one error in allocation NewArgv
afe3f2749	94687786e	Mon Apr 29 02:38:36 1996 +0000	now fixes mode on sudoers if set to 0400 to aid in upgrade
94687786e	cc766e700	Sun Apr 28 21:44:04 1996 +0000	fixed pod2man usage
b61573f6d	69e72e361	Fri Apr 5 21:53:02 1996 +0000	fixed some indentation
69e72e361	d51ed38ad	Fri Apr 5 21:48:52 1996 +0000	fixed a typo
1f6605163	9d633ad10	Tue Apr 2 23:58:34 1996 +0000	fixed a typo
20a284166	0eb20432f	Tue Apr 2 21:42:59 1996 +0000	fixed a typo wrt placement of an end paren
27f2f09ed	578218b1a	Tue Feb 6 00:16:12 1996 +0000	fixed a typo
6f8e34d2c	7cb5af2dc	Mon Feb 5 21:10:46 1996 +0000	fixed up some formatting
5003b21c7	32af5520d	Mon Feb 5 21:10:04 1996 +0000	fixed some formatting
3da8d74b0	1d084add8	Mon Feb 5 02:59:21 1996 +0000	removed an XXX (fixed it in getspwuid.c)
53ef7e23c	b220613b8	Sun Feb 4 21:13:54 1996 +0000	fixed up some XXX\'s.  file log format now looks a little more like real syslog(3) format.
65058a100	1714849ac	Fri Feb 2 06:14:20 1996 +0000	fixed dereferencing deadbeef
0f898397f	f19b2ebf8	Fri Feb 2 04:52:53 1996 +0000	fixed a typo in a for() loop
35622b80c	1eb9339ef	Mon Jan 15 16:34:23 1996 +0000	fixed SECURE_PATH
f0f808679	813ac511d	Sun Jan 14 20:21:30 1996 +0000	++version and fixed ISC
d9a1d1425	2d066db85	Thu Jan 11 18:04:43 1996 +0000	fixed a typo
c509bec0c	14ebaab3b	Sun Jan 7 21:00:45 1996 +0000	removed debugging stuff (setting freed ptr to NULL)
ab99db6cc	16bdc95c2	Sun Jan 7 19:25:22 1996 +0000	fixed typo
e59decf05	3aba9c478	Thu Jan 4 05:41:19 1996 +0000	fixed check for lsearch()
3aba9c478	fe1e64dcb	Fri Dec 22 02:53:12 1995 +0000	fixed for AIX now deal if num_interfaces == 0 (should not happen)
332bab8e0	81a441aed	Mon Dec 18 03:36:03 1995 +0000	fixed another occurence of sudo_getpwuid.*
ef4e6fbfa	54d9ede9c	Fri Dec 8 19:11:24 1995 +0000	syslog() fixed in hpux 10.01
c8b4bacee	ffbfd5434	Tue Dec 5 23:58:21 1995 +0000	fixes from Jeff Earickson <jaearick@colby.edu> ,
1c5b326ff	792805deb	Tue Dec 5 23:57:47 1995 +0000	fixed up testsudoers target
86159a83f	d135a0bd1	Tue Nov 28 04:32:13 1995 +0000	fix for C2 on hpux 10 now uses -linet if it exists
17f433989	fa560d43b	Tue Nov 28 04:17:02 1995 +0000	fixed typos w/ dce stuff
a8014ddfc	b60cb8ec7	Tue Nov 21 06:47:39 1995 +0000	fixed a few typos
310055043	d058a9b04	Tue Nov 21 03:10:07 1995 +0000	fixed up comments
4865f17ea	02bc955a1	Mon Nov 20 19:40:58 1995 +0000	fixed exempt_group stuff for OS\'s that don\'t put base gid in group vector
a72a93101	dfa3e6d8c	Mon Nov 20 03:31:38 1995 +0000	fixed clean rule
ac8c65d15	baae3457a	Sun Nov 19 23:25:51 1995 +0000	fixed S/Key support
53ae703b7	402ce291c	Sun Nov 19 23:23:46 1995 +0000	fixed SKey support
3251001be	e3f95518c	Sun Nov 19 18:59:36 1995 +0000	fixed description of EXEMPTGROUP
5eb9954c2	cec2ef656	Sun Nov 19 02:35:38 1995 +0000	replaced $man_prefix with $mandir
cec2ef656	db2cf11f5	Sun Nov 19 02:30:48 1995 +0000	fixed a typo
910e9c09f	4bdbf190f	Mon Nov 13 05:52:24 1995 +0000	MAN_PREFIX -> man_prefix now sets prefix and exec_prefix
4bdbf190f	96be725f3	Mon Nov 13 05:52:08 1995 +0000	now uses exec_prefix & prefix from configure
87fbfbc19	4b3c1201e	Sat Sep 23 20:46:43 1995 +0000	fixed headers that moved to emul dir
4b3c1201e	13b5f7de9	Sat Sep 23 16:05:40 1995 +0000	fixed deref of nil pointer if no args
08a934797	cc1ab5b5b	Sat Sep 9 22:34:40 1995 +0000	fixed spacing quoting [,:\\\\=] now works correctly append() and fill() now take args to make the above work
cc1ab5b5b	63cfcdca9	Sat Sep 9 00:51:49 1995 +0000	fixed a typo that caused commands with no tty on fd 0 but a tty on fd 1 to erroneously have "none" as their tty
993b7e5ec	f3268e58e	Sun Sep 3 18:09:40 1995 +0000	fixed incorrect #ifdef termio uses "unsigned short" not int for c_?flag
f3268e58e	963dd0e35	Sun Sep 3 17:19:51 1995 +0000	fixed a spelling error
963dd0e35	7c6446141	Sun Sep 3 17:17:17 1995 +0000	fixed typo
7c6446141	4b39028f9	Sat Sep 2 16:55:40 1995 +0000	fixed a comment
184dac958	24df673d9	Fri Sep 1 18:18:32 1995 +0000	fixed a logic bug.  Was denying a command if user gave command line args but there were none in the sudoers file which is wrong.
8e59f998d	dde7f1113	Fri Sep 1 05:03:27 1995 +0000	fixed netgr_matches() prototype
eaf845fd2	d47330a7b	Fri Sep 1 04:50:07 1995 +0000	fixed comments
d47330a7b	08719aef1	Fri Sep 1 04:49:48 1995 +0000	fixed negation problem (doh!)
08719aef1	023afc59e	Fri Sep 1 04:25:17 1995 +0000	fixed 2nd parameter to lfind()
eb742282b	ffbade154	Fri Sep 1 02:54:48 1995 +0000	fixed -k load_interfaces() now gets called if FQDN is set -p now works with -s
fee6ecbf0	bf3ef98ba	Mon Aug 14 03:35:43 1995 +0000	fixed loading of cmnd_args (was including command name too)
bf3ef98ba	f1bd62ffb	Mon Aug 14 03:34:36 1995 +0000	fixed a core dump due to incorrect if construct
aa87fbdeb	f82ab3e8c	Sun Aug 13 04:33:08 1995 +0000	fixed check for ISC
15f6c5ef5	5d8c7fe68	Thu Jul 27 10:52:58 1995 +0000	fixed free() of an uninitialized pointer (yuck)
3b623d1da	c0435b95d	Tue Jul 25 01:04:05 1995 +0000	fixed up my email address
cfed883f6	52a3360e3	Sun Jul 23 23:58:02 1995 +0000	added _INSULTS suffix to HAL & GOONS end
52a3360e3	7b931ceaa	Sun Jul 23 23:57:00 1995 +0000	added _INSULTS suffix to HAL & GOONS
6cda67389	93347870a	Sun Jul 23 21:47:20 1995 +0000	added check for max len of uid_t fixed sco vs. isc check
964e5aae9	f6037dabc	Tue Jul 18 17:35:56 1995 +0000	fixed prreadlink() prototype
568aeeec7	a03c27ecb	Tue Jul 18 03:53:56 1995 +0000	added SPW_ prefix
14ec8cc12	77577c970	Fri Jul 7 20:06:03 1995 +0000	fixed permissions check on /tmp/.odus
77577c970	fc15f54aa	Thu Jul 6 23:35:09 1995 +0000	fixed some comments
0c39d1e66	237080124	Sun Jul 2 22:13:15 1995 +0000	fixed check for fulkl void impl.
27f0a0437	70da65274	Sat Jul 1 18:26:27 1995 +0000	added note about buggy AIX compiler
c96837917	4c67e31d9	Fri Jun 23 00:26:33 1995 +0000	fixed test for full void impl
51dd620a8	b37760089	Mon Jun 19 20:32:22 1995 +0000	fixed include file order for SUDO_FUNC_UTIME_POSIX
20c9ac303	a6dbb5d20	Mon Jun 19 19:23:30 1995 +0000	fixed typo
db30358dd	11ab938fa	Mon Jun 19 17:38:05 1995 +0000	fixed a typo
44ce99e44	5986e74e4	Mon Jun 19 17:20:04 1995 +0000	fixed fascist C compiler warning
a81984983	42b3a170e	Thu Jun 15 03:40:07 1995 +0000	fixed up spacing and added void casts where appropriate
42b3a170e	8adfa4e1d	Thu Jun 15 03:27:40 1995 +0000	fixed problem with "-p prompt" but no args
5d132edc1	ca4368dd8	Wed Jun 7 02:41:46 1995 +0000	removed debugging printf
d562e7ff7	b4f1460d6	Thu Apr 13 17:54:17 1995 +0000	fixed indentation
b4f1460d6	52b6b6965	Thu Apr 13 17:35:27 1995 +0000	fixed a typo
029096a2c	37eab2662	Thu Apr 13 17:18:28 1995 +0000	fixed a typo and added testsudoers stuff
19e806c2e	84eee6209	Wed Apr 12 23:31:39 1995 +0000	applied fixed patch from Chris
84eee6209	8b380a172	Tue Apr 11 18:30:02 1995 +0000	fixed a typo
a783a139f	31ed7f457	Mon Apr 10 22:04:34 1995 +0000	fixed probs caused by making nslots and naliases a size_t
620997189	ba0bce3a6	Sun Apr 9 21:13:04 1995 +0000	fixed a bug
588891cf3	a6923398d	Sun Apr 9 19:24:20 1995 +0000	fixed bug with full void impl check
a6923398d	dfcb0eb6e	Sun Apr 9 03:11:06 1995 +0000	fixed User_Alias supoprt
521f2f6ac	aa03cdc83	Fri Apr 7 19:37:33 1995 +0000	ntwk_matches -> addr_matches now use inet_addr() not inet_network() (which expects octet boundaries) fixes for OSF (sizeof(int) != sizeof(long))
aa03cdc83	d00426b55	Fri Apr 7 19:08:17 1995 +0000	took out debugging info
ec1c2e69e	e27349c62	Fri Apr 7 03:30:53 1995 +0000	fixed loading of interfaces struct still has debugging info in though
e27349c62	a7d2490f1	Fri Apr 7 02:23:19 1995 +0000	fixed typo
6e45d61aa	285bc82b3	Tue Apr 4 22:17:11 1995 +0000	fixed my stupid bug where I used NAMLEN on something I wanted to just get the name from.  argh.
285bc82b3	1259d8444	Mon Apr 3 20:58:56 1995 +0000	fixed argument order of memmove() that i hosed when converting from bcopy().  arghh.
1259d8444	e94d4c878	Mon Apr 3 19:33:29 1995 +0000	finally fixed DISTFILES line
f650082b1	d6a68fe4a	Sat Apr 1 06:52:50 1995 +0000	fixed bug where if you hit return at first sudo prompt it would still log as a failure
911605896	5df37f27d	Sat Apr 1 00:16:02 1995 +0000	removed some unused vars and fixed up uid2str
0590d7b64	2bc423cab	Fri Mar 31 23:18:57 1995 +0000	fixed a typo I introduced in the last checkin :-(
032a129cf	f4e9cea28	Fri Mar 31 21:12:41 1995 +0000	dirty hack to fix parser bug.  i don\'t really like this but it works for now...
0d4643159	e281c20f4	Thu Mar 30 03:06:12 1995 +0000	fixed memset macro
e3bed398b	dda75b2fd	Wed Mar 29 21:11:18 1995 +0000	fixed type of aliascmp() args
efbfee912	e29e1f9d2	Wed Mar 29 00:35:10 1995 +0000	eliminated bug #1 (yay)
bc207b74c	312b501f4	Mon Feb 6 22:43:59 1995 +0000	fixed the test for irix 5.x to skip bad libs
8f18ca32c	ee8a3a440	Mon Jan 16 22:01:37 1995 +0000	fixed an echo
9961a7c96	b5096e0ce	Fri Dec 16 01:32:14 1994 +0000	added a visudo bug
7806a5c2d	be3b8f806	Sat Nov 12 23:33:24 1994 +0000	fixed user_is_exempt to return 0 if EXEMPTGROUP is not set
7b434f97f	8dc58160a	Tue Nov 8 01:39:43 1994 +0000	fixed typo added set_perms support added skey support added seteuid()/setegid() emulation for AIX
368e652de	34c40cc12	Fri Oct 21 16:02:33 1994 +0000	fixed typo
43e8cd4fa	92b4dea2d	Tue Sep 20 23:37:53 1994 +0000	now use sudolineno instead of yylineno fixed bison warnings
fa4273a93	98e893ece	Tue Sep 20 22:48:59 1994 +0000	fixed uname | sed (needed to quote the \'[\')
98e893ece	fff477cb8	Tue Sep 20 22:42:21 1994 +0000	replaced yylineno with sudolineno fixed bison syntax errors
7021bdc4e	abadb6ec6	Tue Sep 20 21:35:43 1994 +0000	fixed typo added info for -l flag
b56bc92e0	7229829c8	Fri Sep 2 19:57:37 1994 +0000	changed sudo-bugs.cs.colorado.edu -> sudo-bugs@cs.colorado.edu
7229829c8	525954e1b	Fri Sep 2 19:55:56 1994 +0000	changed sudo-bugs.cs.colorado.edu -> sudo-bugs@cs.colorado.edu
525954e1b	5019a29e6	Fri Sep 2 19:54:28 1994 +0000	changed sudo-bugs.cs.colorado.edu -> sudo-bugs@cs.colorado.ed
ad6f7a488	3f557e4b2	Thu Sep 1 19:26:37 1994 +0000	fixed logging problem where mail would not say which user it was
e6e9c18d0	07594fd73	Thu Sep 1 17:12:48 1994 +0000	fixed osf problem
971a69bb2	c3be7c93c	Sat Aug 13 01:22:10 1994 +0000	fixed a bug that caused directory specs in a Cmnd_Alias to fail if the last entry in the spec failed (ie: it was only looking at the last entry). CLeaned things up by adding the cmndcmp() function--all neat & tidy
b20e86de9	65a4afee4	Mon Aug 8 04:08:00 1994 +0000	took out errno decl since sudo.h does it for us fixed up a next cc warning added params to func decls when STDC_HEADERS is not defined
9007d32f3	a05e773b6	Fri Aug 5 21:48:56 1994 +0000	now defines HAVE_FLEX fixed up man stuff so that it looks for nroff to determine whether or not to install a cat or man page
3353665bb	81cf2c5e6	Fri Aug 5 00:17:47 1994 +0000	fixed off by one error with MAXPATHLEN and fixed a comment
abd71f1a7	6259b8270	Thu Aug 4 20:38:20 1994 +0000	fixed on
193f01342	46a7d9cd5	Mon Jul 25 22:37:22 1994 +0000	fixed typo
df5ff10a2	8d3e7540f	Thu Jul 14 16:34:40 1994 +0000	fixed AFS typo
56bcd39a2	8680c1962	Fri Jun 24 23:45:39 1994 +0000	fixed a test aded --with-C2 and --with-tgetpass
a534a9688	ba0fa8127	Mon Jun 13 19:17:24 1994 +0000	fixed it (duh, rtfm)
d8013e48b	c2c72c6e7	Tue Jun 7 23:21:23 1994 +0000	fix bug where /dirname would return NULL
bada3e70e	2aef79a8d	Sun May 29 19:18:32 1994 +0000	fixed typo
51ae4df13	48f3cb673	Wed May 25 03:08:33 1994 +0000	fixed a typo
e67d74fd5	3e94c6f25	Tue May 24 20:18:57 1994 +0000	added cwd and fixed stupid core dump that makes no sense.  sigh.
eba71ad92	155ee3a3c	Tue May 24 19:55:30 1994 +0000	fixed make distclean & realclean
368f8ff12	706d34d6e	Sat May 14 21:56:22 1994 +0000	fixed for irix5
20fb526ac	af68170f3	Sat Mar 12 19:00:19 1994 +0000	fixed typoe
e3763dbc9	c06006ed3	Wed Feb 9 19:54:44 1994 +0000	fixed typo
273de6003	e44792a09	Sun Feb 6 00:19:45 1994 +0000	fixed a typo + indentation
ed2ad1b1c	89db72019	Tue Dec 7 06:33:16 1993 +0000	minor update + spell fix
3424e2f97	606f03842	Fri Dec 3 03:19:31 1993 +0000	fixed warning (include strings.h)
d4eee981f	f3b1d00d6	Tue Nov 30 01:35:20 1993 +0000	alpha change to remove LD_-like thing fixed SHLIB_PATH stuff -- now gets removed correctly
5c4b258d2	c9af5ccf7	Mon Oct 18 00:30:35 1993 +0000	hpux 9 fix, removes SHLIB_PATH linux patch
e75a6d3b5	847ce91e0	Mon Oct 4 19:10:33 1993 +0000	used indent to "fix" coding style
2ddeba57e	fde49b4c7	Wed Sep 8 15:53:08 1993 +0000	redid the fix for non-executable files in an easier to read way plus some minor aethetic changes
fde49b4c7	5ae9d330e	Wed Sep 8 15:39:08 1993 +0000	fixed bug with non-executable tings of same name in path introduced by checkig errno after stat(2).
5ae9d330e	c3636ccc4	Sun Sep 5 14:02:14 1993 +0000	fixed off by one error
4ccc94fc1	3d8cc2e42	Sat Sep 4 19:30:18 1993 +0000	fixed ifndef -> ifdef
f530705e0	d555cdb52	Sat Sep 4 19:17:17 1993 +0000	fixed MAXCOMMANDLENGTH now uses USE_CWD and NEED_STRDUP added info about new defines in the comment
696122957	3a96124e8	Sat Sep 4 11:59:36 1993 +0000	now includes sys/param.h didn\'t match trailing / -- fix from rouilj@cs.umb.edu
