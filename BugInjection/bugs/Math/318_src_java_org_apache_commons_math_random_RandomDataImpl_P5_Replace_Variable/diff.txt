--- /RandomDataImpl.java	2023-07-03 21:27:08.295420981 +0000
+++ /Math-106/src/java/org/apache/commons/math/random/RandomDataImpl.java	2023-07-03 21:27:08.295420981 +0000
@@ -315,7 +315,7 @@
             if (r >= p) {
                 n++;
             } else {
-                return n;
+return upper;
             }
         }
         return n;
