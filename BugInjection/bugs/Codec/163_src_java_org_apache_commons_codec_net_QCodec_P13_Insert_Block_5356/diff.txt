--- /QCodec.java	2023-07-04 03:55:17.130911502 +0000
+++ /Codec-1/src/java/org/apache/commons/codec/net/QCodec.java	2023-07-04 03:55:17.130911502 +0000
@@ -160,7 +160,7 @@
             byte[] tmp = new byte[bytes.length];
             for (int i = 0; i < bytes.length; i++) {
                 byte b = bytes[i];
-                if (b != UNDERSCORE) {
+if  (  ( data[i] )  ==  ( BLANK )  )  {     data[i] = UNDERSCORE; }
                     tmp[i] = b;
                 } else {
                     tmp[i] = BLANK;
