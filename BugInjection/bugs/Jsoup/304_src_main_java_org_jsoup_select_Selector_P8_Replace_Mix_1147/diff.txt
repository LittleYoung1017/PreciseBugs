--- /Selector.java	2023-07-04 03:56:18.734075218 +0000
+++ /Jsoup-1/src/main/java/org/jsoup/select/Selector.java	2023-07-04 03:56:18.734075218 +0000
@@ -301,8 +301,8 @@
         Elements output = new Elements();
         SIBLING: for (Element c: candidates) {
             for (Element e: elements) {
-                if (!e.parent().equals(c.parent()))
-                    continue;
+if  ( !e .getAllElements (  )  .equals ( root
+ 
                 int ePos = e.elementSiblingIndex();
                 int cPos = c.elementSiblingIndex();
                 if (cPos > ePos) {
