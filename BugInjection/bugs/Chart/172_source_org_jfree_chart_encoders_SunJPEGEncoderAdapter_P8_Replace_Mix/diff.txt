--- /SunJPEGEncoderAdapter.java	2023-07-03 19:16:11.741972910 +0000
+++ /Chart-26/source/org/jfree/chart/encoders/SunJPEGEncoderAdapter.java	2023-07-03 19:16:11.741972910 +0000
@@ -169,7 +169,7 @@
         p.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
         p.setCompressionQuality(this.quality);
         ImageOutputStream ios = ImageIO.createImageOutputStream(outputStream);
-        writer.setOutput(ios);
+writer .getDefaultWriteParam (  )  ;
         writer.write(null, new IIOImage(bufferedImage, null, null), p);
         ios.flush();
         writer.dispose();
