20230130-81607a62ca	81607a62ca	ec4939b170	Mon Jan 30 13:15:05 2023 +0300	Fix type inference	oss-fuzz #55358	ext/opcache/tests/jit/assign_obj_op_003.phpt	commit 81607a62ca85d016699e16344a5cebca9edba46aAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jan 30 13:15:05 2023 +0300  Fix type inference    Fixes oss-fuzz #55358
20220822-95befc786a	95befc786a	2a33280ceb	Mon Aug 22 21:11:39 2022 +0300	Fix type inference	oss-fuzz #50272	ext/opcache/tests/opt/inference_015.phpt	commit 95befc786ae89afc5b9b6c6d26fa26883e50ebf0Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Aug 22 21:11:39 2022 +0300  Fix type inference    Fixes oss-fuzz #50272
20220801-69c10aed58	69c10aed58	4b19b85eb6	Mon Aug 1 15:32:49 2022 +0300	Fix incorrect guard motion out of the loop	oss-fuzz #49579	ext/opcache/tests/jit/assign_op_009.phpt	commit 69c10aed5846f8378a04fd6cd24e4b53dafc52c5Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Aug 1 15:32:49 2022 +0300  Fix incorrect guard motion out of the loop    Fixes oss-fuzz #49579
20220801-af1a7b7b72	af1a7b7b72	4147257fc4	Mon Aug 1 14:00:19 2022 +0300	Fix SSA reconstruction when body of "foreach" loop is removed	oss-fuzz #49483	ext/opcache/tests/opt/fe_fetch_001.phpt	commit af1a7b7b72de7db01f32e84bdc7ced904cd68b81Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Aug 1 14:00:19 2022 +0300  Fix SSA reconstruction when body of "foreach" loop is removed    Fixes oss-fuzz #49483
20220725-d50875c822	d50875c822	e70d282077	Mon Jul 25 15:53:06 2022 +0300	Fix type inference	oss-fuzz #49423	ext/opcache/tests/opt/inference_014.phpt	commit d50875c822a8f37262690f94de803e20f12ad23dAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jul 25 15:53:06 2022 +0300  Fix type inference    Fixes oss-fuzz #49423 and #49474
20220725-d50875c822	d50875c822	e70d282077	Mon Jul 25 15:53:06 2022 +0300	Fix type inference	oss-fuzz #49423	ext/opcache/tests/opt/inference_014.phpt	commit d50875c822a8f37262690f94de803e20f12ad23dAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jul 25 15:53:06 2022 +0300  Fix type inference    Fixes oss-fuzz #49423 and #49474
20220725-e70d282077	e70d282077	cc465ba0bb	Mon Jul 25 15:24:26 2022 +0300	JIT: Fix missing type stote	oss-fuzz #49402	ext/opcache/tests/jit/reg_alloc_016.phpt	commit e70d2820774b90af2ce99dbfcd481a8a80e3e44cAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jul 25 15:24:26 2022 +0300  JIT: Fix missing type stote    Fixes oss-fuzz #49402
20220718-82d3ad64df	82d3ad64df	4b38779a48	Mon Jul 18 14:20:06 2022 +0300	Fix type inference	oss-fuzz #48908	ext/opcache/tests/opt/inference_013.phpt	commit 82d3ad64df7f2f20285afd9f65cf233bb924a6b0Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jul 18 14:20:06 2022 +0300  Fix type inference    Fixes oss-fuzz #48908
20220718-bd30eff5de	bd30eff5de	d830a1f6f0	Mon Jul 18 13:14:15 2022 +0300	Fix type inference for FETCH_DI_UNSET	oss-fuzz #48507	ext/opcache/tests/opt/inference_012.phpt	commit bd30eff5deefdd2bf33fd5d9023c00496edac941Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jul 18 13:14:15 2022 +0300  Fix type inference for FETCH_DI_UNSET    Fixes oss-fuzz #48507
20220620-229e80c6ef	229e80c6ef	e330f443c9	Mon Jun 20 10:59:37 2022 +0300	Fix memory leak	oss-fuzz #48051	ext/opcache/tests/opt/inline_001.phpt	commit 229e80c6ef507cc26dbd02f0b392f270e1fb6ebeAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jun 20 10:59:37 2022 +0300  Fix memory leak    This fixes oss-fuzz #48051
20220606-088e5677fb	088e5677fb	e864cb61a7	Mon Jun 6 11:35:01 2022 +0300	Fix memory leak	oss-fuzz #47791	ext/reflection/tests/ReflectionClass_getMethods_004.phpt	commit 088e5677fbfa41d0c66d756e3076b30c500db126Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jun 6 11:35:01 2022 +0300  Fix memory leak    This fixes oss-fuzz #47791
20220606-b86c6245cc	b86c6245cc	98e1291b7e	Mon Jun 6 11:13:53 2022 +0300	Fix type inference	oss-fuzz #47777	ext/opcache/tests/opt/inference_009.phpt	commit b86c6245cc7dd739a526c29748725b59926b17ccAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jun 6 11:13:53 2022 +0300  Fix type inference    This fixes oss-fuzz #47777
20220516-84ea0aa684	84ea0aa684	05375602a7	Mon May 16 13:45:31 2022 +0300	Fix memory leak	oss-fuzz #47448	ext/opcache/tests/opt/sccp_040.phpt	commit 84ea0aa6840b814f84b241e151472a352616b314Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon May 16 13:45:31 2022 +0300  Fix memory leak    This fixes oss-fuzz #47448
20220516-05375602a7	05375602a7	5a39f4c7cc	Mon May 16 12:41:25 2022 +0300	Fix type inference	oss-fuzz #47422	ext/opcache/tests/opt/inference_008.phpt	commit 05375602a756e8ca7220480bdb8cec5b8bdd1f0dAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon May 16 12:41:25 2022 +0300  Fix type inference    This fixes oss-fuzz #47422
20220511-84c1e99ecf	84c1e99ecf	f1fc58ed8d	Wed May 11 12:39:26 2022 +0300	Fix type inference	oss-fuzz #47044	ext/opcache/tests/opt/inference_007.phpt	commit 84c1e99ecfc8c5e025f07573f033cc60ccae8db3Author: Dmitry Stogov <dmitry@zend.com>Date:  Wed May 11 12:39:26 2022 +0300  Fix type inference    This fizes oss-fuzz #47044
20220511-3f1e1b9ddf	3f1e1b9ddf	23a2030438	Wed May 11 12:09:11 2022 +0300	Fix type inference	oss-fuzz #47049	ext/opcache/tests/opt/inference_006.phpt	commit 3f1e1b9ddfd5f7fe7706347109df14b261cf0855Author: Dmitry Stogov <dmitry@zend.com>Date:  Wed May 11 12:09:11 2022 +0300  Fix type inference    This fixes oss-fuzz #47049
20220425-948ef10dd0	948ef10dd0	1aa5e9392d	Mon Apr 25 13:31:01 2022 +0300	Fix ISSET_ISEMPTY_VAR missoptimization	oss-fuzz #46909	ext/opcache/tests/opt/isset_var_001.phpt	commit 948ef10dd0f9ad5781f906d8a75f00ac1af059bdAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Apr 25 13:31:01 2022 +0300  Fix ISSET_ISEMPTY_VAR missoptimization    This fixes oss-fuzz #46909
20220425-3e78964742	3e78964742	8286de2fd3	Mon Apr 25 12:15:55 2022 +0300	Fix type inference	oss-fuzz #46840	ext/opcache/tests/opt/inference_005.phpt	commit 3e78964742c05f6529615a48f75cbde7f7b3a1e2Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Apr 25 12:15:55 2022 +0300  Fix type inference    Use MAY_BE_NULL result (insted of empty) for ASSIGN_DIM with invalid arguments  This fixes oss-fuzz #46840
20220425-8286de2fd3	8286de2fd3	a74b865123	Mon Apr 25 11:16:10 2022 +0300	Fix type narrowing warning during type inference of ZEND_FETCH_DIM_W	oss-fuzz #45820	ext/opcache/tests/opt/inference_004.phpt	commit 8286de2fd38215a4743aa9a9790f2bca951aa1bfAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Apr 25 11:16:10 2022 +0300  Fix type narrowing warning during type inference of ZEND_FETCH_DIM_W    Fixes oss-fuzz #45820
20220418-c3a30544ad	c3a30544ad	04e59c916f	Mon Apr 18 11:34:18 2022 +0300	JIT: Fixed incorrect guard	oss-fuzz #46704	ext/opcache/tests/jit/fetch_obj_010.phpt	commit c3a30544ada06b2de681991308b2e8212a912689Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Apr 18 11:34:18 2022 +0300  JIT: Fixed incorrect guard    Fixes oss-fuzz #46704
20220404-c489e360a6	c489e360a6	c0bb238483	Mon Apr 4 16:36:25 2022 +0300	JIT: Fix array clobbering by user error handler	oss-fuzz #46336	ext/opcache/tests/jit/assign_dim_015.phpt	commit c489e360a67e8d523b001be3140195c2e4bc7473Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Apr 4 16:36:25 2022 +0300  JIT: Fix array clobbering by user error handler    Fixes oss-fuzz #46336
20220404-c0bb238483	c0bb238483	9cb512ecc1	Mon Apr 4 15:34:02 2022 +0300	Fixed reference counting inference	oss-fuzz #46084	ext/opcache/tests/jit/fetch_dim_r_013.phpt	commit c0bb238483229fd08282a124074a5cef09b52a6cAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Apr 4 15:34:02 2022 +0300  Fixed reference counting inference    Fixes oss-fuzz #46084
20220318-3d6a7e2bd5	3d6a7e2bd5	d0417ebc93	Fri Mar 18 18:54:47 2022 +0300	JIT: Fix missing exception handling	oss-fuzz #45649	ext/opcache/tests/jit/bw_not_002.phpt	commit 3d6a7e2bd5edad4243dd3c1780dcad0ff6004f3eAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Fri Mar 18 18:54:47 2022 +0300  JIT: Fix missing exception handling    Fixes oss-fuzz #45649
20220314-2b7431cf5b	2b7431cf5b	e20f955e44	Mon Mar 14 12:57:37 2022 +0300	Fix memory leak	oss-fuzz #45535	ext/opcache/tests/jit/assign_052.phpt	commit 2b7431cf5b2157c71265616c46a455212cf949d5Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Mar 14 12:57:37 2022 +0300  Fix memory leak    Fixed oss-fuzz #45535
20220314-9792f0db76	9792f0db76	2b2aeb989e	Mon Mar 14 09:48:58 2022 +0300	JIT: Fix type store	oss-fuzz #45190	ext/opcache/tests/jit/reg_alloc_012.phpt	commit 9792f0db76c25af41fbde37265d3125996a64e71Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Mar 14 09:48:58 2022 +0300  JIT: Fix type store    Fixes oss-fuzz #45190
20220311-770a544af4	770a544af4	f7608df78d	Fri Mar 11 14:30:27 2022 +0300	Optimizer: Fix inorrect constant substitution in FETCH_LIST_R	oss-fuzz #45429	ext/opcache/tests/opt/block_pass_003.phpt	commit 770a544af4c0c3dcff115e60b607f8782a7d21d4Author: Dmitry Stogov <dmitry@zend.com>Date:  Fri Mar 11 14:30:27 2022 +0300  Optimizer: Fix inorrect constant substitution in FETCH_LIST_R    Fixes oss-fuzz #45429
20220311-151d2ac5ae	151d2ac5ae	7eb972c456	Fri Mar 11 11:32:23 2022 +0300	Fixed memory leak	oss-fuzz #45191	ext/opcache/tests/opt/sccp_038.phpt	commit 151d2ac5ae73ebc0fc5613b6f821f433e6f3aac3Author: Dmitry Stogov <dmitry@zend.com>Date:  Fri Mar 11 11:32:23 2022 +0300  Fixed memory leak    Fixes oss-fuzz #45191
20220301-bb0b4eb996	bb0b4eb996	aced867a95	Tue Mar 1 00:00:22 2022 +0300	Fix infiniry recursion during serialize() of "tricky" object	oss-fuzz #44954	ext/standard/tests/serialize/serialization_objects_016.phpt	commit bb0b4eb996c86b927df86f6bdb1e8ac0749e5333Author: Dmitry Stogov <dmitry@zend.com>Date:  Tue Mar 1 00:00:22 2022 +0300  Fix infiniry recursion during serialize() of "tricky" object    Fixes oss-fuzz #44954
20220228-aced867a95	aced867a95	f67986a921	Mon Feb 28 18:25:49 2022 +0300	Fix typr inference	oss-fuzz #45020	ext/opcache/tests/jit/assign_dim_013.phpt	commit aced867a952c189a3968a9ecf3e6ca28facc2153Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Feb 28 18:25:49 2022 +0300  Fix typr inference    Fixes oss-fuzz #45020
20220218-84a638a346	84a638a346	8f5480e7eb	Fri Feb 18 12:20:40 2022 +0300	Fix memory leak	oss-fuzz #44685	Zend/tests/generators/errors/resume_running_generator_error_002.phpt	commit 84a638a346f918e1ed6afc23f8ea1b7b7b90df1bAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Fri Feb 18 12:20:40 2022 +0300  Fix memory leak    Fixes oss-fuzz #44685
20220211-73fed0f028	73fed0f028	a506b0006e	Fri Feb 11 15:16:08 2022 +0300	Fix emory leak	oss-fuzz #44408	Zend/tests/closure_063.phpt	commit 73fed0f0285f0b225f10884d19eb26d3cfbd5084Author: Dmitry Stogov <dmitry@zend.com>Date:  Fri Feb 11 15:16:08 2022 +0300  Fix emory leak    Fixes oss-fuzz #44408
20220211-7434909dc6	7434909dc6	0d6b173532	Fri Feb 11 13:03:36 2022 +0300	Fix type inference	oss-fuzz #44407	ext/opcache/tests/jit/assign_dim_012.phpt	commit 7434909dc652feca55da7e29db81d1f4cd09b9adAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Fri Feb 11 13:03:36 2022 +0300  Fix type inference    Fixes oss-fuzz #44407
20220201-a60a9b4a89	a60a9b4a89	54c952f11f	Tue Feb 1 16:24:22 2022 +0300	Fix memory leak	oss-fuzz #44222	Zend/tests/nullsafe_operator/040.phpt	commit a60a9b4a89b4fa40f8980a0a35a7088860cb8a4dAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Tue Feb 1 16:24:22 2022 +0300  Fix memory leak    Fixes oss-fuzz #44222
20220128-54c952f11f	54c952f11f	f711c9603d	Fri Jan 28 16:27:55 2022 +0300	JIT: Fix incorrect type store elimination	oss-fuzz #43737	ext/opcache/tests/jit/assign_050.phpt	commit 54c952f11fbc3e877ddb729b78e9814eb3f79157Author: Dmitry Stogov <dmitry@zend.com>Date:  Fri Jan 28 16:27:55 2022 +0300  JIT: Fix incorrect type store elimination    Fixes oss-fuzz #43737
20220110-698ac23711	698ac23711	71d6501346	Mon Jan 10 19:39:19 2022 +0300	Fixed NAN handling in SCCP	oss-fuzz #43341	ext/opcache/tests/opt/sccp_036.phpt	commit 698ac23711503cb3a2c0ae1965447598597ac468Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jan 10 19:39:19 2022 +0300  Fixed NAN handling in SCCP    Fixes oss-fuzz #43341
20211228-de358f856f	de358f856f	87d9e02f01	Tue Dec 28 09:57:03 2021 +0300	Fix reference contig inference	oss-fuzz #43032	ext/opcache/tests/jit/fetch_obj_009.phpt	commit de358f856fea56ad2b7ff79f3f7daa91ee99b32aAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Tue Dec 28 09:57:03 2021 +0300  Fix reference contig inference    Fixes oss-fuzz #43032
20211224-2b81156f2a	2b81156f2a	3f0bb67361	Fri Dec 24 13:10:22 2021 +0300	Fix memory leak in SCCP	oss-fuzz #42878	ext/opcache/tests/opt/sccp_035.phpt	commit 2b81156f2a64ae99a4d431983e7c5a4ec7b817f7Author: Dmitry Stogov <dmitry@zend.com>Date:  Fri Dec 24 13:10:22 2021 +0300  Fix memory leak in SCCP    Fixes oss-fuzz #42878
20211220-e004e844f7	e004e844f7	7c674e1aa7	Mon Dec 20 15:06:32 2021 +0300	Fix incorrect optimization of ASSIGN_OP that may lead to memory leak	oss-fuzz #42506	ext/opcache/tests/opt/assign_op_001.phpt	commit e004e844f74998878853517d900f99dbc1e9db3dAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Dec 20 15:06:32 2021 +0300  Fix incorrect optimization of ASSIGN_OP that may lead to memory leak    Fixes oss-fuzz #42506
20211220-f18bb2477f	f18bb2477f	1481d66343	Mon Dec 20 11:40:11 2021 +0300	Fix type inference for INIT_ARRAY with invalid index	oss-fuzz #42568	ext/opcache/tests/opt/inference_002.phpt	commit f18bb2477fba864d20d2c3b7422e5b9ce88f1f79Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Dec 20 11:40:11 2021 +0300  Fix type inference for INIT_ARRAY with invalid index    Fixes oss-fuzz #42568
20211217-66306030ad	66306030ad	49380b59d2	Fri Dec 17 12:31:48 2021 +0300	JIT: Fix incorrect type store elimination	oss-fuzz #42388	ext/opcache/tests/jit/assign_048.phpt	commit 66306030ad26da49bbc6c07624fa3b4b1f1d9757Author: Dmitry Stogov <dmitry@zend.com>Date:  Fri Dec 17 12:31:48 2021 +0300  JIT: Fix incorrect type store elimination    Fixes oss-fuzz #42388
20211213-cbc0b1afeb	cbc0b1afeb	230de7721f	Mon Dec 13 14:59:30 2021 +0300	Fix array clobering by user error handler	oss-fuzz #42234	Zend/tests/objects_035.phpt	commit cbc0b1afeb97044f7a813e8678736649c15f3974Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Dec 13 14:59:30 2021 +0300  Fix array clobering by user error handler    Fixes oss-fuzz #42234
20211213-230de7721f	230de7721f	e79dbe1124	Mon Dec 13 13:08:05 2021 +0300	Fix incorrect optimization that leads to memory leak	oss-fuzz #42221	ext/opcache/tests/opt/sccp_034.phpt	commit 230de7721f17ca0aeb85d819f1d4001a6be56d22Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Dec 13 13:08:05 2021 +0300  Fix incorrect optimization that leads to memory leak    Fixes oss-fuzz #42221
20211209-7e080183f4	7e080183f4	7d4fdf1510	Thu Dec 9 18:15:47 2021 +0300	Fix crush after compilation of nullsafe operator introduced in 307e476e86e19135976ba7e686558de68dbb9b29	oss-fuzz #42152	Zend/tests/bug81216_2.phpt	commit 7e080183f48b8da54038ecaedd1534cd49cf56b0Author: Dmitry Stogov <dmitry@zend.com>Date:  Thu Dec 9 18:15:47 2021 +0300  Fix crush after compilation of nullsafe operator introduced in 307e476e86e19135976ba7e686558de68dbb9b29    Now we flush only delayed opcodes realted to this nullsafe operator.    Fixes oss-fuzz #42152
20211206-5459ed4c2f	5459ed4c2f	4ed10f3d47	Mon Dec 6 13:08:27 2021 +0300	Fix use after free because of data clobbering by user error handler	oss-fuzz #41692	Zend/tests/falsetoarray_002.phpt	commit 5459ed4c2fbc25560da3808e823c0503704a8f31Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Dec 6 13:08:27 2021 +0300  Fix use after free because of data clobbering by user error handler    Fixes oss-fuzz #41692
20211204-307e476e86	307e476e86	929d847152	Sat Dec 4 18:04:24 2021 +0300	Fixed bug #81216 (Nullsafe operator leaks dynamic property name)	oss-fuzz #38542	Zend/tests/bug81216.phpt	commit 307e476e86e19135976ba7e686558de68dbb9b29Author: Dmitry Stogov <dmitry@zend.com>Date:  Sat Dec 4 18:04:24 2021 +0300  Fixed bug #81216 (Nullsafe operator leaks dynamic property name)    Fixes oss-fuzz #38542
20220926-8258b7731b	8258b7731b	e488f7b0eb	Mon Sep 26 11:43:38 2022 +0300	Fix memory leak	oss-fuzz #51622	Zend/tests/temporary_cleaning_017.phpt	commit 8258b7731ba8cde929e1f3504577af0a4440cad4Author: Dmitry Stogov <dmitry@zend.com>Date:  Mon Sep 26 11:43:38 2022 +0300  Fix memory leak    Fixes oss-fuzz #51622
20220919-8a1f7fa721	8a1f7fa721	54701ea3e7	Mon Sep 19 13:03:24 2022 +0300	Fix memory leak	oss-fuzz #51451	Zend/tests/gc_046.phpt	commit 8a1f7fa7216800e64f3d59b1a9c3285ca048a0feAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Sep 19 13:03:24 2022 +0300  Fix memory leak    Fixes oss-fuzz #51451
20230621-fae42c8bd8	fae42c8bd8	6c015ae8fe	Wed Jun 21 14:59:05 2023 +0200	Fix assertion violation for invalid class const objects in const expressions (#11458)	oss-fuzz #59764	Zend/tests/oss_fuzz_59764.phpt	commit fae42c8bd832174a17a804d0da0bfd624fd071e4Author: Ilija Tovilo <ilija.tovilo@me.com>Date:  Wed Jun 21 14:59:05 2023 +0200  Fix assertion violation for invalid class const objects in const expressions (#11458)    Fixes oss-fuzz #59764
20230325-57029ce92e	57029ce92e	c2f3a605f0	Sat Mar 25 17:42:39 2023 +0100	Fix buffer-overflow in php_fgetcsv() with \0 delimiter and enclosure	oss-fuzz #57392	ext/standard/tests/oss_fuzz_57392.phpt	commit 57029ce92ec5312752eaf436e4e61742d838a520Author: Ilija Tovilo <ilija.tovilo@me.com>Date:  Fri Mar 24 15:19:58 2023 +0100  Fix buffer-overflow in php_fgetcsv() with \0 delimiter and enclosure    Fixes oss-fuzz #57392  Closes GH-10923
20230202-35a36b13e5	35a36b13e5	f291d37a1a	Thu Feb 2 19:18:17 2023 +0100	Fix comp-time and constant evaluation of dynamic class constant fetch	oss-fuzz #55436	Zend/tests/gh10486.phpt	commit 35a36b13e539c252d309f1799b5f653cf76921bdAuthor: Ilija Tovilo <ilija.tovilo@me.com>Date:  Thu Feb 2 15:40:50 2023 +0100  Fix comp-time and constant evaluation of dynamic class constant fetch    Fixes GH-10486  Fixes oss-fuzz #55436  Fixes oss-fuzz #55472  Closes GH-10487
20230130-81607a62ca	81607a62ca	ec4939b170	Mon Jan 30 13:15:05 2023 +0300	Fix type inference	oss-fuzz #55358	ext/opcache/tests/jit/assign_obj_op_003.phpt	commit 81607a62ca85d016699e16344a5cebca9edba46aAuthor: Dmitry Stogov <dmitry@zend.com>Date:  Mon Jan 30 13:15:05 2023 +0300  Fix type inference    Fixes oss-fuzz #55358
20211101-f8ec5a1d4c	f8ec5a1d4c	1a2fb90bf4	Mon Nov 1 12:31:34 2021 +0100	Fix range inference hang	oss-fuzz #40566.	ext/opcache/tests/range_inference_hang.phpt	commit f8ec5a1d4c002a6bdfcec6b2582f66d58d32003cAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Nov 1 12:29:48 2021 +0100  Fix range inference hang    We shouldn't switch from range to no range for ZEND_DIV and instead  explicitly return an overflowing range. Otherwise the range will  not actually get updated during widening, and we'll perform  essentially infinite narrowing.    Fixes oss-fuzz #40566.
20211101-1a2fb90bf4	1a2fb90bf4	91dfac6f2a	Mon Nov 1 11:44:32 2021 +0100	Fix finally exception chaining on recursion	oss-fuzz #40464.	Zend/tests/try/try_finally_recursive_previous.phpt	commit 1a2fb90bf459f2ab918e02dff63c803f24a354a9Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Nov 1 11:42:36 2021 +0100  Fix finally exception chaining on recursion    In this case zend_exception_set_previous() would destroy the  fast_call exception and further accesses on ex would be invalid.  We should only update ex if we update EG(exception).    Fixes oss-fuzz #40464.
20211101-64878757be	64878757be	55aadc647b	Mon Nov 1 11:03:17 2021 +0100	Fix scdf loop var free check for phi vars	oss-fuzz #40453.	Zend/tests/match/match_of_phi_optimization.phpt	commit 64878757be97a6938b4cd7f3e0a0937f5f73e48eAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Nov 1 11:01:29 2021 +0100  Fix scdf loop var free check for phi vars    The variable may come from a phi node, in which case we should  take the defining block from it.    Fixes oss-fuzz #40453.
20211101-55aadc647b	55aadc647b	a4ed17167c	Mon Nov 1 09:50:22 2021 +0100	Fix self-assign evaluation order for ASSIGN_DIM_OP	oss-fuzz #40287.	Zend/tests/assign_dim_op_same_var.phpt	commit 55aadc647bbded429b5a54835619b8038f6f909eAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Nov 1 09:36:22 2021 +0100  Fix self-assign evaluation order for ASSIGN_DIM_OP    For $ary[idx] op= $ary we should evaluate the RHS operand first,  otherwise we may create a reference-free recursive array. Use the  same handling we do for the normal $ary[idx] = $ary case.    Fixes oss-fuzz #40287.
20211019-22b6aac66f	22b6aac66f	0acfd2d7b5	Tue Oct 19 14:19:22 2021 +0200	Fix inc/dec of undef var with error handler	oss-fuzz #36604.	Zend/tests/incdec_undef.phpt	commit 22b6aac66fbb64dd479b4a34ac3a7af7a40adad9Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Tue Oct 19 13:12:37 2021 +0200  Fix inc/dec of undef var with error handler    Set the variable to null after emitting the undef var notice  rather than before. This avoids an assertion failure if the var  is unset by the error handler.    The flip side is that this may cause a leak instead, but that's  the more harmless outcome.    Fixes oss-fuzz #36604.
20211019-8653174539	8653174539	9ab3bc69e8	Tue Oct 19 11:40:19 2021 +0200	Fix nested WeakMap destruction	oss-fuzz #40090.	Zend/tests/weakrefs/weakmap_nested.phpt	commit 8653174539b079063ecf65e964da09cad06e77f8Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Tue Oct 19 11:40:19 2021 +0200  Fix nested WeakMap destruction    This undoes the change from a4b209fdcfe799ab97f55c4c9d22d889813fc266  and addresses the original problem by dropping the unrefs during  shutdown. All objects should get unref'ed without that, and this  code path should only get hit for dangling references due to  bailout.    Alternatively we'd have to relax some assertions that check that the  object is part of the weakrefs table, which seems worse.    Fixes oss-fuzz #40090.
20211011-fabcc9a350	fabcc9a350	bbe21365b4	Mon Oct 11 12:19:29 2021 +0200	Fix long-term shutdown/tick fci/fcc storage	oss-fuzz #39778.	Zend/tests/register_shutdown_function_refcount.phpt	commit fabcc9a350087c652252f63b1d3744516e34d57eAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Oct 11 12:17:44 2021 +0200  Fix long-term shutdown/tick fci/fcc storage    Normally incrementing the refcount on just function_name is  sufficient. However, if the callable is of the form 'X::y' inside  an instance method, this will capture $this in fcc.object, which  also needs to be retained.    The fci_addref/fci_release helpers should likely be exported as  a general API, as we may have this problem in other places as  well.    Fixes oss-fuzz #39778.
20211006-3661c1932c	3661c1932c	f455894bb6	Wed Oct 6 10:50:44 2021 +0200	Fix array cast type inference wrt packed arrays	oss-fuzz #39650.	ext/opcache/tests/jit/cast_002.phpt	commit 3661c1932c3c04f29331f4892d0e60c7b7ba612fAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Wed Oct 6 10:48:14 2021 +0200  Fix array cast type inference wrt packed arrays    Use KEY_LONG instead of PACKED if it's possible for the array to  be empty. It won't be packed in that case.    Fixes oss-fuzz #39650.
20211005-bbd3f714d7	bbd3f714d7	cdcdb33080	Tue Oct 5 11:28:16 2021 +0200	Fix COPY_TMP live range construction after optimization	oss-fuzz #39548.	Zend/tests/coalesce_assign_optimization.phpt	commit bbd3f714d7a39b11b876ffca0b37520abadbef89Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Tue Oct 5 11:26:32 2021 +0200  Fix COPY_TMP live range construction after optimization    If we optimize the FREE away, we should switch to constructing  a normal live range, rather than a split live range.    Fixes oss-fuzz #39548.
20210928-17d6efc729	17d6efc729	2e02b1f157	Tue Sep 28 10:37:54 2021 +0200	Fix block marking for two arm math	oss-fuzz #39380.	Zend/tests/match/044.phpt	commit 17d6efc729e0a973bb4e8f4e19a9d099a8c13b54Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Tue Sep 28 10:35:54 2021 +0200  Fix block marking for two arm math    This would end up taking the successors_count=2 case, even though  we need to treat SWITCH and MATCH differently. This incorrectly  marked a block as FOLLOW, resulting in incorrect block pass  optimization.    Fixes oss-fuzz #39380.
20210927-7d483418e2	7d483418e2	823888c472	Mon Sep 27 16:18:40 2021 +0200	Fix relative offsets when copying JMPZNZ	oss-fuzz #39295.	Zend/tests/jmpznz_relative_offsets.phpt	commit 7d483418e21b8c250f03cbef6480e34e428e6f53Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Sep 27 16:13:33 2021 +0200  Fix relative offsets when copying JMPZNZ    This was doing a plain copy of JMPZNZ, even though it encodes  offsets relative to the opline. As such, the offsets would be  relative to target, while they should be relative to opline.  Fix this by recomputing them.    Fixes oss-fuzz #39295.
20210927-ddf8910237	ddf8910237	038bc27787	Mon Sep 27 11:26:31 2021 +0200	Fix DCE of unreachable phi in cycle	oss-fuzz #39316.	Zend/tests/unreachable_phi_cycle.phpt	commit ddf89102377a0603d76936a9b0d5a6dafd5bc229Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Sep 27 11:24:52 2021 +0200  Fix DCE of unreachable phi in cycle    We can't remove a trivial phi of the form x = phi(x), because we  don't have a replacement value. We could drop the whole block  though. SCCP would normally do this, but in this particular case  we only determine non-reachability based on type information.    Fixes oss-fuzz #39316.
20210827-4fcf0db649	4fcf0db649	fdc6082902	Fri Aug 27 11:34:22 2021 +0200	Fix use after free when rebinding __call closure	oss-fuzz #37695.	Zend/tests/closure_call_bind.phpt	commit 4fcf0db649835339837a502589732e11f0ce6b57Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Fri Aug 27 11:34:22 2021 +0200  Fix use after free when rebinding __call closure    We would end up freeing the function name twice here, once for  the original closure, and once for the rebound one.    Rather than further special casing the zend_closure_call_magic  case, always addref the function_name for internal functions,  the same we do for userland functions. To compensate, we need to  release the original function name when creating from callable  or call frame.    Fixes oss-fuzz #37695.
20210826-b964d007e3	b964d007e3	07984435ae	Thu Aug 26 12:00:37 2021 +0200	Fix AST print of first class callable in anon class expr	oss-fuzz #37473.	Zend/tests/first_class_callable_assert3.phpt	commit b964d007e383516408c64fc533ed791a13034030Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Thu Aug 26 11:58:31 2021 +0200  Fix AST print of first class callable in anon class expr    This will cause a compile error later, but the expression is  printed first.    Fixes oss-fuzz #37473.
20210803-6d5ae6496c	6d5ae6496c	70872dde94	Tue Aug 3 10:25:24 2021 +0200	Fix ASSIGN_DIM to NEXT with rc=1 reference value	oss-fuzz #36807.	Zend/tests/assign_dim_ref_free.phpt	commit 6d5ae6496c6d1b7a563a0b189d868dd7089be395Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Tue Aug 3 10:19:23 2021 +0200  Fix ASSIGN_DIM to NEXT with rc=1 reference value    The reference wrapper was destroyed while value still pointed into  it and was later used to assign the ASSIGN_DIM return value. This  could be fixed either by moving the return value assignment earlier,  or by working with the value that has been stored in the array.  I'm going with the latter here, because that matches what the  non-NEXT codepath does via assign_to_variable more closely.    Fixes oss-fuzz #36807.
20210719-b6dcab2cbb	b6dcab2cbb	e120d5269a	Mon Jul 19 12:08:03 2021 +0200	Fix assert with attribute + first-class callable in assert	oss-fuzz #36264.	Zend/tests/first_class_callable_assert2.phpt	commit b6dcab2cbb82fb775180d331462641f2e675bd02Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Jul 19 12:08:03 2021 +0200  Fix assert with attribute + first-class callable in assert    This is going to result in a compile-time error, but AST printing  is invoked first and should handle it gracefully. Handle it by  falling back to more generic printing code.    Fixes oss-fuzz #36264.
20210712-5f8ed7765a	5f8ed7765a	0192fd20cc	Mon Jul 12 11:30:20 2021 +0200	Fix GC of object properties HT	oss-fuzz #36023.	Zend/tests/gc_044.phpt	commit 5f8ed7765ab2a0ec372fce90701c51ce75312541Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Jul 12 11:24:51 2021 +0200  Fix GC of object properties HT    We partially fixed this in bug #78379, but still don't handle  the case where the properties array is marked as grey first,  which causes a delref to not be performed later.    Fix this by treating the object properties HT the same way as  other refcounted values, including addrefs/delrefs. The object  dtor code already handles properties HT with NULL GC type, so  out of order destruction should not be a problem.    Fixes oss-fuzz #36023.
20210708-58699ffcf1	58699ffcf1	62ecf54f35	Thu Jul 8 10:12:40 2021 +0200	Fix constant update for shadowed private property	oss-fuzz #35906.	Zend/tests/update_consts_shadowed_private_prop.phpt	commit 58699ffcf137154ddd339a0c805996dd8ce80522Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Thu Jul 8 10:04:23 2021 +0200  Fix constant update for shadowed private property    Updating based on the properties info HT will miss private parent  properties that have been shadowed in the child class. Instead,  perform updating directly on the default properties table.    We can't do the same for static properties, because those don't  have a convenient way to look up the property type from the  property offset. However, I don't believe the problem exists for  static properties, because we're always going to be using the  property on the class it was declared on, while children only hold  INDIRECT references. As such, this should be covered by parent  class const updating.    Fixes oss-fuzz #35906.
20210707-62ecf54f35	62ecf54f35	52a00fe776	Wed Jul 7 09:38:30 2021 +0200	Fix use after free on compound division by zero	oss-fuzz #35876.	Zend/tests/div_by_zero_compound_refcounted.phpt	commit 62ecf54f35e227d09d19ec40920f7bb8d29e9356Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Wed Jul 7 09:36:30 2021 +0200  Fix use after free on compound division by zero    We can't destroy the result operand early, because the division  might fail, in which case we need to preserve the original value.  Place the division result in a temporary zval, and only copy it  on success.    Fixes oss-fuzz #35876.
20210702-96bf925cde	96bf925cde	bdc60fa7da	Fri Jul 2 11:15:31 2021 +0200	Fix return value of wrong fucntion by-ref assign	oss-fuzz #29899.	Zend/tests/assign_by_val_function_by_ref_return_value.phpt	commit 96bf925cde2af891e9fca761ffecbfebef6a0d30Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Fri Jul 2 11:15:31 2021 +0200  Fix return value of wrong fucntion by-ref assign    We should be using the result of zend_assign_to_variable() here,  which will deref prior to potential freeing.    Fixes oss-fuzz #29899.
20210415-f40c8fdf67	f40c8fdf67	a3e6735999	Thu Apr 15 12:32:05 2021 +0200	Fix return-by-ref from array_reduce callback	oss-fuzz #32990.	ext/standard/tests/array/array_reduce_return_by_ref.phpt	commit f40c8fdf672923fd585023574e954b79b85b8777Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Thu Apr 15 12:32:05 2021 +0200  Fix return-by-ref from array_reduce callback    Fixes oss-fuzz #32990.
20210319-5fd2a5b13b	5fd2a5b13b	89c61186ff	Fri Mar 19 16:04:47 2021 +0100	Fix handling of unknown class in trait precedence list	oss-fuzz #31983.	Zend/tests/traits/precedence_unknown_class.phpt	commit 5fd2a5b13b6e0bb5261f1032056856c09649c5faAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Fri Mar 19 16:04:16 2021 +0100  Fix handling of unknown class in trait precedence list    Fixes oss-fuzz #31983.
20210222-ab98944195	ab98944195	ed4f90f0c7	Mon Feb 22 10:32:59 2021 +0100	Fix trampoline leak on dynamic static call of non-static method	oss-fuzz #30317.	Zend/tests/dynamic_call_non_static.phpt	commit ab989441957956522c1663f1a0662067afbfdb6cAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Feb 22 10:32:28 2021 +0100  Fix trampoline leak on dynamic static call of non-static method    Fixes oss-fuzz #30317.
20210220-f37fe68e63	f37fe68e63	59590663d7	Sat Feb 20 11:16:37 2021 +0100	Fix closure GC handler for fake closures	oss-fuzz #31135.	Zend/tests/closures/closure_from_callable_gc.phpt	commit f37fe68e6300e6a347dffecf8d7788da0ab0a02dAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Sat Feb 20 11:16:37 2021 +0100  Fix closure GC handler for fake closures    Fixes oss-fuzz #31135.
20210215-7b7d99839c	7b7d99839c	3646604203	Mon Feb 15 14:58:38 2021 +0100	Fix symtable cache being used while cleaning symtable	oss-fuzz #30815.	Zend/tests/symtable_cache_recursive_dtor.phpt	commit 7b7d99839c2e2886ecf159952552c9964bd80481Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Feb 15 14:52:38 2021 +0100  Fix symtable cache being used while cleaning symtable    We need to first clean the symtable and then check whether a cache  slot is available for it. Otherwise, it may happen that a destructor  runs while cleaning the table and uses up all the remaining slots  in the cache.    This is particularly insidious because once we overflow the cache,  the first pointer we modify is symtable_cache_ptr, making it hard  to understand what happened after the fact.    Fixes oss-fuzz #30815.
20210118-9862296d46	9862296d46	a3e55286a6	Mon Jan 18 10:31:38 2021 +0100	Fix $GLOBALS[] in isset and unset	oss-fuzz #29699.	Zend/tests/restrict_globals/invalid_append_isset.phpt	commit 9862296d46013aa87b367ecd2b258fd8dd6614bfAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Mon Jan 18 10:31:38 2021 +0100  Fix $GLOBALS[] in isset and unset    I've previously addressed the case of assignments, but the same  issue exists for isset and unset.    Fixes oss-fuzz #29699.
20210105-dd335359e9	dd335359e9	5e57f37247	Tue Jan 5 13:03:41 2021 +0100	Fix infinite recursion in unlinked_instanceof	oss-fuzz #28961.	Zend/tests/type_declarations/variance/infinite_recursion.phpt	commit dd335359e950e52dd5e679da05b5c1f4084e5869Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Tue Jan 5 13:02:30 2021 +0100  Fix infinite recursion in unlinked_instanceof    I suspect this is only a partial fix for the issue, it's probably  possible to recurse through a more complex pathway as well.    Fixes oss-fuzz #28961.
20210105-d29d3a4bf6	d29d3a4bf6	0067c3ced1	Tue Jan 5 12:44:17 2021 +0100	Fix use-after-scope in SplObjectStorage::unserialize()	oss-fuzz #29271.	ext/standard/tests/serialize/SplObjectStorage_object_reference.phpt	commit d29d3a4bf69f0122b40ebafa376e2f34b20002f6Author: Nikita Popov <nikita.ppv@gmail.com>Date:  Tue Jan 5 12:43:19 2021 +0100  Fix use-after-scope in SplObjectStorage::unserialize()    Introduced by the recent switch to a zend_object. Unserialize the  object into a tmp_var to avoid leaving behind a stack reference.    Fixes oss-fuzz #29271.
20210105-0067c3ced1	0067c3ced1	ed4f18b463	Tue Jan 5 12:25:19 2021 +0100	Fix lexing of zero octal followed by whitespace	oss-fuzz #29272.	Zend/tests/oct_whitespace.phpt	commit 0067c3ced17ff69516854865e607887a9702cd0cAuthor: Nikita Popov <nikita.ppv@gmail.com>Date:  Tue Jan 5 12:24:23 2021 +0100  Fix lexing of zero octal followed by whitespace    We'd call strtol starting at the whitespace, and strtol strips  whitespace...    Fixes oss-fuzz #29272.
