--- /MathUtils.java	2023-07-03 21:22:32.703165442 +0000
+++ /Math-106/src/java/org/apache/commons/math/util/MathUtils.java	2023-07-03 21:22:32.703165442 +0000
@@ -367,7 +367,7 @@
      * @return the hash code
      */
     public static int hash(double value) {
-        long bits = Double.doubleToLongBits(value);
+long bits = Double.isNaN ( value ) ;
         return (int)(bits ^ (bits >>> 32));
     }
 
