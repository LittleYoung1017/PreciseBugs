serenity-20221009-3aeb57ed09	3aeb57ed09	f07e0180d6	Sun Oct 9 10:37:20 2022 -0600	AK+Everywhere: Fix data corruption due to code-point-to-char conversion	commit 3aeb57ed095d6174f1561a82afa8164923e2849dAuthor: Ben Wiederhake <BenWiederhake.GitHub@gmx.de>Date:   Mon Sep 12 16:31:16 2022 +0200    AK+Everywhere: Fix data corruption due to code-point-to-char conversion        In particular, StringView::contains(char) is often used with a u32    code point. When this is done, the compiler will for some reason allow    data corruption to occur silently.        In fact, this is one of two reasons for the following OSS Fuzz issue:    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=49184    This is probably a very old bug.        In the particular case of URLParser, AK::is_url_code_point got confused:        return /* ... */ || "!$&'()*+,-./:;=?@_~"sv.contains(code_point);    If code_point is a large code point that happens to have the correct    lower bytes, AK::is_url_code_point is then convinced that the given    code point is okay, even if it is actually problematic.        This commit fixes *only* the silent data corruption due to the erroneous    conversion, and does not fully resolve OSS-Fuzz#49184.	49184	AK/StringView.cpp;AK/StringView.h;AK/URL.cpp;AK/URLParser.cpp;Userland/Libraries/LibJS/Runtime/GlobalObject.cpp;Userland/Libraries/LibWeb/Fetch/Infrastructure/HTTP/Headers.cpp;Userland/Utilities/grep.cpp	9;137;88;406;32;72;350;420;480;402;258
serenity-20211223-0a827eaa02	0a827eaa02	da6aef9fff	Thu Dec 23 17:43:31 2021 -0800	LibGfx: Fix incorrect error handling in ICOLoader	commit 0a827eaa028e648fb9e42fd02564ab1647a4e190Author: Brian Gianforcaro <bgianf@serenityos.org>Date:   Thu Dec 23 01:49:27 2021 -0800    LibGfx: Fix incorrect error handling in ICOLoader        This was found by OSS Fuzz:    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=42188	42188	Userland/Libraries/LibGfx/ICOLoader.cpp	264
serenity-20211023-5d865d574a	5d865d574a	885b69c877	Sat Oct 23 19:02:54 2021 +0100	AK: Fix BumpAllocator iteration if last object doesn\'t align	commit 5d865d574a102501bd8a616f01e52e489ce88e6dAuthor: Ben Wiederhake <BenWiederhake.GitHub@gmx.de>Date:   Fri Oct 22 20:08:44 2021 +0200    AK: Fix BumpAllocator iteration if last object doesn't align        This fixes two bugs:        1. `end_offset` was missing the alignment that might have been       introduced while computing `base_ptr`.    2. Ignoring point 1, `end_offset` computed the offset of the first byte       that is outside the current chunk. However, this might be in the       middle of a (hypothetical) object! The loop treats `end_offset` as if       it points to the first byte beyond the last (valid) object. So if the       last few bytes of the chunk are unused, the loop iterates once too       often.        Found by OSS Fuzz, long-standing issue (since 2021-07-31)    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=38733    (This probably also resolves some other issues that go through    RegexMatcher.)        See also: 0f1425c895ace40fbb10d68a55eeb3a6354479d3	38733	AK/BumpAllocator.h	175
serenity-20210825-77d8a65498	77d8a65498	0f3f814945	Wed Aug 25 09:21:23 2021 +0100	LibJS: Fix incorrect Lexer VERIFY when parsing Unicode characters	commit 77d8a65498eec7c24b4947630710eac83bf97b0aAuthor: Brian Gianforcaro <bgianf@serenityos.org>Date:   Tue Aug 24 23:11:08 2021 -0700    LibJS: Fix incorrect Lexer VERIFY when parsing Unicode characters        This bug was discovered via OSS fuzz, it's possible to fall through    to this assert with a char_size == 1, so we need to account for that    in the VERIFY(..).        Repro test case can be found in the OSS fuzz bug:    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=37296	37296	Userland/Libraries/LibJS/Lexer.cpp	201
serenity-20210531-05d49cc0cb	05d49cc0cb	3e0266c9e9	Mon May 31 00:47:43 2021 +0430	LibCrypto: Fix bound checks when reading bitmaps	commit 05d49cc0cbb66e065856fd696af044d9c8a0fea9Author: Ben Wiederhake <BenWiederhake.GitHub@gmx.de>Date:   Sun May 30 18:44:06 2021 +0200    LibCrypto: Fix bound checks when reading bitmaps        This only affects malformed RSA keys. Instead of accepting and    continuing with potentially broken pointers (and in ASAN, crashing), we    now consider bitmaps malformed, and stop parsing.        Found by OSS Fuzz: #31698, long-standing-bug:    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=31698        Fun fact: The "if" only exists because of OSS Fuzz.    8cc279ed74dc0b16a187052d2454c26c8c6ecaf2	31698	Userland/Libraries/LibCrypto/ASN1/DER.cpp;Userland/Libraries/LibCrypto/PK/RSA.h	176;31;66
serenity-20210227-ce5fe2a6e8	ce5fe2a6e8	9aa91e6c6f	Sat Feb 27 07:30:39 2021 +0100	LibGfx: Fix read buffer overflow in interlaced GIF decode	commit ce5fe2a6e807b819866b4f429ca6f7a2d74445b7Author: Luke <luke.wilde@live.co.uk>Date:   Fri Feb 26 22:31:07 2021 +0000    LibGfx: Fix read buffer overflow in interlaced GIF decode        Unfortunately 10420dee7e48c818a7b1c5386b8fcebc587825f0 didn't quite fix it,    as the buffer overflow was actually happening here:    https://github.com/SerenityOS/serenity/blob/af2220448834fb0bff5132bf68104719819862ce/Userland/Libraries/LibGfx/GIFLoader.cpp#L402        Found by oss-fuzz: https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=30507	30507	Userland/Libraries/LibGfx/GIFLoader.cpp	399
serenity-20210207-10420dee7e	10420dee7e	0c66e53544	Sun Feb 7 11:18:55 2021 +0100	LibGfx: Fix global-buffer-overflow in interlaced GIF decode	commit 10420dee7e48c818a7b1c5386b8fcebc587825f0Author: Andreas Kling <kling@serenityos.org>Date:   Sun Feb 7 11:18:55 2021 +0100    LibGfx: Fix global-buffer-overflow in interlaced GIF decode        Regressed with 57e10eadac01273cc4c0bcb681aa9381cacef0b3 and immediately    caught by oss-fuzz: https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=30507	30507	Userland/Libraries/LibGfx/GIFLoader.cpp	404
serenity-20210130-4332dfb964	4332dfb964	648f153951	Sat Jan 30 09:23:18 2021 +0100	LibGfx: Fix dynamic bitmasks in BMPs	commit 4332dfb9640f28ef7daafe340b061d2586d2fc28Author: Ben Wiederhake <BenWiederhake.GitHub@gmx.de>Date:   Sat Jan 30 01:24:41 2021 +0100    LibGfx: Fix dynamic bitmasks in BMPs        I overlooked a corner case where we might call the built-in ctz() on zero.        Furthermore, the calculation of the shift was wrong and the results were often    unusable.        Both issue were caused by a forgotten 36daeee34ff04f64c933e94a9cdffe9080061fb0.    This time I made sure to look at bmpsuite_files first, and now they look good.        Found by OSS-Fuzz:    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=28985	28985	AK/Platform.h;Userland/Libraries/LibGfx/BMPLoader.cpp	81;368
serenity-20210120-c5709c0aed	c5709c0aed	98637bd549	Wed Jan 20 19:14:04 2021 +0100	LibCore: Try to fix fuzzer build	commit c5709c0aed02cf7c7c5cda914d9794ac5cab55e7Author: Nico Weber <thakis@chromium.org>Date:   Wed Jan 20 11:03:34 2021 -0500    LibCore: Try to fix fuzzer build        This might fix https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=29675    See also `man memfd_create`.	29675	Userland/Libraries/LibCore/AnonymousBuffer.cpp	24
serenity-20210107-7ed89703fe	7ed89703fe	cd2f85dc10	Thu Jan 7 08:57:37 2021 +0100	LibCrypto+LibJS: Fix broken subtraction of two negative signed bigints	commit 7ed89703fea8fcd2ca7da6fa50c78ff9d84b1113Author: Andreas Kling <kling@serenityos.org>Date:   Thu Jan 7 08:51:52 2021 +0100    LibCrypto+LibJS: Fix broken subtraction of two negative signed bigints        Found by oss-fuzz: https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=29326	29326	Libraries/LibCrypto/BigInt/SignedBigInteger.cpp	113;0
serenity-20210105-fdd974b7ef	fdd974b7ef	279d2eee04	Tue Jan 5 12:02:59 2021 +0100	LibJS: Fix UB downcast during GlobalObject construction	commit fdd974b7ef4fb3f38c266f0f16d9b68f84f40bcaAuthor: Andreas Kling <kling@serenityos.org>Date:   Tue Jan 5 12:02:59 2021 +0100    LibJS: Fix UB downcast during GlobalObject construction        When constructing a GlobalObject, it has to pass itself as the global    object to its own Shape. Since this is done in the Object constructor,    and Object is a base class of GlobalObject, it's not yet valid to cast    "this" to a GlobalObject*.        Fix this by having Shape store the global object as an Object& and move    Shape::global_object() to GlobalObject.h where we can at least perform a    valid static_cast in the getter.        Found by oss-fuzz: https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=29267	29267	Libraries/LibJS/Runtime/GlobalObject.h;Libraries/LibJS/Runtime/Object.cpp;Libraries/LibJS/Runtime/Shape.cpp;Libraries/LibJS/Runtime/Shape.h	125;90;72;65;78;110
serenity-20201228-476911e1f9	476911e1f9	be30dc2b18	Mon Dec 28 15:12:29 2020 +0100	LibGfx: fix OOB access in LZW decoder on bad input	commit 476911e1f90742c4bf67e9b3d1815c8211f40bddAuthor: Peter Nelson <peter@peterdn.com>Date:   Mon Dec 28 12:31:09 2020 +0000    LibGfx: fix OOB access in LZW decoder on bad input        This fixes an issue where a corrupted LZW code can result in the first    element of an empty buffer being accessed.        Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=27863	27863	Libraries/LibGfx/GIFLoader.cpp	216;234
serenity-20201222-531c3fe72e	531c3fe72e	69d7a34bc2	Tue Dec 22 10:09:41 2020 +0100	LibGfx: Fix OOB access in GIF deinterlacing	commit 531c3fe72eb18615dba89bfe673b8a8336abfb89Author: Andreas Kling <kling@serenityos.org>Date:   Tue Dec 22 09:31:33 2020 +0100    LibGfx: Fix OOB access in GIF deinterlacing        It was possible to go outside the interlacing row strid/offset arrays.    Just fail the decode if this is about to happen. I've added a FIXME    about rejecting such images earlier, since it's a bit sad to only do    this once we realize the pass index is about to overflow.        Found by oss-fuzz: https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=28239	28239	Libraries/LibGfx/GIFLoader.cpp	380
serenity-20201221-780c64e1f0	780c64e1f0	ab549cf942	Mon Dec 21 18:37:53 2020 +0100	LibELF: Fix ELF::Image::symbol_count() asserting on section-less ELF	commit 780c64e1f09bf7400b94aab594e1993ac97e0557Author: Andreas Kling <kling@serenityos.org>Date:   Mon Dec 21 18:37:53 2020 +0100    LibELF: Fix ELF::Image::symbol_count() asserting on section-less ELF        If we have no sections, we also have no symbols, so just return 0.        Found by oss-fuzz: https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=28683	28683	Libraries/LibELF/Image.cpp	76
