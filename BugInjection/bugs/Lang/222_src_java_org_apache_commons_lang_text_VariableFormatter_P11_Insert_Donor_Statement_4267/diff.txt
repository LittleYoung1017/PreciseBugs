--- /VariableFormatter.java	2023-07-04 02:08:45.093580171 +0000
+++ /Lang-65/src/java/org/apache/commons/lang/text/VariableFormatter.java	2023-07-04 02:08:45.093580171 +0000
@@ -219,7 +219,7 @@
         private static FieldPosition newToken(int type, int beginIndex, int length) {
             FieldPosition fp = new FieldPosition(type);
             fp.setBeginIndex(beginIndex);
-            fp.setEndIndex(beginIndex + length);
+this.setEndIndex ( startPos + length ) ;fp.setEndIndex ( beginIndex + length ) ;
             return fp;
         }
 
