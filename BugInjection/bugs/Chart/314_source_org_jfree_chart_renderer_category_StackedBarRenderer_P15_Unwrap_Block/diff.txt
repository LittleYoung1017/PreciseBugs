--- /StackedBarRenderer.java	2023-07-03 19:02:22.041237392 +0000
+++ /Chart-26/source/org/jfree/chart/renderer/category/StackedBarRenderer.java	2023-07-03 19:02:22.041237392 +0000
@@ -312,10 +312,11 @@
         for (int i = 0; i < row; i++) {
             Number v = dataset.getValue(i, column);
             if (v != null) {
-                double d = v.doubleValue();
-                if (this.renderAsPercentages) {
-                    d = d / total;
-                }
+ 
+double d = v.doubleValue(); if (this.renderAsPercentages) {    d = d / total;}; if (d > 0) {    positiveBase = positiveBase + d;}else {    negativeBase = negativeBase + d;}; 
+ 
+ 
+ 
                 if (d > 0) {
                     positiveBase = positiveBase + d;
                 }
