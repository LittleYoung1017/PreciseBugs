--- /AbstractBlock.java	2023-07-03 18:54:59.075249762 +0000
+++ /Chart-26/source/org/jfree/chart/block/AbstractBlock.java	2023-07-03 18:54:59.079249708 +0000
@@ -431,8 +431,8 @@
         Range hhr = trimToContentHeight(hr);
         return new RectangleConstraint(
             ww, wwr, c.getWidthConstraintType(), 
-            hh, hhr, c.getHeightConstraintType()
-        );
+hh, hhr, c.calculateConstrainedSize (  ) ) ;
+ 
     }
 
     private Range trimToContentWidth(Range r) {
