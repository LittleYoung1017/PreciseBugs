--- /QCodec.java	2023-07-04 03:55:16.222923829 +0000
+++ /Codec-1/src/java/org/apache/commons/codec/net/QCodec.java	2023-07-04 03:55:16.222923829 +0000
@@ -156,7 +156,7 @@
                 break;
             }
         }
-        if (hasUnderscores) {
+if  ( b != UNDERSCORE )  {
             byte[] tmp = new byte[bytes.length];
             for (int i = 0; i < bytes.length; i++) {
                 byte b = bytes[i];
