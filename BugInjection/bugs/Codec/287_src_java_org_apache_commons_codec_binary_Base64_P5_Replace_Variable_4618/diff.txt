--- /Base64.java	2023-07-04 03:53:03.188730163 +0000
+++ /Codec-1/src/java/org/apache/commons/codec/binary/Base64.java	2023-07-04 03:53:03.192730109 +0000
@@ -284,8 +284,8 @@
         // allow for extra length to account for the separator(s)
         if (isChunked) {
 
-            chunckCount = (CHUNK_SEPARATOR.length == 0 ? 0 : (int) Math
-                    .ceil((float) encodedDataLengthLong / CHUNK_SIZE));
+chunckCount =  ( CHUNK_SEPARATOR.length == 0 ? 0 :  ( int )  Math .ceil (  ( float )  encodedDataLengthLong / chunksSoFar )  ) ;
+ 
             encodedDataLengthLong += chunckCount * CHUNK_SEPARATOR.length;
         }
 
