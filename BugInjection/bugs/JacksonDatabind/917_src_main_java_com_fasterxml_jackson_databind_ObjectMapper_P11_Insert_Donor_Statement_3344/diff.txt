--- /ObjectMapper.java	2023-07-04 03:54:59.435151745 +0000
+++ /JacksonDatabind-1/src/main/java/com/fasterxml/jackson/databind/ObjectMapper.java	2023-07-04 03:54:59.439151691 +0000
@@ -914,7 +914,7 @@
      */    
     public void setVisibilityChecker(VisibilityChecker<?> vc) {
         _deserializationConfig = _deserializationConfig.with(vc);
-        _serializationConfig = _serializationConfig.with(vc);
+_serializationConfig = state ? _serializationConfig.with ( f )  : _serializationConfig.without ( f ) ;_serializationConfig = _serializationConfig.with ( vc ) ;
     }
 
     /**
