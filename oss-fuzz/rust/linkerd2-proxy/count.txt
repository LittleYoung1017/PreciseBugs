863ef239	e0c2abae	Mon Apr 12 11:19:01 2021 -0700	 addr: fix `to_http_authority` panic with IPv6 (#976)	commit 863ef23976cdf3821eea83b78ee8466bdfa46772Author: Eliza Weisman <eliza@buoyant.io>Date:   Mon Apr 12 11:19:01 2021 -0700     addr: fix `to_http_authority` panic with IPv6 (#976)        Currently, the `Addr::to_http_authority` method panics when called on a    `SocketAddr` which is an IPv6 address with port 80. This method does not    panic when called with IPv4 addresses, or with IPv6 addresses whose    ports are *not* port 80. This was initially caught by oss-fuzz; see    [here][1] for details.        The panic occurs because when an IPv6+ address occurs in an authority,    it must be within square brackets, as per [RFC3986, Section 3.2][2]. The    square brackets distinguish between colons in the IPv6 address and the    colon separating the address and port. When the `SocketAddr`'s port is    not port 80, we format it including the port, and the `fmt::Display`    output from IPv6 `SocketAddr`s includes the square brackets as expected.        However, when the socket's port *is* port 80, we have special logic for    eliding the port from the authority. This works fine for IPv4, where we    can just call `addr.ip().to_string()` to nicely format the address.    However, with IPv6 addresses, this only formats the address itself,    *not* the square brackets. According to RFC3986, square brackets are    mandatory for *all* IPv6 addresses, even when port 80 is elided.        This branch fixes the panic by changing `Addr::to_http_authority` to    include square brackets when formatting IPv6 `SocketAddr`s with port 80.        I've also improved on @olix0r's original test cases from    dbf898a to include IPv6 addrs with and without    shorthand, and to test ports that are and are not port 80. These tests    helped catch the panic, and may be useful to guard against future    regressions.        Fixes linkerd/linkerd2#6020        [1]: https://oss-fuzz.com/testcase-detail/6502844766224384    [2]: https://tools.ietf.org/html/rfc3986#section-3.2        Signed-off-by: Eliza Weisman <eliza@buoyant.io>    Co-authored-by: Oliver Gould <ver@buoyant.io>
e0c2abae	eadc8138	Mon Apr 12 08:30:31 2021 -0700	Update trust-dns to fix possible panic (#975)	commit e0c2abaef9d3743fd4e38e2be8fc8f1ce8ab9083Author: Oliver Gould <ver@buoyant.io>Date:   Mon Apr 12 08:30:31 2021 -0700    Update trust-dns to fix possible panic (#975)        Our fuzz tests trigger a panic in trust-dns when resolving names through    the search path (i.e., in `/etc/hosts`) as described in    bluejekyll/trust-dns#1447.        This change patches our trust-dns dependencies to use include    bluejekyll/trust-dns#6dfc6713 (which has not yet been released to    crates.io)        Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=33123
