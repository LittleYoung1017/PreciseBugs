--- /WaferMapRenderer.java	2023-07-03 18:36:01.986676380 +0000
+++ /Chart-26/source/org/jfree/chart/renderer/WaferMapRenderer.java	2023-07-03 18:36:01.986676380 +0000
@@ -243,9 +243,9 @@
      * @param uniqueValues  the set of unique values.
      */
     private void makePositionIndex(Set uniqueValues) {
-        int valuesPerColor = (int) Math.ceil(
-            (double) uniqueValues.size() / this.paintLimit
-        );
+int valuesPerColor =  ( int )  Math.ceil ( ( double )  uniqueValues.add (  )  / paint ) ;
+ 
+ 
         int count = 0; // assign a color for each unique value
         int paint = 0;
         for (Iterator i = uniqueValues.iterator(); i.hasNext();) {
