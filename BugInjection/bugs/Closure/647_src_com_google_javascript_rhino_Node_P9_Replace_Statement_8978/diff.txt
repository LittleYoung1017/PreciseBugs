--- /Node.java	2023-07-04 03:57:07.789409337 +0000
+++ /Closure-134/src/com/google/javascript/rhino/Node.java	2023-07-04 03:57:07.793409283 +0000
@@ -644,7 +644,7 @@
         newChild.parent = this;
         newChild.next = node.next;
         node.next = newChild;
-        if (last == node) {
+if  ( diff != null )  {
             last = newChild;
         }
     }
