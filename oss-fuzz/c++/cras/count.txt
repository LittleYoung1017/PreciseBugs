1422ba04	95983a52	Wed Feb 15 14:33:06 2023 +0000	Always enable debug symbols	commit 1422ba0407adb7c57bd6844d2b78b5831758e571Author: Li-Yu Yu <aaronyu@google.com>Date:   Mon Feb 13 16:55:20 2023 +0800    Always enable debug symbols        I don't see a reason to not enable debug symbols    (except deviating from bazel's default).    cras is not a 1GB binary so the build times for linux,    oss-fuzz, kythe do not matter much. It's just nice to    have it set by default; adding it after the fact may    be hard sometimes.        People who really don't want the debug symbols can force    off by:    bazel build --copt=-g0 --linkopt=-g0 --strip=always.        NOTE: this does not affect debug symbol stripping for    ChromeOS builds. It is handled by portage.        BUG=None    TEST=None        Change-Id: I3f5f1b77d053df39d87225319b0b238536e10fde    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/4244099    Tested-by: Li-Yu Yu <aaronyu@google.com>    Reviewed-by: Chih-Yang Hsia <paulhsia@chromium.org>    Commit-Queue: Li-Yu Yu <aaronyu@google.com>    Tested-by: Audio Quick Verifier <audio-qv@chromeos-audio-qv.iam.gserviceaccount.com>
eb8f656f	ed994085	Thu Dec 15 13:08:25 2022 +0000	CRAS: Fixes the error: MemorySanitizer	commit eb8f656fabfd3bc5cca68387e7e00605c2397342Author: cranelw <cranelw@chromium.org>Date:   Thu Dec 15 15:55:11 2022 +0800    CRAS: Fixes the error: MemorySanitizer        The line    `let empty = CString::new("").unwrap();`    causes use-of-uninitialized-value.        BUG=b:262675119, oss-fuzz:54317    TEST=`FEATURES="test noclean" USE="asan cras-ml" emerge-amd64-generic -j cras_rust adhd`        Change-Id: If7ed2447b91e71a59394e4f7464afa736d10ee5b    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/4108454    Commit-Queue: Chih-Yang Hsia <paulhsia@chromium.org>    Reviewed-by: Li-Yu Yu <aaronyu@google.com>    Commit-Queue: Cranel W <cranelw@chromium.org>    Tested-by: Chih-Yang Hsia <paulhsia@chromium.org>    Reviewed-by: Chih-Yang Hsia <paulhsia@chromium.org>
014771d6	63759b30	Sun Aug 14 23:48:40 2022 +0000	CRAS: fix use of uninitialized value in cras_fmt_conv	commit 014771d61a77dfdd8ad623a0138c9e90b9f3ee35Author: michelleyswang <michelleyswang@google.com>Date:   Fri Aug 12 06:56:36 2022 +0000    CRAS: fix use of uninitialized value in cras_fmt_conv        Changes:    - Change malloc to calloc in mix_add_scale_stride to fix use of      uninitialized value error        BUG=b:242265071, oss-fuzz:49921    TEST=cras_fl_media_fuzzer        Change-Id: Ib7d0823d3fb1b03a80f4ab560d6e17dd03ef3d4f    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/3827105    Commit-Queue: Chih-Yang Hsia <paulhsia@chromium.org>    Tested-by: Michelle Wang <michelleyswang@google.com>    Tested-by: Chih-Yang Hsia <paulhsia@chromium.org>    Reviewed-by: Chih-Yang Hsia <paulhsia@chromium.org>
ecdf9184	5b8272ff	Tue Aug 24 13:29:43 2021 +0000	CRAS: fix fuzzing build failure	commit ecdf9184b9fb779a50b0290768efd2ed1ca37d43Author: Hung-Hsien Chen <hunghsienchen@chromium.org>Date:   Mon Aug 23 10:47:25 2021 +0000    CRAS: fix fuzzing build failure        Create cras_bt_log.c and declare struct cras_bt_event_log *btlog in it.    One can include cras_bt_log.h to use the variable btlog.        BUG=oss-fuzz:37426    TEST=`python infra/helper.py build_image cras && python infra/helper.py    build_fuzzers --sanitizer address --engine afl --architecture x86_64    cras ~/chromiumos/src/third_party/adhd/cras`    TEST=FEATURES=test USE=asan emerge-${BOARD} adhd        Change-Id: Ib21ee825998c336f422678f0fb78d10242064695    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/3110248    Commit-Queue: Hung-Hsien Chen <hunghsienchen@chromium.org>    Commit-Queue: Chih-Yang Hsia <paulhsia@chromium.org>    Reviewed-by: Li-Yu Yu <aaronyu@google.com>    Reviewed-by: Chih-Yang Hsia <paulhsia@chromium.org>    Tested-by: Li-Yu Yu <aaronyu@google.com>
bb0ca66d	a5352bd4	Thu Aug 5 12:07:36 2021 +0000	cras: Fix a potential Divide-by-zero caught by fuzzer	commit bb0ca66df5fd62667e4ec5baed37ef4ee786e1edAuthor: Judy Hsiao <judyhsiao@chromium.org>Date:   Wed Aug 4 14:48:55 2021 +0800    cras: Fix a potential Divide-by-zero caught by fuzzer        normalize_factor = 1.0 / abs_sum;    If abs_sum = 0 then there will be a Divide-by-zero.        The abs_sum is the sum of a selected row of channel conversion    matrix, which should not be zero in normal cases.    Set the normalize_factor to 0 to prevent the Divide-by-zero    and print out an error message when `normalize` gets factor <= 0.        BUG=oss-fuzz:34195    TEST=`python infra/helper.py reproduce cras rclient_message         ~/Downloads/clusterfuzz-testcase-minimized-rclient_message-6147736828248064`        Change-Id: Ic35396bb95f5bb49c20c4e50eb66ff4aa3ad4a08    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/3071503    Tested-by: Judy Hsiao <judyhsiao@google.com>    Reviewed-by: Chih-Yang Hsia <paulhsia@chromium.org>    Commit-Queue: Judy Hsiao <judyhsiao@google.com>
e37374a1	7bbf54da	Mon Nov 2 06:44:48 2020 +0000	CRAS: control_rclient - Fix memcpy size of bt debug log	commit e37374a1af08505a76352d21e0959977e210d0b1Author: Hsin-Yu Chao <hychao@chromium.org>Date:   Fri Oct 30 03:24:12 2020 +0000    CRAS: control_rclient - Fix memcpy size of bt debug log        BUG=oss-fuzz:26739    TEST=cras_test_client --dump_bt        Change-Id: I00e50e25e5230a2997ff18ca143d78bee765c34f    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/2509109    Reviewed-by: Chih-Yang Hsia <paulhsia@chromium.org>    Tested-by: Hsinyu Chao <hychao@chromium.org>    Commit-Queue: Chih-Yang Hsia <paulhsia@chromium.org>
83dbfea9	ce0e1810	Wed Aug 12 11:01:23 2020 +0000	CRAS: fuzz: Fix oss-fuzz build	commit 83dbfea97821270e19da28e43fc2ce2f5a0300b2Author: paulhsia <paulhsia@chromium.org>Date:   Mon Aug 10 19:03:48 2020 +0800    CRAS: fuzz: Fix oss-fuzz build        - Check libudev instead of udev    - Build and install gtest's library and pc file by      - Build from ToT 1.8.x branch      - Install by `make install`        BUG=oss-fuzz:24744    TEST=Build CRAS in fuzzer        Change-Id: I0c6a6827bb696302d4fd2d300c1f91ab88883482    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/2346129    Tested-by: Chih-Yang Hsia <paulhsia@chromium.org>    Reviewed-by: Curtis Malainey <cujomalainey@chromium.org>    Commit-Queue: Chih-Yang Hsia <paulhsia@chromium.org>
364e5836	e64841b1	Fri May 29 18:58:33 2020 +0000	CRAS: alsa_plugin_io - Fix fuzzer build	commit 364e58364f0ffca4f06d3ae31146a5f3b213ca65Author: Hsin-Yu Chao <hychao@chromium.org>Date:   Fri May 29 02:12:37 2020 +0000    CRAS: alsa_plugin_io - Fix fuzzer build        oss-fuzz: 22700        BUG=None    TEST=In adhd/ run         docker build -t ossfuzz/cras -f cras/src/fuzz/Dockerfile .         docker run --cap-add=SYS_PTRACE -ti --rm -v /tmp/fuzzers:/out ossfuzz/cras        Change-Id: I9f724140b3440a8bdb7858f0421234ec3e08a94f    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/2217922    Reviewed-by: Chih-Yang Hsia <paulhsia@chromium.org>    Tested-by: Chih-Yang Hsia <paulhsia@chromium.org>    Commit-Queue: Chih-Yang Hsia <paulhsia@chromium.org>
340bfad7	6adfe8d6	Fri Nov 22 04:50:40 2019 +0000	CRAS: fuzz: fix oss-fuzz build	commit 340bfad7827015339f02b61daefc02cc02d3849fAuthor: Fletcher Woodruff <fletcherw@chromium.org>Date:   Wed Nov 20 12:02:37 2019 -0700    CRAS: fuzz: fix oss-fuzz build        Add cargo as dependency to Dockerfile so that we can build and install the    rust lib.        Add -lcras_rust into fuzzer build invocation.        BUG=chromium:1026572    TEST=build docker image and fuzzers        Change-Id: I09538a4656ab48b99accf546685b8ed95f5678dd    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/1926518    Tested-by: Fletcher Woodruff <fletcherw@chromium.org>    Reviewed-by: Dylan Reid <dgreid@chromium.org>    Commit-Queue: Fletcher Woodruff <fletcherw@chromium.org>
94dc7557	5b227937	Mon Oct 7 21:01:17 2019 +0000	CRAS: cras_rclient_util: Fix fuzzer error	commit 94dc75574e4bfa97f07a681d77bbea9726077f96Author: paulhsia <paulhsia@chromium.org>Date:   Mon Oct 7 10:28:15 2019 +0800    CRAS: cras_rclient_util: Fix fuzzer error        For CRAS_SERVER_SET_AEC_DUMP, the num_fds should be exactly 1.        oss-fuzz: 18038    BUG=chromium:937765    TEST=Build        Change-Id: Ie578c019f53a0f097f95a7334a2dfa9288bef411    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/1843793    Reviewed-by: Cheng-Yi Chiang <cychiang@chromium.org>    Reviewed-by: Dylan Reid <dgreid@chromium.org>    Tested-by: Chih-Yang Hsia <paulhsia@chromium.org>    Tested-by: Dylan Reid <dgreid@chromium.org>    Commit-Queue: Dylan Reid <dgreid@chromium.org>
566e3c62	4665c468	Sun Sep 22 16:53:57 2019 +0000	CRAS: cras_types: Fix cras_stream_direction_mask	commit 566e3c62ced1d593b058b5ad142a3ccd77c98066Author: paulhsia <paulhsia@chromium.org>Date:   Thu Sep 19 21:50:54 2019 +0800    CRAS: cras_types: Fix cras_stream_direction_mask        oss-fuzz: 17478        Returns bitmask for valid directions, -EINVAL for invalid input.        BUG=chromium:937765    TEST=Build and unit tests        Change-Id: Icbeb00800a1c298f2dc64dae0f14b251f40d90f6    Reviewed-on: https://chromium-review.googlesource.com/c/chromiumos/third_party/adhd/+/1813839    Reviewed-by: Dylan Reid <dgreid@chromium.org>    Tested-by: Chih-Yang Hsia <paulhsia@chromium.org>    Tested-by: Dylan Reid <dgreid@chromium.org>    Commit-Queue: Chih-Yang Hsia <paulhsia@chromium.org>
684345c5	d5b49003	Thu Jul 25 12:26:06 2019 -0700	CRAS: Fix cras_fill_client_get_hotword_models_ready	commit 684345c55456c30565da120d460f7bdb2ab8a465Author: paulhsia <paulhsia@chromium.org>Date:   Thu Jul 25 18:07:30 2019 +0800    CRAS: Fix cras_fill_client_get_hotword_models_ready        oss-fuzz:16044        Skip the string copy if the input hotword_models is NULL.        BUG=b:137329902    TEST=unit tests        Change-Id: Ie4fc94e9e4a4d9a427ab9bebe1d33430ff708373    Reviewed-on: https://chromium-review.googlesource.com/1718184    Tested-by: Yu-Hsuan Hsu <yuhsuan@chromium.org>    Commit-Ready: Chih-Yang Hsia <paulhsia@chromium.org>    Legacy-Commit-Queue: Commit Bot <commit-bot@chromium.org>    Reviewed-by: Yu-Hsuan Hsu <yuhsuan@chromium.org>
8cf84d77	708ff00a	Fri Jun 28 16:52:37 2019 -0700	CRAS: cras_shm: Fix inline definition	commit 8cf84d775fdd9961549b128d9fac510bd613657aAuthor: Cheng-Yi Chiang <cychiang@chromium.org>Date:   Thu Jun 27 22:09:06 2019 +0800    CRAS: cras_shm: Fix inline definition        inline function cause build failure in fuzz.    Fix it by using static inline so the function is always resolved within    the translation unit.    More detail in http://clang.llvm.org/compatibility.html#inline.        Fix issue at    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=15514        BUG=None    TEST=unittest        Change-Id: Ibc1fdf02b87cb6ecc90d0badc9095579c319562c    Reviewed-on: https://chromium-review.googlesource.com/1679957    Tested-by: Cheng-Yi Chiang <cychiang@chromium.org>    Commit-Ready: ChromeOS CL Exonerator Bot <chromiumos-cl-exonerator@appspot.gserviceaccount.com>    Legacy-Commit-Queue: Commit Bot <commit-bot@chromium.org>    Reviewed-by: Hsinyu Chao <hychao@chromium.org>    Reviewed-by: Cheng-Yi Chiang <cychiang@chromium.org>
f27080e9	57abaf66	Mon Jun 3 17:18:35 2019 -0700	CRAS: rclient - Fix buffer overflow in fuzz test	commit f27080e90427c1714eb894f2f749e10a618a50a6Author: Hsin-Yu Chao <hychao@google.com>Date:   Mon Jun 3 12:57:49 2019 +0800    CRAS: rclient - Fix buffer overflow in fuzz test        oss-fuzz issue at    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=15058        BUG=None    TEST=None        Change-Id: Id187351e5e1bb574f5a67fcd0399d3a5c08c7f95    Reviewed-on: https://chromium-review.googlesource.com/1640757    Commit-Ready: Hsinyu Chao <hychao@chromium.org>    Tested-by: Hsinyu Chao <hychao@chromium.org>    Legacy-Commit-Queue: Commit Bot <commit-bot@chromium.org>    Reviewed-by: Cheng-Yi Chiang <cychiang@chromium.org>
e93453f0	9955a907	Tue Jul 3 08:25:59 2018 -0700	CRAS: test_client - Fix compile error in fuzz test	commit e93453f0593494a74a2c54dcdebdf540edf97480Author: Hsin-Yu Chao <hychao@chromium.org>Date:   Tue Jul 3 12:38:51 2018 +0800    CRAS: test_client - Fix compile error in fuzz test        BUG=None    TEST=cd /path/to/oss-fuzz    python infra/helper.py build_image cras    python infra/helper.py build_fuzzers --sanitizer address cras        Change-Id: I9d476786416de5185b1b93ffaac8ec1be38cce35    Reviewed-on: https://chromium-review.googlesource.com/1124062    Commit-Ready: Hsinyu Chao <hychao@chromium.org>    Tested-by: Hsinyu Chao <hychao@chromium.org>    Reviewed-by: Cheng-Yi Chiang <cychiang@chromium.org>
0b6d24c0	3a33a280	Thu Jun 28 03:43:19 2018 -0700	CRAS: fuzz - Fix ossfuzz/cras build	commit 0b6d24c06c6f991eab50c691c56b12bae46637fbAuthor: Hsin-Yu Chao <hychao@chromium.org>Date:   Tue Jun 26 12:00:23 2018 +0800    CRAS: fuzz - Fix ossfuzz/cras build        Add correct configure flag to disable dbus and webrtc-apm library    so that ossfuzz/cras can build.        Failure detail in    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=9074        BUG=None    TEST=    sudo docker build -t ossfuzz/cras -f src/fuzz/Dockerfile .    sudo docker run --privileged -ti --rm -v $(pwd):/src/cras \            -v /tmp/fuzzers:/out ossfuzz/cras        Change-Id: I5764bddd1bdd0622e0f545e773ccee37e78cc0e0    Reviewed-on: https://chromium-review.googlesource.com/1114402    Commit-Ready: Hsinyu Chao <hychao@chromium.org>    Tested-by: Hsinyu Chao <hychao@chromium.org>    Reviewed-by: Dylan Reid <dgreid@chromium.org>
678545b8	3734ed4c	Tue Sep 26 13:36:07 2017 -0700	CRAS: Fix build without DBUS	commit 678545b849f161e0c4dd580c295b6c090f0514bbAuthor: Dylan Reid <dgreid@chromium.org>Date:   Fri Sep 22 22:44:06 2017 -0700    CRAS: Fix build without DBUS        CRAS needs to be able to build without dbus for fuzz testing, the    oss-fuzz environment doesn't supply libdbus.        This will break filtering jack names, but that isn't part of the fuzz    test as there are no real devices used during the test.        Change-Id: Id8a6a0a7261d3c378b6805caf1f1866bcff473a9    Signed-off-by: Dylan Reid <dgreid@chromium.org>    Reviewed-on: https://chromium-review.googlesource.com/679816    Reviewed-by: Cheng-Yi Chiang <cychiang@chromium.org>
