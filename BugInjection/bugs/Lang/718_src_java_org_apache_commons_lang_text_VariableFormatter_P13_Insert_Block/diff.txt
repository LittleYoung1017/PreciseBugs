--- /VariableFormatter.java	2023-07-03 22:12:26.418350116 +0000
+++ /Lang-65/src/java/org/apache/commons/lang/text/VariableFormatter.java	2023-07-03 22:12:26.422350063 +0000
@@ -715,7 +715,7 @@
      * @return the result of the interpolation process
      */
     private Object doReplace(char[] data, int offset, int length, Object ref, List priorVariables) {
-        if (data == null) {
+if  (  ( this.getMap (  )  )  == null )  {     return null; }
             return null;
         }
 
