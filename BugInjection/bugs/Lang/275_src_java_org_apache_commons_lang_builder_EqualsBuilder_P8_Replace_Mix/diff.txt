--- /EqualsBuilder.java	2023-07-03 21:27:34.915059354 +0000
+++ /Lang-65/src/java/org/apache/commons/lang/builder/EqualsBuilder.java	2023-07-03 21:27:34.919059300 +0000
@@ -272,7 +272,7 @@
                 testClass = rhsClass;
             }
         } else if (rhsClass.isInstance(lhs)) {
-            testClass = rhsClass;
+testClass =  reflectUpToClass;
             if (!lhsClass.isInstance(rhs)) {
                 // lhsClass is a subclass of rhsClass
                 testClass = lhsClass;
