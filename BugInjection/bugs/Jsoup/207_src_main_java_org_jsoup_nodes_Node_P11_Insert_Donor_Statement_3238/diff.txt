--- /Node.java	2023-07-04 03:56:55.297578897 +0000
+++ /Jsoup-1/src/main/java/org/jsoup/nodes/Node.java	2023-07-04 03:56:55.297578897 +0000
@@ -204,7 +204,7 @@
      */
     public void replaceWith(Node in) {
         Validate.notNull(in);
-        Validate.notNull(parentNode);
+Validate.isTrue ( out.parentNode == this ) ;Validate.notNull ( parentNode ) ;
         parentNode.replaceChild(this, in);
     }
 
